try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4c11b4c0-48cd-4a42-9a13-06bc8e0591de",e._sentryDebugIdIdentifier="sentry-dbid-4c11b4c0-48cd-4a42-9a13-06bc8e0591de")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8825],{49383:function(e,t,s){Promise.resolve().then(s.bind(s,74279))},81839:function(e,t,s){"use strict";s.d(t,{hO:function(){return d},j1:function(){return m},jZ:function(){return p},ls:function(){return c}});var a=s(99376),n=s(2265),l=s(64040),r=s(49131),i=s(21288),o=s(9568);let c="pending-collaboration-invite",d=()=>{let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{try{let e=sessionStorage.getItem(c);if(e){let s=JSON.parse(e);t(s)}}catch(e){i.logging.error("Error reading pending collaboration invite:",{error:e})}},[]),{pendingInvite:e,clearPendingInvite:(0,n.useCallback)(()=>{sessionStorage.removeItem(c),t(null)},[])}},u=e=>{let t=new URL((null==e?void 0:e.get("redirect"))?decodeURIComponent(e.get("redirect")):"/",window.location.origin);return t.searchParams.set("should-refresh-credentials","1"),t},m=()=>{let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{pendingInvite:s,clearPendingInvite:l}=d();return(0,n.useCallback)(a=>{if(s){let e="".concat(s.projectUrl,"?magic_link=").concat(s.magicLink);l(),window.location.href=e;return}let n=u(t),r=new URLSearchParams(t);a?(r.set("redirect",n.pathname+n.search),a.includes("?")?e.push(a+"&".concat(r.toString())):e.push(a+"?".concat(r.toString()))):e.push(n.pathname+n.search),e.refresh()},[e,t,s,l])},p=()=>{let{setIsSuccessfulReferral:e}=(0,o.l)();return(0,n.useCallback)(async(t,s)=>{if(!s)return;let a=(0,r.Tb)();try{let n=await t.getIdToken();await a.post("/user/referral-code/use",{referral_code:s},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}),e()}catch(t){let e=(0,l.B8)(t);400===e.status&&(e.message=e.message||"Invalid referral code",e.details="Your sign-up will proceed without the referral bonus."),(0,l.Eo)(e)}},[e])}},9568:function(e,t,s){"use strict";s.d(t,{l:function(){return a}});let a=(0,s(59625).Ue)(e=>({shouldShowReferralNotice:!1,setIsSuccessfulReferral:()=>e({shouldShowReferralNotice:!0})}))},74279:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return iz}});var a,n,l,r,i,o,c,d,u,m,p=s(57437),h=s(29827),x=s(21770),f=s(99376),g=s(2265),v=s(14438),b=s(52558),j=s(20958),y=s(27132),w=s(64040),N=s(49131),E=s(24032),k=s(22076),C=s(97318),_=s(46214),S=s(2043),T=s(21288),R=s(49284),I=s(74541),P=s(47176),A=s(74746),z=s(50126),D=s(37675),O=s(10867),L=s(51115),M=s(60256);let Z=()=>{let e=(0,g.useRef)({}),t=(0,g.useMemo)(()=>["click","mousemove","keydown","touchstart","touchmove","touchend"],[]),s=(0,g.useCallback)((s,a)=>{let n=new Date().getTime()-s;for(let s of(_.ZP.capture(R.SL.FIRST_INTERACT_AFTER_GEN,{plinged_feature:a,time_to_activity_ms:n}),t))document.removeEventListener(s,e.current[s])},[t]),a=(0,g.useCallback)(a=>{let n=new Date().getTime();for(let l of t){let t=()=>{s(n,a.didPling)};e.current[l]=t,document.addEventListener(l,t)}},[t,s]);return(0,g.useEffect)(()=>()=>{for(let s of t)e.current[s]&&document.removeEventListener(s,e.current[s])},[t]),{startTrackingUserActivity:a}},F=()=>{let{userData:e}=(0,M.SE)(),t=(0,g.useRef)(e);(0,g.useEffect)(()=>{t.current=e},[e]);let{startTrackingUserActivity:s}=Z();return{playAudioOnGenerationComplete:(0,g.useCallback)(e=>{var a;let n=t.current,l=null!==(a=null==n?void 0:n.sound_effect_active)&&void 0!==a?a:"firstgen",r=!e.isChatOnly&&"never"!==l&&("always"===l||"firstgen"===l&&!!e.isCreation),i=r;r&&new Audio("/audio/generation-complete.mp3").play().catch(()=>{i=!1}),s({didPling:i})},[s])}};var U=s(68904),K=s(81839),V=s(65666),W=s(88391),B=s(77113),G=s(62869),H=s(26110),q=s(41135),X=s(30401),Y=s(32489),$=s(7455);let J=e=>{let{projectId:t,projectName:s,invitor:a,magicCodeId:n,done:l,onReject:r}=e,[i,o]=(0,g.useState)(!1),c=(0,h.NL)(),{authUser:d}=(0,b.Eu)(),u=(0,$.c)(e=>e.collaborators).find(e=>e.id===(null==d?void 0:d.uid)),m=u&&!u.joined_at,x=async()=>{o(!0);try{if(n){l();return}let e=(0,N.SJ)();await e.put("/projects/".concat(t,"/collaborators/accept-invite")),v.Am.success("Invitation accepted!",{description:'You can now access "'.concat(s,'"')}),await c.invalidateQueries({queryKey:C.iZ.collaborators(t)}),await c.invalidateQueries({queryKey:C.iZ.detail(t)}),l()}catch(e){console.error("Error accepting invite:",e),(0,w.Eo)(e)}finally{o(!1)}},f=async()=>{o(!0);try{if(m){let e=(0,N.SJ)();await e.put("/projects/".concat(t,"/collaborators/reject-invite"))}await c.invalidateQueries({queryKey:C.iZ.collaborators(t)}),null==r||r()}catch(e){(0,w.Eo)(e)}finally{o(!1)}};return(0,p.jsxs)(H.cZ,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,p.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,p.jsx)(q.xx,{className:"h-9"}),(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{className:"text-2xl md:text-3xl",children:"You've been invited!"}),(0,p.jsxs)(H.Be,{children:["You've been invited to collaborate on \"",s,'"',a&&" by ".concat(a)]})]})]}),(0,p.jsxs)(H.cN,{fullWidthButtons:!0,className:"flex-col gap-2",children:[(0,p.jsxs)(G.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),x()},disabled:i,className:"w-full",children:[(0,p.jsx)(X.Z,{className:"mr-2 h-4 w-4"}),"Accept invitation"]}),(0,p.jsxs)(G.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f()},disabled:i,className:"w-full",variant:"outline",children:[(0,p.jsx)(Y.Z,{className:"mr-2 h-4 w-4"}),"Decline invitation"]})]})]})},Q="lovable_collaboration_status",ee=()=>{try{let e=localStorage.getItem(Q);return e?JSON.parse(e):{}}catch(e){return{}}},et=(e,t)=>{let s=ee()[e];return s&&s.userId===t?Date.now()-s.timestamp>3e5?null:s.isMember:null},es=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=ee();l[e]={userId:t,isMember:s,joinedAt:a,accessLevel:n,timestamp:Date.now()},localStorage.setItem(Q,JSON.stringify(l))},ea=(e,t)=>{let s=ee();s[e]&&s[e].userId===t&&(delete s[e],localStorage.setItem(Q,JSON.stringify(s)))},en="magic_link",el=()=>{let{authUser:e}=(0,b.Eu)(),t=(0,f.useRouter)(),s=(0,f.usePathname)(),[a,n]=(0,g.useState)(!1),l=(0,f.useSearchParams)(),r=(0,h.NL)(),i=(0,V.D)(),o=l.get(en),c=(0,W.z)(J),d=(0,$.c)(e=>e.collaborators),u=(0,$.c)(e=>e.hasFetchedCollaborators),m=d.find(t=>t.id===(null==e?void 0:e.uid)),p=(null==e?void 0:e.uid)?et(i,e.uid):null,j=m&&m.joined_at,y=null!==p?p:j;(0,g.useEffect)(()=>{if(u&&(null==e?void 0:e.uid)){let s=!!(null==m?void 0:m.joined_at),a=et(i,e.uid);if(null!==a&&a!==s&&ea(i,e.uid),m){var t;es(i,e.uid,s,(null===(t=m.joined_at)||void 0===t?void 0:t.toString())||null,m.access_level||null)}else!0===a&&ea(i,e.uid)}},[u,null==e?void 0:e.uid,m,i]);let{mutate:w,data:E}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,N.SJ)().get("/projects/".concat(i,"/magic-codes/").concat(t,"/validate"))},onSuccess:e=>{c({childProps:{projectId:i,projectName:e.project_name,invitor:e.invitor_display_name,magicCodeId:o,done:()=>{k({token:o})},onReject:()=>{T({token:o})}}})},onError:e=>{v.Am.error("Invalid invite link"),t.push("/")}}),{mutate:k}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,N.SJ)().post("/projects/".concat(i,"/magic-codes/").concat(t,"/accept"))},onSuccess:()=>{(null==e?void 0:e.uid)&&(ea(i,e.uid),es(i,e.uid,!0)),i&&r.invalidateQueries({queryKey:C.iZ.collaborators(i)});let a=new URLSearchParams(l.toString());a.delete(en),t.replace("".concat(s,"?").concat(a.toString())),v.Am.success("You've joined the project!")}}),[_,S]=(0,g.useState)(new Set),{mutate:T}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,N.SJ)().post("/projects/".concat(i,"/magic-codes/").concat(t,"/reject"))},onSuccess:()=>{(null==e?void 0:e.uid)&&ea(i,e.uid),o&&S(e=>new Set(e).add(o)),v.Am.info("Invitation declined",{description:"You've declined the invitation to the project"}),c(!1);let a=new URLSearchParams(l.toString());a.delete(en),t.replace("".concat(s,"?").concat(a.toString()))},onError:e=>{v.Am.error("Failed to decline invitation")}}),R=!!(o&&!e);(0,g.useEffect)(()=>{if(e&&o&&!a){if(_.has(o)){let e=new URLSearchParams(l.toString());e.delete(en),t.replace("".concat(s,"?").concat(e.toString()));return}if(y){c(!1);let e=new URLSearchParams(l.toString());e.delete(en),t.replace("".concat(s,"?").concat(e.toString()));return}w({token:o})}},[e,w,a,o,y,l,t,_,s]),(0,g.useEffect)(()=>{if(R){if(o&&i){let e={projectId:i,magicLink:o,timestamp:Date.now(),projectUrl:s};sessionStorage.setItem(K.ls,JSON.stringify(e))}(0,v.Am)("Log in",{description:"You have to log in to join this project"}),t.push("/login?redirect=".concat(s))}},[t,R,o,i,s]);let I=E||!o,{setHasHandledCollaborationInvite:P}=(0,B.d2)();return(0,g.useEffect)(()=>{I&&P(!0)},[I,P]),I};var er=s(44481),ei=s(28667),eo=s(57346),ec=s(81103),ed=s(94508),eu=s(25658),em=e=>{let{openSidebar:t}=e,s=(0,eu.z)(e=>e.showHistory),{setShowHistory:a}=(0,eu.VF)();return(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",className:(0,ed.cn)("bg-transparent hover:bg-transparent md:hover:bg-accent-primary/75 md:hover:text-accent-primary-foreground",s&&"bg-accent-primary text-accent-primary-foreground hover:bg-accent-primary md:hover:bg-accent-primary/75"),onClick:()=>{s||(_.ZP.capture(R.SL.TABS.HISTORY_OPENED),t()),a(e=>!e)},children:(0,p.jsx)(eo.Z,{name:"history_2",size:"small"})})}),(0,p.jsx)(ec._v,{children:s?"Hide history":"View history"})]})},ep=s(49968),eh=s(95670),ex=s(55721),ef=s(67817),eg=s(25057),ev=s(80733),eb=s(3813);function ej(){let{project_id:e}=(0,f.useParams)(),[t,s]=(0,g.useState)(!1),a=(0,B.iZ)(e=>e.project);if(!(0,eb.qT)())return null;let n=async()=>{if(!t)try{s(!0);let t=await ev.g.getValidToken(),n={};t&&(n.Authorization="Bearer ".concat(t));let l=(0,eg.t)(),r=await fetch("".concat(l,"/projects/").concat(e,"/download-zip"),{method:"GET",headers:n,credentials:"include"});if(!r.ok)throw Error("Download failed: ".concat(r.status," ").concat(r.statusText));let i=await r.blob(),o=window.URL.createObjectURL(i),c=document.createElement("a");c.href=o;let d=r.headers.get("Content-Disposition"),u=null==d?void 0:d.match(/filename="(.+)"/),m=(null==a?void 0:a.name)||(null==a?void 0:a.github_repo_name),p=m?"".concat(m,".zip"):"project-".concat(e,".zip"),h=(null==u?void 0:u[1])||p;c.download=h,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}catch(e){console.error("Error downloading project:",e)}finally{s(!1)}};return(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"secondary",size:"icon-sm",onClick:n,disabled:t,children:(0,p.jsx)(eo.Z,{name:"arrow_downward",size:"small"})})}),(0,p.jsx)(ec._v,{children:(0,p.jsx)("p",{children:"Download project as ZIP"})})]})}var ey=s(27410),ew=s(29328),eN=e=>{let{open:t,setOpen:s,projectId:a}=e,{authUser:n}=(0,b.Eu)(),l=(0,B.iZ)(e=>e.project),r=(0,ef.v)(),{setShowConsole:i}=(0,z.pE)();return(0,p.jsxs)(ex.h_,{open:t,onOpenChange:s,children:[(0,p.jsx)(ex.$F,{asChild:!0,children:(0,p.jsx)("button",{className:"pointer-events-none absolute inset-x-0 select-none bg-transparent text-transparent"})}),(0,p.jsxs)(ex.AW,{className:"z-[1001] flex min-w-[200px] max-w-[250px] flex-col gap-3 rounded-md border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("h3",{className:"",children:"Advanced Settings"}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Developer & debug options."})]}),(r||!1)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eh.Z,{externalHref:(0,ep.U1)(a),iconName:"language",title:"Firestore: Project"},"preview"),(null==l?void 0:l.user_id)&&(null==n?void 0:n.uid)!==(null==l?void 0:l.user_id)&&(0,p.jsx)(eh.Z,{externalHref:(0,ep.fA)(null==l?void 0:l.user_id),iconName:"language",title:"Firestore: User that created this project"},"firestore-user"),(null==n?void 0:n.uid)&&(0,p.jsx)(eh.Z,{externalHref:(0,ep.fA)(null==n?void 0:n.uid),iconName:"language",title:"Firestore: This user"},"firestore-current-user"),(null==l?void 0:l.workspace_id)&&(0,p.jsx)(eh.Z,{externalHref:(0,ep.Ny)(l.workspace_id),iconName:"language",title:"Firestore: Workspace"},"firestore-workspace")]}),!1,r&&(0,p.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(ej,{}),(0,p.jsx)("p",{children:"Download Project as Zip"})]}),r&&(0,p.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(G.z,{variant:"secondary",size:"icon-sm",onClick:()=>i("debug"),children:(0,p.jsx)(eo.Z,{name:"bug_report",size:"small"})}),(0,p.jsx)("p",{children:"Open Debug Console"})]})]})]})},eE=s(14411),ek=s(47483),eC=s(12285),e_=s(79117),eS=s(33145),eT=s(27648),eR=s(26438),eI=s(5073),eP=s(1828);let eA=[{icon:"code",title:"Smarter Code Edits",description:"90% fewer errors and improved generations."},{icon:"devices",title:"New Capabilities",description:"Web search, image generation and more"},{icon:"trending_up",title:"Adaptive Pricing",description:"Pay based on actions, not messages."}],ez=()=>{let e=(0,eb.zq)(),{isAgentModeDefault:t,setAgentMode:s}=(0,eR.v)(),[a,n]=(0,g.useState)(t);return((0,g.useEffect)(()=>{n(t)},[t]),e)?(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2 py-1.5",children:[(0,p.jsxs)(eI.zs,{children:[(0,p.jsxs)(eI.Yi,{className:"flex w-full cursor-pointer items-center gap-2",children:[(0,p.jsx)(eo.Z,{name:"emoji_objects",size:"small"}),(0,p.jsx)("p",{className:"text-sm",children:"Agent Mode"}),(0,p.jsx)(eo.Z,{name:"info",className:"text-muted-foreground",size:"small"})]}),(0,p.jsxs)(eI.bZ,{className:"flex w-[560px] max-w-[60vw] gap-0 rounded-2xl p-0",side:"right",sideOffset:64,children:[(0,p.jsx)("div",{className:"relative m-3 hidden w-1/3 md:block",children:(0,p.jsx)(eS.default,{src:"/img/announcements/agent-release.png",alt:"Meet Agent Mode",fill:!0,className:"rounded-md object-cover"})}),(0,p.jsxs)("div",{className:"flex w-2/3 flex-1 flex-col gap-3 p-4 pl-2",children:[(0,p.jsx)("p",{className:"w-full text-2xl font-medium text-card-foreground",children:"Meet Agent Mode (Beta)"}),(0,p.jsx)("p",{className:"w-full text-base text-muted-foreground",children:"Here is what's new:"}),(0,p.jsx)("div",{className:"flex flex-col gap-4",children:eA.map((e,t)=>(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)("div",{className:"mt-0.5 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-secondary",children:(0,p.jsx)(eo.Z,{name:e.icon,size:"small",className:"text-secondary-foreground"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-sm font-medium leading-tight text-card-foreground",children:e.title}),(0,p.jsx)("p",{className:"text-sm leading-tight text-muted-foreground",children:e.description})]})]},e.title))}),(0,p.jsx)(G.z,{variant:"secondary",size:"sm",asChild:!0,className:"ml-11 mt-1 w-fit",children:(0,p.jsxs)(eT.default,{href:"https://lovable.dev/blog/agent-mode-beta",target:"_blank",rel:"noopener noreferrer",children:["Read more ",(0,p.jsx)(eo.Z,{name:"arrow_outward"})]})})]})]})]}),(0,p.jsx)(eP.r,{checked:a,onCheckedChange:e=>{n(e),s(e)}})]}):null};var eD=s(55157),eO=s(99153),eL=s(93022),eM=s(35354),eZ=s(71759),eF=s(48614),eU=s(1188);let eK=e=>{let{project:t}=e,s=null==t?void 0:t.visibility,a=(0,ew.f6)(e=>"live"===e.visibleMode),n=(0,ew.f6)(e=>"live"!==e.visibleMode&&("live"===e.activeMode||"starting"===e._sandboxState)),l=(0,z.Sl)(e=>e.activeEditId);return t?(0,p.jsx)("div",{className:"flex w-full min-w-0 flex-col items-start gap-0",children:(0,p.jsxs)(eF.M,{mode:"popLayout",initial:!1,children:[(0,p.jsxs)(eU.E.div,{className:"flex items-center gap-1",layout:"position",transition:{duration:.25,bounce:.1,type:"spring"},layoutDependency:a||l,children:[t&&t.name?(0,p.jsx)("p",{className:"hidden truncate text-sm font-medium leading-none md:block",children:null==t?void 0:t.name}):(0,p.jsx)(eL.O,{className:"hidden h-3 w-[150px] md:flex"}),"public"===s&&(0,p.jsx)(eo.Z,{name:"globe",size:"xsmall",className:"hidden md:flex"}),"private"===s&&(0,p.jsx)(eo.Z,{name:"lock",size:"xsmall",className:"hidden md:flex"}),(0,p.jsx)(eo.Z,{size:"small",name:"keyboard_arrow_down",className:"text-foreground/50 group-data-[state=open]:text-primary"})]},"project-name"),!a&&!l&&(0,p.jsx)(eU.E.div,{layout:!0,transition:{duration:.3,bounce:0,type:"spring"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,p.jsx)(eF.M,{mode:"wait",initial:!1,children:(0,p.jsx)(eU.E.p,{className:"hidden w-full min-w-0 truncate text-left text-xs text-muted-foreground md:flex",initial:{y:5,opacity:0},animate:{y:0,opacity:t?1:0},exit:{y:-5,opacity:0},transition:{duration:.15,bounce:0,type:"spring"},children:n?"Loading Live Preview...":"Previewing last saved version"},n?"loading":"saved")})},"status")]})}):(0,p.jsxs)("div",{className:"hidden w-full min-w-0 flex-col items-start gap-1 md:flex",children:[(0,p.jsx)(eL.O,{className:"flex h-3 w-[150px]"}),(0,p.jsx)(eL.O,{className:"flex h-3 w-[125px]"})]})};var eV=e=>{let{}=e,{openSettings:t}=(0,eD.r)(),{authUser:s}=(0,b.Eu)(),a=(0,B.iZ)(e=>e.project),n=null==a?void 0:a.visibility,l=(0,eZ.hO)(e=>e.projectWorkspace),{isMac:r}=(0,eM.Z)(),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),u=(0,ef.v)(),{canEdit:m}=(0,S.t)(),[h,x]=(0,g.useState)(!1),f=!!(s&&l&&(null==s?void 0:s.uid)===(null==l?void 0:l.owner_id)),v=(0,eb.F9)();return(0,p.jsxs)("div",{id:"main-menu",className:"relative flex md:min-w-0 md:shrink",children:[(0,p.jsxs)(ex.h_,{children:[(0,p.jsx)(ex.$F,{asChild:!0,onPointerDown:e=>{e.altKey&&(e.preventDefault(),e.stopPropagation(),o(!0),_.ZP.capture(R.SL.HEADER.SETTINGS_OPENED,{project_id:null==a?void 0:a.id}))},children:(0,p.jsxs)("button",{className:"group flex items-center gap-2 border-none text-foreground outline-none duration-150 ease-in-out hover:opacity-80 focus:outline-none md:min-w-0 md:shrink",children:[(0,p.jsx)(q.xx,{className:"h-[18px] w-[18px] shrink-0"}),a&&v?(0,p.jsx)(eK,{project:a}):(0,p.jsxs)(p.Fragment,{children:[a?(0,p.jsx)("p",{className:"hidden truncate text-sm font-medium md:block",children:null==a?void 0:a.name}):(0,p.jsx)(eL.O,{className:"hidden h-3 w-[130px] md:flex"}),"public"===n&&(0,p.jsx)(eo.Z,{name:"globe",size:"small",className:"hidden md:flex"}),"private"===n&&(0,p.jsx)(eo.Z,{name:"lock",size:"small",className:"hidden md:flex"}),(0,p.jsx)(eo.Z,{size:"small",name:"keyboard_arrow_down",className:"text-foreground/50 group-data-[state=open]:text-primary"})]})]})}),(0,p.jsxs)(ex.AW,{className:"min-w-[200px] border md:min-w-[275px]",align:"start",sideOffset:10,children:[(0,p.jsx)(eh.Z,{title:"Go to Dashboard",iconName:"chevron_left",internalHref:"/"},"dashboard"),l&&(0,p.jsx)(ex.VD,{}),l&&(0,p.jsxs)("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:[(0,p.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:l.name}),(0,p.jsx)(eE.H,{workspace:l,isOwnerOfWorkspace:f})]}),(0,p.jsx)(ex.VD,{}),(0,p.jsx)(ek.r,{}),(0,p.jsx)(ez,{}),m&&(0,p.jsx)(ex.VD,{}),m&&(0,p.jsxs)(ex.Xi,{onClick:()=>t("project"),children:[(0,p.jsx)(eo.Z,{name:"settings"}),(0,p.jsx)("p",{children:"Settings"}),r?(0,p.jsx)(ex.KM,{className:"hidden sm:flex",children:"âŒ˜."}):(0,p.jsx)(ex.KM,{className:"hidden sm:flex",children:"Ctrl."})]}),m&&(0,p.jsx)(eh.Z,{title:"Rename project",iconName:"edit_square",onClick:()=>x(!0)},"rename-project"),(0,p.jsx)(ex.VD,{}),(0,p.jsx)(eO.O,{}),(0,p.jsx)(eh.Z,{title:"Help",iconName:"help",externalHref:"/support"},"help")]})]}),a&&u&&(0,p.jsx)(eN,{open:i,setOpen:o,projectId:a.id}),(0,p.jsx)(eC.O,{projectId:null==a?void 0:a.id,projectName:null==a?void 0:a.name,currentWorkspaceId:null==a?void 0:a.workspace_id,open:c,setOpen:d,isRootDialog:!0}),a&&(0,p.jsx)(e_.i,{project:a,isOpen:h,onClose:()=>x(!1)})]})},eW=s(56613),eB=s(33699),eG=g.memo(e=>{let{children:t,showScrollButtonsInitially:s=!1,className:a}=e,[n,l]=(0,g.useState)(!1),[r,i]=(0,g.useState)(s),[o,c]=(0,g.useState)(s),d=r||o,u=(0,g.useRef)(null),m=()=>{if(!u.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:s}=u.current;i(e>0),c(e<t-s)};return(0,g.useEffect)(()=>{l(!0),m()},[t]),(0,g.useEffect)(()=>(window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[]),(0,p.jsxs)("div",{className:(0,ed.cn)("relative flex max-w-full gap-1",a),children:[d&&(0,p.jsx)(G.z,{variant:"ghost",size:"sm",className:(0,ed.cn)("absolute left-0 z-10 bg-background px-1 opacity-100 transition-opacity duration-200",{"!opacity-0":!n||!r,"pointer-events-none":!n||!r}),onClick:e=>{e.preventDefault(),u.current&&u.current.scrollTo({behavior:"smooth",left:u.current.scrollLeft-.8*u.current.clientWidth})},children:(0,p.jsx)(eo.Z,{name:"chevron_left",size:"small"})}),(0,p.jsx)("div",{ref:u,onScroll:m,className:"w-full overflow-x-auto whitespace-nowrap scrollbar-hide md:overflow-visible",children:t}),d&&(0,p.jsx)(G.z,{variant:"ghost",size:"sm",className:"px-1",disabled:!o,onClick:e=>{e.preventDefault(),u.current&&u.current.scrollTo({behavior:"smooth",left:u.current.scrollLeft+.8*u.current.clientWidth})},children:(0,p.jsx)(eo.Z,{name:"chevron_right",size:"small"})})]})}),eH=s(78099);let eq=(0,g.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:s}=e;return(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(G.z,{size:"icon-sm",variant:"ghost",onClick:()=>{_.ZP.capture(R.SL.HEADER.SIDEBAR_TOGGLED),s()},className:(0,ed.cn)("hover:bg-muted-hover"),children:(0,p.jsx)(eo.Z,{name:t?"dock_to_right-fill":"dock_to_right",size:"small"})})}),(0,p.jsx)(ec._v,{children:t?"Hide sidebar":"View sidebar"})]})});eq.displayName="SidebarToggle";var eX=s(27613);let eY=e=>{let{className:t}=e,{setDevice:s}=(0,ew.My)(),a=(0,ew.f6)(e=>e.device),n=eX.H[a];return(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(G.z,{className:(0,ed.cn)(t),variant:"ghost",size:"icon-sm",onClick:()=>{switch(a){case"desktop":s("tablet");break;case"tablet":s("mobile");break;case"mobile":s("desktop")}_.ZP.capture(R.SL.PREVIEW.DEVICE_CHANGED)},children:(0,p.jsx)(eo.Z,{name:n.icon,size:"small"})})}),(0,p.jsx)(ec._v,{side:"bottom",children:n.tooltip})]})};var e$=s(23518),eJ=s(95186),eQ=s(57054),e0=s(2925);let e1=()=>{let e=(0,A.IE)();return{pages:e?e.filter(e=>"*"!==e.path):null}},e2=()=>{let{pages:e}=e1(),t=(0,e0.u)(e=>e.setCurrentPage),s=(0,ew.My)().refreshPreview,a=(0,ew.f6)(e=>e.currentPath),n=(0,g.useRef)(null),[l,r]=(0,g.useState)(""),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(""),[u,m]=(0,g.useState)(!1),h=()=>{o(!1),r(e4(a)),m(!1)},x=function(e){let{onClickOutside:t,enabled:s=!0}=e,a=(0,g.useRef)(null);return(0,g.useEffect)(()=>{if(!s)return;let e=e=>{a.current&&e.target&&!a.current.contains(e.target)&&t()},n=()=>{a.current&&t()};return document.addEventListener("mousedown",e),window.addEventListener("blur",n),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("blur",n)}},[t,s]),a}({onClickOutside:h,enabled:i});(0,g.useEffect)(()=>{t(a||"/")},[a,t]),(0,g.useEffect)(()=>{r(e4(a))},[a]);let f=e4(a),v=e=>{if(!e)return"/";let t=e.replace(/\s+/g,"");return t.startsWith("/")?t:"/".concat(t)},b=(0,g.useMemo)(()=>Array.from(new Set((e||[]).map(e=>e.path))).map(e=>({value:e,label:e})),[e]),j=e=>{e&&(s(e===a?void 0:e),t(e),o(!1))},y=l===a,w=b.some(e=>e.value===l);return(0,p.jsx)("div",{className:"relative min-w-0 flex-1 flex-grow",children:(0,p.jsxs)(eQ.J2,{open:i,onOpenChange:o,children:[(0,p.jsx)(eJ.I,{ref:n,value:l,onFocus:()=>o(!0),className:"h-auto rounded-none border-none p-0 shadow-none focus-visible:outline-none focus-visible:ring-0",placeholder:f,onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),j(v(c||l.trim()||"/")),h(),e.target.blur();else if("Escape"===e.key)h(),e.target.blur();else if("ArrowDown"===e.key||"ArrowUp"===e.key){var t;if(e.preventDefault(),0===b.length)return;let s=(b.findIndex(e=>e.value===c)+("ArrowDown"===e.key?1:-1)+b.length)%b.length;d((null===(t=b[s])||void 0===t?void 0:t.value)||"")}},onChange:e=>{i||o(!0);let t=e.target.value;r(t);let s=t!==e4(a);!u&&s&&m(!0)}}),(0,p.jsx)(eQ.xo,{className:"sr-only w-full"}),(0,p.jsx)(eQ.yk,{className:(0,ed.cn)("bg-popover p-0",!i&&"hidden"),onOpenAutoFocus:e=>e.preventDefault(),ref:x,sideOffset:8,style:{width:"calc(var(--radix-popover-trigger-width) + 32px)"},align:"start",alignOffset:-12,children:(0,p.jsxs)(e$.mY,{value:c,onValueChange:d,children:[(0,p.jsx)("div",{tabIndex:-1,className:"pointer-events-none hidden",inert:!0,children:(0,p.jsx)(e$.sZ,{value:u?l:""})}),(0,p.jsx)(e$.e8,{children:b.length>0&&(0,p.jsxs)(e$.fu,{children:[!y&&!w&&""!==l&&(0,p.jsx)(e$.di,{value:l,onSelect:j,keywords:[l],className:"w-full overflow-hidden",children:(0,p.jsx)("span",{className:"min-w-0 max-w-full overflow-hidden pr-2",children:l})}),b.map(e=>{let t=a===e.value,s=e5(a,e.value);return(0,p.jsxs)(e$.di,{value:e.value,onSelect:j,keywords:[e.label],children:[e.label,(0,p.jsx)(eo.Z,{name:"check",className:(0,ed.cn)("ml-auto",t||s?"opacity-100":"opacity-0")})]},e.value)})]})})]})})]})})};function e5(e,t){e.endsWith("/")&&(e=e.slice(0,-1)),t.endsWith("/")&&(t=t.slice(0,-1));let s=e.split("/"),a=t.split("/");if(s.length!==a.length)return!1;for(let e=0;e<s.length;e++){let t=s[e],n=a[e];if(t!==n&&!n.startsWith(":"))return!1}return!0}function e4(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?(e.endsWith("/")&&(e=e.slice(0,-1)),e.startsWith("/")||(e="/"+e),e):"/"}var e3=s(61922),e6=s(76906);let e8=()=>{let e=(0,B.iZ)(e=>e.project),t=(0,e3.aS)(e=>e.currentWorkspace),s=(null==t?void 0:t.disable_named_previews)?(0,e6.t)({projectId:null==e?void 0:e.id}):(null==e?void 0:e.name)?(0,e6.t)({projectName:null==e?void 0:e.name}):"#",a=!(null==e?void 0:e.preview_build_commit_sha),{buildFullPreviewUrl:n}=(0,ew.My)(),l=n({baseUrl:s,path:(0,ew.f6)(e=>e.currentPath)}),r=a?void 0:l;return{openPreview:e=>{if(a){e.preventDefault();return}e.altKey&&r&&(e.preventDefault(),window.open(r,"_blank"))},disabledState:a?{disabled:!0,reason:"There is no preview build to open yet"}:void 0,previewUrl:null!=r?r:void 0}},e9=e=>{let{openPreview:t,disabledState:s,previewUrl:a}=e8(),n=(0,y.Z)("md");return s?(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)("span",{children:(0,p.jsx)(G.z,{disabled:s.disabled,...e,children:(0,p.jsx)(eo.Z,{name:"arrow_outward",size:"small"})})})}),(0,p.jsx)(ec._v,{side:"bottom",align:"center",children:s.reason})]}):n?(0,p.jsx)(G.z,{...e,asChild:!0,children:(0,p.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",onClick:t,children:(0,p.jsx)(eo.Z,{name:"arrow_outward"})})}):(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(G.z,{...e,asChild:!0,children:(0,p.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",onClick:t,children:(0,p.jsx)(eo.Z,{name:"arrow_outward",size:"small"})})})}),(0,p.jsx)(ec._v,{side:"bottom",align:"center",children:"Open preview in new tab"})]})};var e7=s(42503),te=s(22287);function tt(e){var t;let{className:s}=e,a=(0,B.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.preview_build_commit_sha}),n=(0,ew.f6)(e=>"live"===e.visibleMode),l=(0,ew.f6)(e=>"live"!==e.visibleMode&&("live"===e.activeMode||"starting"===e._sandboxState)),{snapshot:r}=(0,A.mx)(),i=(0,g.useMemo)(()=>a?r.getEditByShortCommitHash(a.slice(0,7)):null,[a,r]);return(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{className:(0,ed.cn)("cursor-default",s),children:l?(0,p.jsx)(te.$,{variant:"ring",size:"default"}):n?null:(0,p.jsx)(eo.Z,{name:"history_toggle_off",size:"small"})}),(0,p.jsx)(ec._v,{className:"max-w-[30ch]",children:l?(0,p.jsx)("p",{children:"Starting Live Preview..."}):n?(0,p.jsx)("p",{children:"Live Preview"}):(0,p.jsxs)("p",{children:["Showing"," ",(0,p.jsx)("span",{className:"font-medium",children:null!==(t=null==i?void 0:i.commit_message)&&void 0!==t?t:"previous version"}),(null==i?void 0:i.created_at)?" (".concat((0,e7.l)(i.created_at.toDate(),new Date),")"):""]})})]})}let ts=()=>{let{refreshPreview:e}=(0,ew.My)(),[t,s]=(0,g.useState)(!1),a=(0,eb.Cb)(),n=(0,eb.F9)();return(0,p.jsxs)("div",{id:"preview-url-bar",className:"relative flex min-w-0 flex-1 flex-grow flex-row-reverse items-center gap-2 md:flex-auto md:flex-row",children:[!n&&(0,p.jsx)(tt,{}),(0,p.jsxs)("div",{className:"relative flex h-8 min-w-[150px] flex-grow items-center justify-between gap-2 rounded-lg border border-input px-1 text-sm @xl:min-w-[250px]",children:[(0,p.jsx)(eY,{className:"hidden h-6 w-6 p-1 hover:bg-muted md:flex"}),(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsx)(e2,{})}),!!a&&(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(e9,{variant:"ghost",size:"icon-xs",className:"h-6 w-6 p-1 hover:bg-muted"}),(0,p.jsx)(ey.Z,{label:"Refresh page",children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-xs",className:"h-6 w-6 p-1 hover:bg-muted",onClick:()=>{s(!0),e(),setTimeout(()=>{s(!1)},1e3)},disabled:t,children:(0,p.jsx)(eo.Z,{name:"refresh",size:"small",className:t?"animate-spin":""})})})]})]})]})};var ta=s(1266),tn=s(92850),tl=s(76003),tr=s(48736),ti=s(73247),to=s(78298),tc=s(60254),td=s(12339),tu=s(33187),tm=s(63420),tp=s(90962),th=s(15345),tx=s.n(th),tf=s(36512);function tg(e){var t;let{node:s,setCurrentFile:a,currentFile:n,level:l}=e,[r,i]=(0,g.useState)(l<1),{store:o}=(0,E.WR)(),c=o(e=>e.setMessage),d=o(e=>e.message),u=null===(t=s.children)||void 0===t?void 0:t.sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:(0,ed.cn)("group flex cursor-pointer items-center px-2 py-1 text-sm hover:bg-primary/25",n===s.path&&"!bg-accent/50"),onClick:()=>{"directory"===s.type?i(!r):a(s.path)},role:"button",tabIndex:0,children:[(0,p.jsx)("div",{className:"mr-1 flex-shrink-0",style:{marginLeft:16*l},children:"directory"===s.type?(0,p.jsx)(eo.Z,{name:"chevron_right",size:"default",className:(0,ed.cn)("transition-transform duration-200",{"rotate-90":r})}):null}),"directory"!==s.type&&(0,p.jsx)("div",{className:"mr-1 h-4 w-4 flex-shrink-0",children:(0,p.jsx)(eo.Z,{name:"docs",size:"small"})}),(0,p.jsx)("span",{className:"flex-1 truncate",children:s.name}),(0,p.jsx)(G.z,{variant:"ghost",size:"icon",className:"ml-auto h-6 w-6 opacity-0 transition-opacity group-hover:opacity-100",onClick:e=>{e.stopPropagation(),c(d?"".concat(d," ").concat(s.path):s.path)},title:"Reference ".concat(s.type," in chat"),children:(0,p.jsx)(eo.Z,{name:"chat_paste_go",size:"xsmall"})})]}),"directory"===s.type&&r&&u&&(0,p.jsx)("div",{children:u.map(e=>(0,p.jsx)(tg,{node:e,setCurrentFile:a,currentFile:n,level:l+1},e.path))})]})}function tv(e){let{setCurrentFile:t,code:s,currentFile:a}=e,n=(function(e){let t=[];return e.forEach(e=>{let[s]=e,a=s.split("/"),n=t;a.forEach((e,t)=>{let s=t===a.length-1,l=n.find(t=>t.name===e),r=a.slice(0,t+1).join("/");if(l)s||(n=l.children);else{let t={name:e,path:r,type:s?"file":"directory",...s?{}:{children:[]}};n.push(t),s||(n=t.children)}})}),t})(s).sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,p.jsx)("div",{className:"overflow-x-auto p-2",children:n.map(e=>(0,p.jsx)(tg,{node:e,setCurrentFile:t,currentFile:a,level:0},e.path))})}var tb=s(40875),tj=s(10407);let ty=["package-lock.json","yarn.lock","pnpm-lock.yaml",".map",".min.js",".min.css","tailwind.config.lov.json","bun.lockb"];function tw(e){let{code:t,onSelectResult:s}=e,a=(0,tc.A7)(e=>e.searchQuery),n=(0,tc.A7)(e=>e.setSearchQuery),l=(0,tc.A7)(e=>e.expandedSearchFiles),r=(0,tc.A7)(e=>e.setExpandedSearchFiles),i=function(e,t){let[s,a]=(0,g.useState)(e);return(0,g.useEffect)(()=>{let t=setTimeout(()=>{a(e)},300);return()=>{clearTimeout(t)}},[e,300]),s}(a,0),o=(0,g.useMemo)(()=>{if(!i||i.length<2)return[];let e=[],s=i.toLowerCase(),a=0;for(let[n,l]of t){if("string"!=typeof l||ty.some(e=>n.includes(e))||l.length>1048576)continue;if(a>=500)break;let t=l.split("\n"),r=[];for(let e=0;e<t.length;e++){let n=t[e],l=n.toLowerCase(),o=0;for(;o<l.length&&r.length<50;){let t=l.indexOf(s,o);if(-1===t)break;let c=Math.max(0,t-40),d=Math.min(n.length,t+i.length+40),u=n.substring(c,d),m=u.trim(),p=u.indexOf(m);r.push({line:e+1,column:t+1,lineContent:m,matchStart:t-c-p,matchEnd:t-c+i.length-p}),a++,o=t+i.length}}r.length>0&&e.push({path:n,matches:r})}return e},[t,i]);(0,g.useEffect)(()=>{o.length>0&&o.length<=5&&r(new Set(o.map(e=>e.path)))},[o,r]);let c=(0,g.useCallback)(e=>{let t=new Set(l);t.has(e)?t.delete(e):t.add(e),r(t)},[l,r]),d=o.reduce((e,t)=>e+t.matches.length,0);return(0,p.jsxs)("div",{className:"flex h-full flex-col",children:[(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)(eJ.I,{placeholder:"Search in files...",value:a,onChange:e=>n(e.target.value),className:"h-9",autoFocus:!0}),a&&i&&(0,p.jsxs)("div",{className:"mt-2 px-2 text-xs text-muted-foreground",children:[d," result",1!==d?"s":""," in"," ",o.length," file",1!==o.length?"s":"",d>=500&&" (limited)"]})]}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[a!==i&&a.length>=2&&(0,p.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}),0===o.length&&i.length>=2&&a===i&&(0,p.jsxs)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',i,'"']}),o.map(e=>{let t=l.has(e.path);return(0,p.jsxs)("div",{className:"border-b",children:[(0,p.jsxs)("button",{className:"flex w-full items-center gap-1 px-3 py-2 text-left hover:bg-accent",onClick:()=>c(e.path),children:[t?(0,p.jsx)(tb.Z,{className:"h-3 w-3"}):(0,p.jsx)(tj.Z,{className:"h-3 w-3"}),(0,p.jsx)("span",{className:"flex-1 truncate text-sm font-medium",children:e.path}),(0,p.jsx)("span",{className:"text-xs text-muted-foreground",children:e.matches.length})]}),t&&(0,p.jsx)("div",{className:"pb-1",children:e.matches.map((t,a)=>(0,p.jsxs)("button",{className:"flex w-full items-start gap-2 px-6 py-1 text-left hover:bg-accent",onClick:()=>s(e.path,t.line),children:[(0,p.jsx)("span",{className:"min-w-[3ch] text-right text-xs text-muted-foreground",children:t.line}),(0,p.jsx)("span",{className:"flex-1 truncate font-mono text-xs",children:(0,p.jsx)(tN,{text:t.lineContent,start:t.matchStart,end:t.matchEnd})})]},"".concat(t.line,"-").concat(t.column,"-").concat(a)))})]},e.path)})]})]})}function tN(e){let{text:t,start:s,end:a}=e,n=t.substring(0,s),l=t.substring(s,a),r=t.substring(a);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:n}),(0,p.jsx)("span",{className:"bg-yellow-300 dark:bg-yellow-700",children:l}),(0,p.jsx)("span",{children:r})]})}var tE=s(32429),tk=s(82176),tC=s(10531);function t_(){var e;let t=!!(null===(e=(0,tE.G)().features)||void 0===e?void 0:e.code_editor),s=(0,tk.dl)(tC.P.CodeEditorWrite);return t||s}var tS=s(74494);let tT=e=>{let{editorViewRef:t,targetFileAndLineRange:s,currentFile:a}=e,n=(0,g.useRef)(null),l=(0,g.useCallback)(()=>{if(!t.current||!n.current)return;let e=t.current,s=n.current;e.state.doc.lines>0&&s.startLine<=e.state.doc.lines&&((0,tS.Px)(e,s.startLine,s.endLine),n.current=null)},[t]);return(0,g.useEffect)(()=>{if(!s||s.filePath!==a){n.current=null;return}n.current=s,t.current&&l()},[s,a,l,t]),{performHighlight:l}},tR=()=>{let e=t_(),t=(0,eZ.hO)(e=>e.projectWorkspace),s=(null==t?void 0:t.plan)!=="free"&&(null==t?void 0:t.plan)!=="inactive";return e||s};function tI(e){let{}=e,[t,s]=(0,g.useState)(!1),{setActiveView:a}=(0,z.pE)(),n=(0,V.D)(),{syncCode:l,hasUnsavedChanges:r,enableServer:i}=(0,tm.v)(),o=(0,tc.A7)(e=>e.clearPendingChanges),{snapshot:c}=(0,tc.ag)(),{openSettings:d}=(0,eD.r)(),u=tR(),m=(0,g.useCallback)(async()=>{s(!0);try{let e=c.getPendingChanges();_.ZP.capture(R.SL.CODE_EDITOR.SAVED,{projectId:n,editedFiles:e}),await l(e,{commitMessage:"Code edited in Lovable Code Editor"}),o(),v.Am.success("Changes saved"),a("preview")}finally{s(!1)}i()},[o,i,n,a,c,l]),h=(0,g.useCallback)(()=>{_.ZP.capture(R.SL.CODE_EDITOR.DISCARDED,{projectId:n}),o()},[o,n]);return u?(0,p.jsx)(eF.M,{children:r&&(0,p.jsxs)(eU.E.div,{initial:{y:"150%"},animate:{y:0},exit:{y:"150%"},transition:{type:"spring",duration:.15,bounce:.25},className:"flex w-full items-center justify-end gap-2",children:[(0,p.jsx)("div",{className:"text-sm text-foreground",children:"You have unsaved changes"}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(G.z,{variant:"secondary",size:"sm",onClick:h,disabled:t,children:"Discard"}),(0,p.jsx)(G.z,{variant:"affirmative",size:"sm",onClick:m,loading:t,disabled:t,children:"Save"})]})]})}):(0,p.jsxs)("div",{className:"flex items-center gap-1 text-center text-sm text-muted-foreground",children:[(0,p.jsx)("span",{children:"Read Only. To use the code editor, "}),(0,p.jsx)("span",{className:"cursor-pointer font-medium text-affirmative-primary hover:text-affirmative-primary/80",onClick:()=>d("billing"),children:"upgrade to a paid plan."})]})}let tP={history:ta.cE},tA=["tailwind.config.lov.json","package-lock.json","bun.lockb","vite-env.d.ts"],tz=(e,t)=>e.filter(e=>{let[s]=e;return!tA.some(e=>s.includes(e))&&(!t||s.toLowerCase().includes(t.toLowerCase()))}),tD=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=(0,A.aK)(e=>Object.keys(e.edits||{}).length),{data:a,isFetching:n,refetch:l}=(0,tn.a)(tu.W.sourceCode({projectId:e,enabled:t}));return(0,g.useEffect)(()=>{s>0&&!n&&l().catch(t=>{T.logging.error("Error refetching source code",{error:t,projectId:e})})},[s,l]),(0,g.useMemo)(()=>{var e;return null==a?void 0:null===(e=a.files)||void 0===e?void 0:e.filter(e=>{let{binary:t}=e;return!t}).map(e=>{let{name:t,contents:s}=e;return[t,s]})},[a])};function tO(e){let{projectId:t}=e,{code:s,hasInitialCode:a,addPendingChange:n}=(0,tm.v)(),{currentFile:l,setCurrentFile:r,states:i,setStates:o,openTabs:c,setOpenTabs:d,targetFileAndLineRange:u}=(0,tf.r)(),m=(0,tc.A7)(e=>e.pendingChanges),h=(0,g.useRef)(null),x=tD(t,!a),f=(0,g.useMemo)(()=>a?s:x,[x,a,s]),v=null==f?void 0:f.length;(0,g.useEffect)(()=>{if(!u||!(null==f?void 0:f.length))return;let e=f.find(e=>{let[t]=e;return t===u.filePath});e&&r(e[0])},[u,f,r]),(0,g.useEffect)(()=>{if(l||!v||u)return;let e=null==f?void 0:f.find(e=>{let[t,s]=e;return t.endsWith("pages/Index.tsx")});e&&r(e[0])},[v,l,u,f,r]);let{performHighlight:b}=tT({editorViewRef:h,targetFileAndLineRange:u,currentFile:l}),j=tR(),y=(0,g.useMemo)(()=>{var e;if(l)return l in m?m[l]:null==f?void 0:null===(e=f.find(e=>{let[t,s]=e;return t===l}))||void 0===e?void 0:e[1]},[f,l,m]),[w,N]=(0,g.useState)(""),E=(0,tc.A7)(e=>e.sidebarTab),k=(0,tc.A7)(e=>e.setSidebarTab),[C,_]=(0,g.useState)(null),[S,T]=(0,g.useState)(null),R=(0,g.useMemo)(()=>tz(null!=f?f:[],w),[f,w]),{startLiveMode:I}=(0,ew.My)();(0,g.useEffect)(()=>{l&&!c.includes(l)&&d([...c,l])},[l,c,d]);let P=(0,g.useCallback)((e,t)=>{e&&(n(e,t),I())},[n,I]),A=(0,g.useCallback)((e,t)=>{r(e),_(t)},[r]);(0,g.useEffect)(()=>{if(S&&null!==C&&l){let e=()=>{let e=S.state.doc;if(e.length>0){let t=e.line(Math.min(C,e.lines));return S.dispatch({scrollIntoView:!0,selection:{anchor:t.from}}),_(null),!0}return!1};if(e())return;let t=0,s=setInterval(()=>{t++,(e()||t>=10)&&clearInterval(s)},100);return()=>clearInterval(s)}},[S,C,l]),(0,g.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&e.shiftKey&&"f"===e.key&&(e.preventDefault(),k("search"))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let{resolvedTheme:z}=(0,to.F)(),D="dark"===z?tp.Lm:tp.C0,O=(0,eb.qT)();return(0,p.jsxs)("div",{className:"relative flex h-full w-full",children:[(0,p.jsxs)("div",{className:"flex h-full w-64 flex-shrink-0 flex-grow-0 flex-col border-r border-border",children:[(0,p.jsxs)(td.mQ,{value:E,onValueChange:e=>{("files"===e||"search"===e)&&k(e)},className:"flex h-full flex-col",children:[(0,p.jsxs)(td.dr,{className:"m-2 grid w-[calc(100%-1rem)] grid-cols-2",children:[(0,p.jsxs)(td.SP,{value:"files",className:"gap-1",children:[(0,p.jsx)(tr.Z,{className:"h-3 w-3"}),"Files"]}),(0,p.jsxs)(td.SP,{value:"search",className:"gap-1",children:[(0,p.jsx)(ti.Z,{className:"h-3 w-3"}),"Search"]})]}),(0,p.jsxs)(td.nU,{value:"files",className:"mt-0 flex-1 overflow-y-auto pb-12",children:[(0,p.jsx)("div",{className:"p-2",children:(0,p.jsx)(eJ.I,{placeholder:"Search files",value:w,onChange:e=>N(e.target.value)})}),v?(0,p.jsx)(tv,{setCurrentFile:r,currentFile:l,code:R}):(0,p.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Starting Live Preview..."})})]}),(0,p.jsx)(td.nU,{value:"search",className:"mt-0 flex-1 overflow-y-auto",children:(0,p.jsx)(tw,{code:null!=f?f:[],onSelectResult:A})})]}),O&&(0,p.jsxs)("div",{className:"flex min-h-12 flex-shrink-0 items-center gap-2 p-2",children:[(0,p.jsx)(ej,{}),(0,p.jsx)("span",{className:"text-sm text-muted-foreground",children:"Download codebase"})]})]}),(0,p.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden bg-muted p-0",children:[(0,p.jsx)(td.mQ,{value:l||"",onValueChange:r,className:(0,ed.cn)({hidden:!l}),children:(0,p.jsx)(td.dr,{className:"h-auto w-full justify-start overflow-x-auto rounded-none bg-background p-0 scrollbar-hide",children:c.map(e=>(0,p.jsxs)(td.SP,{value:e,className:"group relative rounded-none border-r px-2 pl-3 data-[state=active]:!bg-muted-active data-[state=active]:text-foreground hover:bg-muted/50","data-state":l===e?"active":"inactive",children:[(0,p.jsx)("span",{children:e}),(0,p.jsx)("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),d(c.filter(t=>t!==e)),l===e&&r(c.find(t=>t!==e)||null)},className:"ml-2 opacity-0 transition-opacity group-hover:opacity-100 group-data-[state=active]:opacity-100",children:(0,p.jsx)(eo.Z,{name:"close",className:"size-4"})})]},e))})}),(0,p.jsx)("div",{className:(0,ed.cn)("flex w-full flex-1 overflow-y-auto bg-muted",tx().editor),children:l&&(0,p.jsx)(tl.ZP,{readOnly:!j,initialState:i[l]?{json:i[l],fields:tP}:void 0,onChange:(e,t)=>{if(l){let e=t.state.toJSON(tP);o(t=>({...t,[l]:e}))}P(l,e)},onCreateEditor:e=>{T(e),h.current=e;let t=()=>{e.state.doc.lines>0?b():requestAnimationFrame(t)};t()},value:y,className:"flex-1 overflow-y-auto",theme:D,extensions:[...tp.A4,tl.tk.editable.of(!!j)]},l)})]})]})}let tL=()=>"dev-mode"===(0,z.Sl)(e=>e.activeView)?(0,p.jsx)(tI,{}):(0,p.jsx)(ts,{}),tM=()=>{let e=(0,ew.My)().refreshPreview,t=()=>e();return(0,p.jsx)(ey.Z,{label:"Refresh page",children:(0,p.jsx)(G.z,{variant:"secondary",size:"icon-sm",onClick:()=>t(),children:(0,p.jsx)(eo.Z,{name:"refresh",size:"small"})})})};var tZ=s(63611),tF=s(50273),tU=()=>{let e=(0,z.Sl)(e=>e.activeView),{setConsoleContentType:t,setActiveView:s}=(0,z.pE)(),{hasUnsavedChanges:a}=(0,tm.v)(),n=(0,tF.UC)(e=>e.isVisualEditingActive),l=(0,eb.F9)(),r=(0,eb.ty)(),i=a&&"seo"===e||n,o="seo"===e;return r?(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{className:i?"cursor-default":"cursor-pointer",children:l?(0,p.jsx)(G.z,{type:"button",variant:"outline",size:"icon-sm",onClick:()=>{s(o?"preview":"seo"),t(null),o||_.ZP.capture(R.Md.OPEN_TOP_MENU)},"aria-label":"Page Speed Insights",disabled:i,className:(0,ed.cn)("hidden bg-background shadow-none md:flex",{"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/90":o}),children:(0,p.jsx)(eo.Z,{name:"trending_up",className:"h-4 w-4"})}):(0,p.jsx)("div",{className:"pointer-events-none hidden h-full items-center justify-center md:flex",children:(0,p.jsx)(tZ.Z,{disabled:i,"aria-label":"Page Speed Insights",pressed:o,onPressedChange:e=>{s(e?"seo":"preview"),t(null),e&&_.ZP.capture(R.Md.OPEN_TOP_MENU)},className:(0,ed.cn)("pointer-events-auto h-7 rounded-lg bg-muted p-[2px] transition-colors duration-150 ease-in-out",o?"bg-affirmative-primary data-[state=on]:bg-affirmative-primary hover:bg-affirmative-primary/80":"hover:bg-muted-hover"),size:"sm",children:(0,p.jsx)("div",{className:"relative h-full w-10",children:(0,p.jsx)(eU.E.div,{className:"absolute flex aspect-square h-full items-center justify-center rounded-md bg-background text-foreground shadow-sm",animate:{right:o?0:"unset",left:"preview"===e?0:"unset"},transition:{duration:.15,bounce:0,type:"spring"},children:(0,p.jsx)(eo.Z,{name:"trending_up"})})})})})}),(0,p.jsx)(ec._v,{children:"Page Speed Insights"})]}):null},tK=()=>{let e=(0,z.Sl)(e=>e.activeView),{setConsoleContentType:t,setActiveView:s}=(0,z.pE)(),{hasUnsavedChanges:a}=(0,tm.v)(),n=t_()?"Code mode":"Code viewer",l=(0,tF.UC)(e=>e.isVisualEditingActive),r=(0,eb.F9)(),i="dev-mode"===e,o=a&&i||l&&!i;return(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{className:o?"cursor-default":"cursor-pointer",children:r?(0,p.jsx)(G.z,{type:"button",variant:"outline",size:"icon-sm",onClick:()=>{s(i?"preview":"dev-mode"),t(null),_.ZP.capture(R.SL.CODE_EDITOR.DEV_MODE_TOGGLE_PRESSED,{devModeIsActive:i,new_tab:i?"code":"preview"})},"aria-label":n,disabled:o,className:(0,ed.cn)("hidden bg-background shadow-none md:flex",{"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/90":i}),children:(0,p.jsx)(eo.Z,{name:"code",className:"h-4 w-4"})}):(0,p.jsx)("div",{className:"pointer-events-none hidden h-full items-center justify-center md:flex",children:(0,p.jsx)(tZ.Z,{disabled:o,"aria-label":n,pressed:i,onPressedChange:e=>{s(e?"dev-mode":"preview"),t(null),_.ZP.capture(R.SL.CODE_EDITOR.DEV_MODE_TOGGLE_PRESSED,{pressed:e,new_tab:e?"code":"preview"})},className:(0,ed.cn)("pointer-events-auto h-7 rounded-lg bg-muted p-[2px] transition-colors duration-150 ease-in-out",i?"bg-affirmative-primary data-[state=on]:bg-affirmative-primary hover:bg-affirmative-primary/80":"hover:bg-muted-hover"),size:"sm",children:(0,p.jsx)("div",{className:"relative h-full w-10",children:(0,p.jsx)(eU.E.div,{className:"absolute flex aspect-square h-full items-center justify-center rounded-md bg-background text-foreground shadow-sm",animate:{right:i?0:"unset",left:"preview"===e?0:"unset"},transition:{duration:.15,bounce:0,type:"spring"},children:(0,p.jsx)(eo.Z,{name:"code"})})})})})}),(0,p.jsx)(ec._v,{children:l&&!i?"Exit visual editor to use code mode":a&&i?"Please save or discard your changes":n})]})};let tV=()=>{let e=(0,eb.Cb)(),t=(0,eb.ty)();return(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[!!e&&(0,p.jsx)(tK,{}),t&&(0,p.jsx)(tU,{}),!e&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tM,{}),(0,p.jsx)(e9,{variant:"secondary",size:"icon-sm"})]})]})};var tW=s(62380),tB=s(38343),tG=s(6809);let tH=e=>{let{title:t,description:s,badge:a}=e;return(0,p.jsxs)("div",{className:"flex flex-col gap-1 p-4 pb-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,p.jsx)("h3",{className:"mt-0 leading-none",children:t}),a]}),s&&(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]})},tq=e=>{let{href:t}=e;return(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",asChild:!0,children:(0,p.jsx)("a",{href:t,target:"_blank",className:"text-muted-foreground",children:(0,p.jsx)(eo.Z,{name:"help",size:"small"})})})},tX=e=>[{name:"Manage Users",href:"https://supabase.com/dashboard/project/".concat(e,"/auth/users"),icon:"group"},{name:"SQL Editor",href:"https://supabase.com/dashboard/project/".concat(e,"/editor"),icon:"database"},{name:"Edge Functions",href:"https://supabase.com/dashboard/project/".concat(e,"/functions"),icon:"cloud"},{name:"Manage Secrets",href:"https://supabase.com/dashboard/project/".concat(e,"/settings/functions"),icon:"key"}];var tY=e=>{var t;let{disabled:s=!1}=e,[a,n]=(0,g.useState)(!1),{openSettings:l}=(0,eD.r)(),r=(0,tG.N)(),i=tX(null!==(t=null==r?void 0:r.id)&&void 0!==t?t:""),o=(0,B.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.enabled_integrations}),c=null==o?void 0:o.includes("supabase_exp");return c?(0,p.jsx)(t$,{disabled:s,onClick:()=>{l("supabase"),n(!1)}}):(0,p.jsxs)(ex.h_,{open:a,onOpenChange:n,children:[(0,p.jsx)(ex.$F,{disabled:s,children:(0,p.jsx)(t$,{disabled:s})}),(0,p.jsx)(ex.AW,{collisionPadding:8,className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0",children:r?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tH,{title:"Supabase",badge:(0,p.jsx)(tB.n,{status:r.status})}),(0,p.jsx)(ex.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:(0,p.jsx)(ex.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:"https://supabase.com/dashboard/project/".concat(r.id),target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(q.xR.Supabase,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:r.name}),(0,p.jsx)(eo.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(ex.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:i.map(e=>(0,p.jsx)(ex.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(eo.Z,{name:e.icon,className:"h-4 w-4"}),(0,p.jsx)("span",{children:e.name}),(0,p.jsx)(eo.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})},e.name))}),(0,p.jsx)(ex.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tq,{href:"https://docs.lovable.dev/integrations/supabase"}),(0,p.jsx)(G.z,{variant:"default",size:"sm",onClick:()=>{l("supabase"),n(!1)},children:"Configure"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tH,{title:c?"Backend":"Supabase",description:"Integrate user authentication, data storage, and backend capabilities."}),(0,p.jsx)(ex.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tq,{href:"https://docs.lovable.dev/integrations/supabase"}),(0,p.jsxs)(G.z,{onClick:()=>{l("supabase"),n(!1)},size:"sm",children:[(0,p.jsx)(q.xR.Supabase,{className:"h-4 w-4"}),"Connect Supabase"]})]})]})})]})};let t$=e=>{let{onClick:t,disabled:s=!1}=e;return(0,p.jsx)(ey.Z,{label:"Manage Supabase",children:(0,p.jsx)(G.z,{id:"supabase-dropdown",className:"",variant:"secondary",size:"icon-sm",onClick:t,disabled:s,children:(0,p.jsx)(tW.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"})})})};var tJ=s(32129),tQ=s(23590),t0=s(4310),t1=s(27058),t2=e=>{var t,s,a,n;let{disabled:l=!1}=e,r=(0,B.iZ)(e=>e.project),i=(null==r?void 0:r.name)?(0,t0.c_)(r.github_repo_name,null==r?void 0:null===(t=r.github_owner)||void 0===t?void 0:t.name):"#",o=(null==r?void 0:null===(s=r.github_owner)||void 0===s?void 0:s.name)+"/"+(null==r?void 0:r.github_repo_name),{openSettings:c}=(0,eD.r)(),d=(null==r?void 0:null===(a=r.github_owner)||void 0===a?void 0:a.name)&&r.github_owner.name!==t0.aR,[u,m]=(0,g.useState)(!1);return(0,p.jsxs)(ex.h_,{open:u,onOpenChange:m,children:[(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(ex.$F,{asChild:!0,disabled:l,children:(0,p.jsxs)(G.z,{variant:"secondary",size:"icon-sm",className:"gap-1.5",children:[(0,p.jsx)(q.xR.GitHub,{className:"size-4"}),(0,p.jsx)("span",{className:"hidden",children:(null==r?void 0:null===(n=r.github_owner)||void 0===n?void 0:n.name)&&!(r.github_owner.name!==t0.aR)?"Sync with GitHub":"Manage GitHub"})]})})}),(0,p.jsx)(ec._v,{children:"Sync your project to GitHub"})]}),(0,p.jsx)(ex.AW,{className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:r&&!d?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tH,{title:"GitHub",description:"Sync your project 2-way with GitHub to collaborate at source."}),(0,p.jsx)(ex.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tq,{href:"https://docs.lovable.dev/integrations/git-integration"}),(0,p.jsxs)(G.z,{variant:"default",size:"sm",onClick:()=>c("github"),children:[(0,p.jsx)(q.xR.GitHub,{className:"size-4"}),(0,p.jsx)("span",{children:"Connect GitHub"})]})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tH,{title:"GitHub",badge:(0,p.jsx)(t1.H,{status:"connected"})}),(0,p.jsx)(ex.VD,{}),(0,p.jsx)("div",{className:"px-2 py-0.5",children:(0,p.jsx)(ex.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:i,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(q.xR.GitHub,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:o}),(0,p.jsx)(eo.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(ex.VD,{}),(0,p.jsx)("div",{className:"px-2 py-0.5",children:(0,p.jsx)(ex.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:"https://github.dev/".concat(o,"?").concat((null==r?void 0:r.main_branch)?"tree/".concat(null==r?void 0:r.main_branch):""),target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(eo.Z,{name:"code",size:"small"}),(0,p.jsx)("span",{children:"Edit in VS Code"}),(0,p.jsx)(eo.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(ex.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tq,{href:"https://docs.lovable.dev/integrations/git-integration"}),(0,p.jsx)(G.z,{variant:"default",size:"sm",onClick:()=>{c("github"),m(!1)},children:"Configure"})]})]})})]})},t5=s(63391),t4=e=>{let{children:t}=e;return(0,p.jsx)("div",{className:"avatars group flex flex-row items-center -space-x-3 md:-space-x-2",children:t})},t3=s(70335),t6=s(17292),t8=s(59625);let t9=()=>(0,t8.Ue)(()=>({userPresences:{}})),t7=(0,g.createContext)(null),se=e=>{let{children:t,projectId:s}=e,{canRead:a}=(0,S.t)(),n=(0,g.useRef)();n.current||(n.current=t9());let{authUser:l,authState:r}=(0,b.Eu)(),{isSuccess:i}=(0,tn.a)(tu.W.presence({projectId:s,authUser:l,enablePresence:a}));(0,g.useEffect)(()=>{if(!s||!l||!i||!a)return;let e=n.current,t=(0,t6.iH)(eH.Fs,"status/".concat(s)),r=(0,t6.jM)(t,t=>{let s=t.val();if(s){let t={};Object.entries(s).filter(e=>{let[t,s]=e;return s.lastSeen&&s.id!==l.uid}).forEach(e=>{let[s,{lastSeen:a,username:n,displayName:l,photoURL:r,id:i,email:o}]=e,c=new Date(a);t[s]={lastSeen:c,id:i,username:n,displayName:l||"",photoURL:r,email:o}}),e.setState({userPresences:t})}else e.setState({userPresences:{}})},e=>{T.logging.error("Error listening to presence updates",{projectId:s,error:e})});return()=>{r()}},[s,l,r,i,a]);let o={store:n.current};return(0,p.jsx)(t7.Provider,{value:o,children:t})};var st=s(32800),ss=s(6512),sa=s(46170),sn=s(45659);let sl={ADD_EDITOR:"claim.add_editor",ADD_ADMIN:"claim.add_admin",REMOVE_EDITOR:"claim.remove_editor",REMOVE_ADMIN:"claim.remove_admin",MANAGE_MAGIC_LINK:"claim.manage_magic_link",INVITE:"claim.invite"};class sr{generateClaims(){let e=new Set;return this.isFreeWorkspace?(e.add(sl.ADD_EDITOR),e.add(sl.REMOVE_EDITOR),e.add(sl.MANAGE_MAGIC_LINK),e.add(sl.INVITE)):this.currentUserIsProjectOwner?(e.add(sl.ADD_EDITOR),e.add(sl.ADD_ADMIN),e.add(sl.REMOVE_EDITOR),e.add(sl.REMOVE_ADMIN),e.add(sl.MANAGE_MAGIC_LINK),e.add(sl.INVITE)):this.isProjectAdmin&&(e.add(sl.ADD_EDITOR),e.add(sl.REMOVE_EDITOR),e.add(sl.MANAGE_MAGIC_LINK),e.add(sl.INVITE)),e}hasClaim(e){return this.claims.has(e)}canInvite(){return this.hasClaim(sl.INVITE)}canManageMagicLink(){return this.hasClaim(sl.MANAGE_MAGIC_LINK)}canEditRole(){var e;return!this.isFreeWorkspace&&((null===(e=this.collaborator)||void 0===e?void 0:e.access_level)==="admin"?this.hasClaim(sl.ADD_ADMIN):this.hasClaim(sl.ADD_EDITOR))}canRemoveRole(){var e;return this.isCurrentUser?!this.isCollaboratorProjectOwner:(null===(e=this.collaborator)||void 0===e?void 0:e.access_level)==="admin"?this.hasClaim(sl.REMOVE_ADMIN):this.hasClaim(sl.REMOVE_EDITOR)}isOwner(){return this.isCollaboratorProjectOwner}canManageCollaborator(){return!this.isCollaboratorProjectOwner&&(this.canEditRole()||this.canRemoveRole())}constructor(e){var t,s;this.context=e;let{collaborator:a,currentUserId:n,projectOwnerId:l}=e;this.isCurrentUser=(null==a?void 0:a.id)===n,this.isCollaboratorProjectOwner=l===(null==a?void 0:a.id),this.currentUserIsProjectOwner=n===l,this.isFreeWorkspace=null!==(t=e.isFreeWorkspace)&&void 0!==t&&t,this.isProjectAdmin=null!==(s=e.isProjectAdmin)&&void 0!==s&&s,this.collaborator=a,this.claims=this.generateClaims()}}let si=e=>new sr(e),so=e=>(0,g.useMemo)(()=>si(e),[e.collaborator,e.currentUserId,e.projectOwnerId,e.isFreeWorkspace,e.isProjectAdmin]);var sc=s(82157),sd=s(20984);let su={owner:"Owner",admin:"Admin",write:"Editor",read:"Viewer"};var sm=e=>{let{collaborator:t,onRoleChange:s,onRemove:a,permissions:n}=e,l=!t.joined_at,r=n.canManageCollaborator(),i=n.isOwner()?"owner":t.access_level,o=l?"Pending":su[i],c=e=>{e!==t.access_level&&s(t.id,e)};return r?(0,p.jsxs)(ex.h_,{children:[(0,p.jsx)(ex.$F,{asChild:!0,children:(0,p.jsxs)(G.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",children:[o," ",(0,p.jsx)(eo.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,p.jsxs)(ex.AW,{align:"end",children:[l&&(0,p.jsx)(sc.w,{label:"Pending",isSelected:!0,disabled:!0}),n.canEditRole()&&!l&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(sc.w,{label:su.admin,onClick:()=>c(sd.u.ADMIN),isSelected:i===sd.u.ADMIN}),(0,p.jsx)(sc.w,{label:su.write,onClick:()=>c(sd.u.WRITE),isSelected:i===sd.u.WRITE})]}),n.canRemoveRole()&&(0,p.jsx)(sc.w,{label:"Remove",destructive:!0,onClick:()=>{a(t)}})]})]}):(0,p.jsx)(G.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",disabled:!0,children:o})},sp=e=>{let{collaborator:t,onRoleChange:s,onRemove:a,permissionsContext:n}=e,{authUser:l}=(0,b.Eu)(),r=t.id===(null==l?void 0:l.uid),i=so({...n,collaborator:t}),o=(0,p.jsx)(sm,{collaborator:t,onRoleChange:s,onRemove:a,permissions:i});return(0,p.jsx)(sn.Q,{id:t.id||"",username:t.username||"",displayName:t.display_name,email:t.email||"",isCurrentUser:r,avatarClassName:"h-6 w-6",actionComponent:o,isInvited:!t.joined_at,showBadge:!1})};let sh=function(){let{copiedText:e="Copied!",resetDelay:t=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,a]=(0,g.useState)(!1),[n,l]=(0,g.useState)();return{copy:(0,g.useCallback)(async(s,n)=>{if(s)try{await navigator.clipboard.writeText(s),a(!0),n?(l(n),l(e),setTimeout(()=>{l(n),a(!1)},t)):setTimeout(()=>{a(!1)},t)}catch(e){(0,w.Eo)(e)}},[e,t]),isCopied:s,buttonText:n}},sx=e=>{let{projectId:t}=e,{createSecretLink:s,isCreatingSecretLink:a}=function(){let e=(0,h.NL)(),{mutate:t,isPending:s}=(0,x.D)({mutationFn:async e=>{let{projectId:t}=e;return(0,N.SJ)().post("/projects/".concat(t,"/magic-codes"),{access_level:"write"})},onSuccess:async(t,s)=>{let a=tu.W.magicCode({projectId:s.projectId}).queryKey;t.id&&e.setQueryData(a,{id:t.id}),v.Am.success("Secret link created")},onError:e=>{(0,w.Eo)(e)},onSettled:(t,s,a)=>{e.invalidateQueries({queryKey:tu.W.magicCode({projectId:a.projectId}).queryKey})}});return{createSecretLink:t,isCreatingSecretLink:s}}(),{deactivateSecretLink:n,isDeactivatingSecretLink:l}=function(){let e=(0,h.NL)(),{mutate:t,isPending:s}=(0,x.D)({mutationFn:async e=>{let{projectId:t,magicCodeId:s}=e;return(0,N.SJ)().delete("/projects/".concat(t,"/magic-codes/").concat(s))},onSuccess:async(t,s)=>{let a=tu.W.magicCode({projectId:s.projectId}).queryKey,n=e.getQueryData(a);(null==n?void 0:n.id)===s.magicCodeId&&e.setQueryData(a,{id:null})},onError:e=>{(0,w.Eo)(e)},onSettled:(t,s,a)=>{e.invalidateQueries({queryKey:tu.W.magicCode({projectId:a.projectId}).queryKey})}});return{deactivateSecretLink:t,isDeactivatingSecretLink:s}}(),{copy:r,buttonText:i}=sh({copiedText:"Copied!",resetDelay:1500}),{data:o,isLoading:c}=(0,tn.a)(tu.W.magicCode({projectId:t})),d=(0,g.useMemo)(()=>(null==o?void 0:o.id)?"".concat(window.location.origin,"/projects/").concat(t,"?magic_link=").concat(o.id):null,[t,o]),u=async()=>{try{_.ZP.capture(R.SL.COLLABORATION.SECRET_LINK_CREATED),s({projectId:t})}catch(e){(0,w.Eo)(e)}},m=(0,g.useCallback)(()=>{d&&(_.ZP.capture(R.SL.COLLABORATION.SECRET_LINK_COPIED),r(d,"Copy"))},[r,d]);if(c)return(0,p.jsxs)("div",{className:"flex animate-pulse gap-5",children:[(0,p.jsx)("div",{className:"h-5 w-5 rounded bg-muted"}),(0,p.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,p.jsx)("div",{className:"h-4 w-2/3 rounded bg-muted"}),(0,p.jsx)("div",{className:"h-3 w-full rounded bg-muted"})]}),(0,p.jsx)("div",{className:"h-9 w-24 rounded bg-muted"})]});if(null==o?void 0:o.id){let e=async()=>{try{_.ZP.capture(R.SL.COLLABORATION.SECRET_LINK_REMOVED),n({projectId:t,magicCodeId:o.id})}catch(e){(0,w.Eo)(e)}};return(0,p.jsxs)("div",{className:"align-start flex gap-5",children:[(0,p.jsx)(eo.Z,{name:"link",size:"small"}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.jsx)("div",{className:"text-sm font-medium leading-none",children:"Share invite link"}),(0,p.jsx)("div",{className:"text-xs leading-none text-muted-foreground",children:"Anyone with this link can edit"})]}),(0,p.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,p.jsx)(G.z,{variant:"link",onClick:e,disabled:l,children:"Remove"}),(0,p.jsx)(G.z,{variant:"secondary",onClick:m,children:i||"Copy"})]})]})}return(0,p.jsxs)("div",{className:"flex gap-5",children:[(0,p.jsx)(eo.Z,{name:"link",size:"small"}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.jsx)("div",{className:"text-sm font-medium leading-none",children:"Create invite link"}),(0,p.jsx)("div",{className:"text-xs leading-none text-muted-foreground",children:"Anyone with this link can edit"})]}),(0,p.jsx)(G.z,{className:"ml-auto",variant:"outline",size:"sm",onClick:u,disabled:a,children:"Create"})]})};var sf=s(61011),sg=e=>{let{collaboratorName:t,onConfirm:s,onCancel:a}=e,n=async()=>{_.ZP.capture(R.SL.COLLABORATION.REMOVE_DIALOG_CONFIRMED),await s()};return(0,p.jsx)(sf.Z,{title:"Remove collaborator",targetName:t,descriptionTemplate:"Are you sure you want to remove ".concat(t," from this project? They will no longer have access to this project."),onConfirm:n,onCancel:()=>{_.ZP.capture(R.SL.COLLABORATION.REMOVE_DIALOG_CANCELLED),a()}})},sv=s(30438);let sb=e=>{let{workspace:t}=e,s=(0,sa.Ll)(null==t?void 0:t.plan);if(!(0,sv.c)())return null;let a={title:"",message:"",showContactUs:!1};switch(s){case"enterprise":return null;case"pro":a.title="Upgrade to Enterprise",a.message="For more than 20 collaborators",a.showContactUs=!0;break;default:a.title="Upgrade to Pro",a.message="Permission control & more"}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ss.Separator,{}),(0,p.jsxs)("div",{className:"mt-1 flex w-full flex-row items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:a.title}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:a.message})]}),a.showContactUs?(0,p.jsx)(G.z,{asChild:!0,className:"font-medium",variant:"muted",size:"sm",children:(0,p.jsx)(eT.default,{href:"https://enterpriseform.lovable.app/",target:"_blank",children:"Contact Us"})}):(0,p.jsx)(tJ.Z,{plan:null==t?void 0:t.plan,size:"sm",variant:"muted",className:"font-medium",children:"Upgrade"})]})]})};var sj=s(69084);let sy=e=>{let{onDialogClose:t}=e,s=(0,f.usePathname)(),{projectWorkspace:a,memberships:n}=(0,eZ.hO)(e=>({projectWorkspace:e.projectWorkspace,memberships:e.memberships})),l=(0,eZ.hO)(e=>!0===e.permissions.read);if(!a)return null;let r=n.length;return(0,p.jsxs)("div",{className:"flex flex-wrap items-center gap-3 py-1 md:flex-nowrap",children:[(0,p.jsx)(sj.z,{workspace:a,className:"h-6 w-6"}),(0,p.jsx)("div",{className:"flex flex-shrink items-center gap-2 md:w-full",children:(0,p.jsx)("div",{className:"max-w-[200px] flex-shrink truncate text-sm font-medium",children:a.name})}),(0,p.jsx)("div",{className:"ml-auto flex items-center gap-1",children:l?(0,p.jsxs)(ex.h_,{children:[(0,p.jsx)(ex.$F,{asChild:!0,children:(0,p.jsxs)(G.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",children:[1===r?"1 member":"".concat(r," members"),(0,p.jsx)(eo.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,p.jsx)(ex.AW,{align:"end",children:(0,p.jsx)(ex.Xi,{asChild:!0,children:(0,p.jsxs)(eT.default,{href:"".concat(s,"?settings=people"),onClick:t,className:"hover:bg-accent",children:[(0,p.jsx)(eo.Z,{name:"group",size:"small"}),"Manage Workspace Access"]})})})]}):(0,p.jsxs)(G.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",disabled:!0,children:["Workspace Access",(0,p.jsx)(eo.Z,{name:"lock",size:"small",className:"ml-1"})]})})]})},sw=e=>{var t,s,a,n;let{disabled:l=!1}=e,r=(0,W.z)(sg),[i,o]=(0,g.useState)(!1),{authUser:c}=(0,b.Eu)(),d=(0,eZ.hO)(e=>e.projectWorkspace),u=(0,B.iZ)(e=>e.project),m=(0,$.c)(e=>e.collaborators),f=(0,$.c)(e=>e.hasFetchedCollaborators),{isProjectAdmin:v,isProjectOwner:j}=(0,S.t)(),y=!!j,E=(0,sa.B9)(null==d?void 0:d.plan),k=d&&(null==d?void 0:d.plan)=="free"||null==d,T={collaborator:void 0,currentUserId:null==c?void 0:c.uid,projectOwnerId:null!==(t=null==u?void 0:u.user_id)&&void 0!==t?t:"",isFreeWorkspace:!!k,isProjectAdmin:v},I=so(T),P=(0,g.useMemo)(()=>({write:"Editor",admin:"Admin",owner:"Owner"}),[]),A=(0,g.useMemo)(()=>[{value:"admin",label:P.admin},{value:"write",label:P.write}],[P]),{inviteCollaborator:z,isInvitingCollaborator:D}=function(e){let{projectId:t}=e,s=(0,h.NL)(),{mutateAsync:a,isPending:n}=(0,x.D)({mutationFn:async e=>{let{email:s,inviteRole:a,projectOwnerId:n}=e;return(0,N.SJ)().post("/projects/".concat(t,"/collaborators"),{email:s,access_level:a})},onSuccess:(e,a)=>{let{projectOwnerId:n}=a,l=tu.W.collaborators({projectId:t,projectOwnerId:n}).queryKey,r=s.getQueryData(l)||[];r.some(t=>t.id===e.id)||s.setQueryData(l,(0,tu.b)({collaborators:[...r,e],projectOwnerId:n})),s.invalidateQueries({queryKey:C.iZ.collaborators(t)})},onError:e=>{(0,w.Eo)(e)}});return{inviteCollaborator:a,isInvitingCollaborator:n}}({projectId:null!==(s=null==u?void 0:u.id)&&void 0!==s?s:""}),{deleteCollaborator:O}=function(e){let{projectId:t}=e,s=(0,h.NL)(),{mutateAsync:a}=(0,x.D)({mutationFn:async e=>{let{collaboratorId:s}=e,a=(0,N.SJ)();await a.delete("/projects/".concat(t,"/collaborators/").concat(s))},onSuccess:(e,a)=>{let{projectOwnerId:n,collaboratorId:l}=a;ea(t,l);let r=s.getQueryData(tu.W.collaborators({projectId:t,projectOwnerId:n}).queryKey);r&&s.setQueryData(C.iZ.collaborators(t),r.filter(e=>e.id!==l))},onError:e=>{(0,w.Eo)(e)},onSettled:(e,s,a)=>{ea(t,a.collaboratorId)}});return{deleteCollaborator:a}}({projectId:null!==(a=null==u?void 0:u.id)&&void 0!==a?a:""}),{updateCollaboratorRole:L}=function(e){let{projectId:t}=e,s=(0,h.NL)(),{mutateAsync:a}=(0,x.D)({mutationFn:async e=>{let{collaboratorId:s,role:a,projectOwnerId:n}=e,l=(0,N.SJ)();await l.put("/projects/".concat(t,"/collaborators/").concat(s),{access_level:a})},onMutate:async e=>{await s.cancelQueries({queryKey:tu.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey});let a=s.getQueryData(tu.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey);return s.setQueryData(tu.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey,t=>{if(!t)return[];let s=t.map(t=>t.id===e.collaboratorId?{...t,access_level:e.role}:t);return(0,tu.b)({collaborators:s,projectOwnerId:e.projectOwnerId})}),{previousCollaborators:a,projectOwnerId:e.projectOwnerId}},onError:(e,a,n)=>{(0,w.Eo)(e),(null==n?void 0:n.previousCollaborators)&&s.setQueryData(tu.W.collaborators({projectId:t,projectOwnerId:n.projectOwnerId}).queryKey,n.previousCollaborators)},onSettled:(e,a,n)=>{ea(t,n.collaboratorId),s.invalidateQueries({queryKey:tu.W.collaborators({projectId:t,projectOwnerId:n.projectOwnerId}).queryKey})}});return{updateCollaboratorRole:a}}({projectId:null!==(n=null==u?void 0:u.id)&&void 0!==n?n:""}),M=async e=>{let{emails:t,role:s}=e;if(!u)return{success:!1};let a=v&&!y?"write":s,n=0;for(let e of t)await z({email:e,inviteRole:a,projectOwnerId:u.user_id}),n++;return n>0&&_.ZP.capture(R.SL.COLLABORATION.COLLABORATOR_INVITED,{role:a,emailCount:n}),{success:n>0}},Z=async(e,t)=>{(null==u?void 0:u.id)&&(null==u?void 0:u.user_id)&&(_.ZP.capture(R.SL.COLLABORATION.COLLABORATOR_ROLE_CHANGED),await L({collaboratorId:e,role:t,projectOwnerId:u.user_id}))},F=e=>{u&&(_.ZP.capture(R.SL.COLLABORATION.COLLABORATOR_REMOVE_INITIATED),r({childProps:{collaboratorName:e.display_name,onConfirm:async()=>{await O({collaboratorId:e.id,projectOwnerId:u.user_id}),r(!1)},onCancel:()=>r(!1)}}))},U="Collaborators will use credits from the project owner's workspace (".concat(null==d?void 0:d.name,")"),K=(0,p.jsxs)(p.Fragment,{children:["Collaborators will use credits from the project owner's workspace (",null==d?void 0:d.name,"). If you need more than 20 collaborators,"," ",(0,p.jsx)(eT.default,{className:"underline",target:"_blank",href:"https://enterpriseform.lovable.app/",children:"contact us"}),"."]}),V=I.canInvite(),H=I.canManageMagicLink(),q=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,p.jsx)("p",{className:"text-lg font-medium",children:"Invite"}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:k?U:K})]}),V?(0,p.jsx)(st.s,{onInvite:e=>{let{emails:t,role:s}=e;return M({emails:t,role:s})},isInviting:D,roleOptions:A,defaultRole:"write",canSelectRoles:!k,placeholder:"Invite by email"}):(0,p.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,p.jsx)(eJ.I,{disabled:!0,className:"h-8",placeholder:"Invite by email"}),(0,p.jsx)(G.z,{variant:"secondary",disabled:!0,children:"Invite"})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[E&&(0,p.jsx)(sy,{onDialogClose:()=>o(!1)}),f?m.map(e=>(0,p.jsx)(sp,{collaborator:e,onRoleChange:Z,onRemove:F,permissionsContext:T},e.id)):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(sN,{}),(0,p.jsx)(sN,{})]})]}),(null==u?void 0:u.id)&&H&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ss.Separator,{}),(0,p.jsx)(sx,{projectId:u.id})]}),(0,p.jsx)(sb,{workspace:null!=d?d:void 0})]}),X=(0,eb.F9)();return(0,p.jsxs)(ex.h_,{open:i,onOpenChange:e=>{e&&_.ZP.capture(R.SL.COLLABORATION.DROPDOWN_OPENED),o(e)},children:[(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(ex.$F,{asChild:!0,disabled:l,children:X?(0,p.jsxs)(G.z,{variant:"secondary",size:"sm",className:(0,ed.cn)("relative flex h-[34px] w-[34px] shrink-0 rounded-full border bg-secondary p-0 shadow-none group-[.avatars]:border-background @2xl:w-auto @2xl:px-2.5 disabled:opacity-100 md:h-[30px] md:w-[30px] md:@2xl:w-auto"),children:[(0,p.jsx)(eo.Z,{name:"add",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Invite"})]}):(0,p.jsxs)(G.z,{variant:"secondary",size:"sm",className:"flex-shrink-0 gap-1.5",children:[(0,p.jsx)(eo.Z,{name:"group_add",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Invite"})]})})}),(0,p.jsx)(ec._v,{children:"Invite collaborators"})]}),(0,p.jsx)(ex.AW,{className:"z-[1001] flex w-full max-w-[325px] flex-col gap-4 border border-border p-4 shadow-md md:max-w-[400px]",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:q})]})},sN=()=>(0,p.jsx)("div",{className:"flex flex-col gap-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-3.5",children:[(0,p.jsx)("div",{className:"h-6 w-6 shrink-0 rounded-full bg-muted"}),(0,p.jsx)("div",{className:"h-4 w-20 rounded-sm bg-muted"}),(0,p.jsx)("div",{className:"h-4 w-32 rounded-sm bg-muted"})]})}),sE=e=>e>new Date(Date.now()-3e5),sk=e=>{var t,s,a;let{hasUnsavedChanges:n}=e,{userPresences:l}=function(e){let{store:t}=function(){let e=(0,g.useContext)(t7);if(!e)throw Error("usePresenceContext must be used within a PresenceProvider");return e}();return t(e)}(e=>e),{userData:r}=(0,M.SE)(),{authUser:i}=(0,b.Eu)(),o=(0,y.Z)("md"),c=(0,g.useMemo)(()=>Object.values(l).filter(e=>e.lastSeen>new Date(Date.now()-864e5)).sort((e,t)=>e.lastSeen.getTime()-t.lastSeen.getTime()).slice(0,o?3:5),[l,o]),d=null!==(a=null!==(s=null==r?void 0:null===(t=r.attributes)||void 0===t?void 0:t.display_name)&&void 0!==s?s:null==i?void 0:i.email)&&void 0!==a?a:null==r?void 0:r.id,u=(0,eb.F9)();return(0,p.jsxs)(t4,{children:[u&&r&&(0,p.jsx)(eT.default,{href:"/@".concat(r.id),target:"_blank",children:(0,p.jsx)(t3.Y,{user:r,isInteractive:!0,className:(0,ed.cn)("h-[34px] w-[34px] md:h-[26px] md:w-[26px]"),tooltipContent:(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("p",{className:"text-xs font-medium",children:[d," ",(0,p.jsx)("span",{className:"font-normal",children:"(You)"})]})})})},r.id),c.length>0&&(0,p.jsx)(p.Fragment,{children:c.map(e=>{var t;return(0,p.jsx)(eT.default,{href:"/@".concat(e.username||e.id),target:"_blank",children:(0,p.jsx)(t3.Y,{user:{id:e.id,username:null!==(t=e.username)&&void 0!==t?t:e.email},className:(0,ed.cn)("h-[34px] w-[34px] md:h-[26px] md:w-[26px]"),photoURL:e.photoURL,isInteractive:!0,tooltipContent:(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("p",{className:"text-xs font-medium",children:e.displayName||e.email||e.username}),(0,p.jsx)("p",{className:"text-xs text-muted",children:sE(e.lastSeen)?"Now":(0,t5.Q)(e.lastSeen,{addSuffix:!0})})]})})},e.id)})}),(0,p.jsx)(sw,{disabled:n})]})};var sC=s(5978),s_=s(61062),sS=s(91576);let sT=e=>{let t=(0,V.D)(),[s,a]=(0,g.useState)(!1),{onClick:n,isPending:l}=(0,sS.hw)({projectId:t,errors:[{id:(0,O.Fd)(),type:s_.N.BUILD,error_message:"Production build error: ".concat(e||""),occurred_at:new Date().toISOString(),created_at:sC.EK.now()}]}),r=(0,D.bk)(e=>e.isSendChatMessageMutationPending);return{handleFix:(0,g.useCallback)(async()=>{if(!s)try{a(!0),await n(),v.Am.success("Fix attempt initiated successfully")}catch(e){console.error("Failed to initiate fix:",e),v.Am.error("Failed to initiate fix. Please try again.")}finally{a(!1)}},[n,s]),isFixing:l||r||s}},sR=e=>{let{open:t,onOpenChange:s,errorMessage:a,isBuildError:n=!1}=e,{handleFix:l,isFixing:r}=sT(a||""),i=(0,g.useCallback)(async()=>{await l(),s(!1)},[l,s]);return(0,p.jsx)(H.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(H.cZ,{className:"text-center",children:[(0,p.jsxs)(H.fK,{className:"flex flex-col gap-2 space-y-0",children:[(0,p.jsx)(H.$N,{className:"text-2xl",children:"Oops! \uD83D\uDE22"}),(0,p.jsx)("p",{className:"",children:n?"We couldn't publish your site due to build errors.":"Something went wrong and we couldn't publish your site."}),a&&(0,p.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,p.jsx)("p",{className:"",children:n?"The build failed with the following errors:":"The error message:"}),(0,p.jsx)("p",{className:"font-medium text-destructive-primary",children:a})]})]}),(0,p.jsxs)(H.cN,{className:"",children:[(0,p.jsx)(G.z,{variant:"outline",onClick:()=>s(!1),children:"Close"}),n&&(0,p.jsxs)(G.z,{onClick:i,variant:"default",size:"default",disabled:r,className:"flex items-center gap-2",children:[(0,p.jsx)(eo.Z,{name:"build",size:"small"}),r?"Fixing...":"Try to fix"]})]})]})})};function sI(e){let{projectUrl:t="",projectTitle:s="Embedded Project",projectId:a}=e,[n,l]=(0,g.useState)(t),[r,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{t&&(l(t),i(!0))},[t]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{children:"Embed Project"}),(0,p.jsx)(H.Be,{children:"Copy and paste the HTML code below to embed your project iframe."})]}),(0,p.jsx)("div",{className:"space-y-4",children:r&&n&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"space-y-2",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-muted p-4 text-sm",children:(0,p.jsx)("code",{children:'<iframe\n  style="width: 100%;"\n  height="569"\n  src="'.concat(n,'"\n  title="').concat(s,'"\n  frameBorder="0">\n</iframe>')})}),(0,p.jsx)(G.z,{onClick:()=>{let e='<iframe\n  style="width: 100%;"\n  height="569"\n  src="'.concat(n,'"\n  title="').concat(s,'"\n  frameBorder="0">\n</iframe>');navigator.clipboard.writeText(e),c(!0),_.LJ.capture(R.SL.EMBED.CODE_COPIED,{projectId:a,embedType:"iframe"}),setTimeout(()=>{c(!1)},2e3)},size:"sm",className:"absolute right-2 top-2",variant:"outline",children:o?"Copied!":"Copy"})]})})})})]})}let sP=e=>{var t;let{project:s,variant:a="dropdown",onActionComplete:n}=e,{setConsoleContentType:l,setActiveView:r}=(0,z.pE)(),{hasUnsavedChanges:i}=(0,tm.v)(),o=(0,tF.UC)(e=>e.isVisualEditingActive),c=(0,eb.ty)(),d=(null==s?void 0:s.latest_commit_sha)===(null==s?void 0:null===(t=s.published_deployment)||void 0===t?void 0:t.commit_sha),u=!!(null==s?void 0:s.url),m=!u||i||o||!d,h=()=>{if(m)return;null==n||n();let e="dialog"===a?R.Md.OPEN_PUBLISH:R.Md.OPEN_TOP_MENU;_.ZP.capture(e,{hasProjectUrl:u,isLastEditPublished:d,hasUnsavedChanges:i,isVisualEditingActive:o,context:a}),r("seo"),l(null)};return c?"dropdown"===a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ex.VD,{}),(0,p.jsx)("div",{className:"px-4 py-2",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("span",{className:"text-sm text-foreground",children:"Page Speed Analysis"}),m&&(0,p.jsx)("span",{className:"text-xs text-muted-foreground",children:u?d?i?"Update first to run analysis on latest version":o?"Exit visual editor first":null:"Publish latest version first to run analysis":"Publish first to run analysis"})]}),(0,p.jsxs)(G.z,{variant:"secondary",size:"sm",disabled:m,onClick:h,children:[(0,p.jsx)(eo.Z,{name:"trending_up",size:"small"}),"Review"]})]})})]}):(0,p.jsxs)("div",{className:"flex items-center gap-3",children:[(0,p.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:(0,p.jsx)(eo.Z,{name:"trending_up",size:"small",className:"text-muted-foreground"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-sm font-medium",children:"Optimize for Search Engines"}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:'"Check your SEO performance and get tips to improve visibility"'})]}),(0,p.jsx)(G.z,{variant:"outline",size:"sm",onClick:h,disabled:m,className:"text-xs",children:"Review SEO"})]}):null},sA=e=>{let{projectUrl:t,projectTitle:s,projectId:a}=e;return(0,p.jsx)(H.cZ,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,p.jsx)(sI,{projectUrl:t,projectTitle:s,projectId:a})})},sz=e=>{let{open:t,onOpenChange:s,project:a}=e,[n,l]=(0,g.useState)(!1),r=(0,eb.ty)(),i=(0,eb.X4)(),o=(0,W.z)(sA),c=null==a?void 0:a.url,d=async()=>{if(!n&&c)try{await navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){v.Am.error("Failed to copy link")}},u=e=>{if(!c)return;let t="Check out what I just built with Lovable!",s=encodeURIComponent(c),a=encodeURIComponent(t),n={twitter:"https://twitter.com/intent/tweet?text=".concat(a,"&url=").concat(s),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(s),reddit:"https://reddit.com/submit?url=".concat(s,"&title=").concat(a),discord:"https://discord.com/channels/@me"};if("discord"===e){navigator.clipboard.writeText("".concat(t," ").concat(c)),v.Am.success("Copied to clipboard! Paste it in your Discord channel.");return}let l=n[e];l&&window.open(l,"_blank","noopener,noreferrer")};return(0,p.jsx)(H.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(H.cZ,{className:"max-w-sm",children:[(0,p.jsx)(H.fK,{children:(0,p.jsx)(H.$N,{className:"sr-only",children:"Project Published Successfully"})}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsx)("div",{className:"flex justify-start",children:(0,p.jsx)(q.xx,{className:"h-12"})}),(0,p.jsxs)("div",{className:"space-y-2",children:[(0,p.jsx)("h2",{className:"text-2xl font-medium",children:"You just shipped!"}),(0,p.jsx)("p",{className:"text-muted-foreground",children:"Let's share your work with the world"})]}),(0,p.jsx)("div",{className:"rounded-lg bg-muted px-3 py-1",children:(0,p.jsxs)("div",{className:"flex items-center gap-3",children:[(0,p.jsx)(eo.Z,{name:"link",size:"small",className:"text-muted-foreground"}),(0,p.jsx)(eJ.I,{value:c||"",readOnly:!0,className:"flex-1 border-none bg-transparent p-0 shadow-none focus-visible:ring-0",onFocus:e=>e.target.select()}),(0,p.jsx)(G.z,{variant:"outline",size:"sm",onClick:d,children:n?"Copied!":"Copy Link"})]})}),(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Share with your loved ones:"}),(0,p.jsxs)("div",{className:"justify-left flex gap-4",children:[(0,p.jsx)("button",{onClick:()=>u("twitter"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on X (Twitter)",children:(0,p.jsx)(q.xR.X,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("linkedin"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on LinkedIn",children:(0,p.jsx)(q.xR.Linkedin,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("reddit"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on Reddit",children:(0,p.jsx)(q.xR.Reddit,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("discord"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on Discord",children:(0,p.jsx)(q.xR.Discord,{className:"h-4 w-4"})}),i&&(0,p.jsx)("button",{onClick:()=>{var e,t,n;_.LJ.capture(R.SL.EMBED.SUCCESS_DIALOG_CLICKED,{projectId:null==a?void 0:a.id,source:"publish_success_dialog"}),o({childProps:{projectUrl:null!==(e=null==a?void 0:a.url)&&void 0!==e?e:void 0,projectTitle:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:void 0,projectId:null!==(n=null==a?void 0:a.id)&&void 0!==n?n:void 0}}),s(!1)},className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Get Embed Code",children:(0,p.jsx)(eo.Z,{name:"code",size:"small",className:"h-4 w-4"})})]})]}),r&&(0,p.jsx)("div",{className:"space-y-3 border-t pt-6",children:(0,p.jsx)(sP,{project:a,variant:"dialog",onActionComplete:()=>s(!1)})})]})]})})},sD=e=>{let{open:t,onOpenChange:s,onPublishAnyway:a,onReviewIssues:n}=e;return(0,p.jsx)(H.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(H.cZ,{children:[(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{children:"Security Issues Found"}),(0,p.jsx)(H.Be,{children:"Critical vulnerabilities in Supabase integration detected. Review them now or publish anyway."})]}),(0,p.jsxs)(H.cN,{children:[(0,p.jsx)(G.z,{variant:"secondary",onClick:()=>{a(),s(!1)},children:"Publish anyway"}),(0,p.jsx)(G.z,{variant:"affirmative",onClick:()=>{n(),s(!1)},children:"Review Issues"})]})]})})},sO=e=>{let{supabaseProjectId:t,securityWarnings:s}=e,a=s&&0===s.supabase.errors?"?preset=WARN&id=":"",n="".concat("https://supabase.com/dashboard/project/".concat(t,"/advisors/security")).concat(a);return(0,p.jsx)(G.z,{asChild:!0,size:"sm",variant:"affirmative",children:(0,p.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:"Review Errors"})})};var sL=s(95565);let sM=e=>{let{project:t}=e,{data:s,isLoading:a}=(0,sL.W)({projectId:null==t?void 0:t.id});return(null==t?void 0:t.id)&&(a||(null==s?void 0:s.is_used))?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ex.VD,{}),(0,p.jsx)("div",{className:"pb-2",children:a?(0,p.jsxs)("div",{className:(0,ed.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg bg-muted px-2 md:mx-2 md:h-8"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)(eL.O,{className:"h-1.5 w-1.5 rounded-full"})}),(0,p.jsx)(eL.O,{className:"h-3 max-w-48 flex-grow"})]}):(0,p.jsxs)("div",{className:"flex min-h-7 items-center gap-2 px-4 py-2",children:[(0,p.jsx)(eo.Z,{name:"smart_toy",size:"small",className:"text-green-600"}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:"AI Gateway: Active"}),(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-sm p-0.5 text-muted-foreground hover:text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:(0,p.jsx)(eo.Z,{name:"help",size:"small"})})}),(0,p.jsx)(ec._v,{className:"max-w-xs",children:(0,p.jsx)("p",{children:"Lovable's AI Gateway provides secure API endpoints for your project to communicate with AI services. It handles authentication and rate limiting automatically."})})]})]}),(0,p.jsx)("div",{className:"ml-auto flex items-center",children:(0,p.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"})})]})})]}):null};var sZ=s(93261),sF=s(74225),sU=s(10441);let sK=e=>{let{projectId:t,enabled:s}=e,{data:a,...n}=(0,tn.a)(sU.c.domains({projectId:null!=t?t:"",enabled:s&&!!t}));return{customDomains:a,...n}},sV=e=>{let{project:t,onRenameClick:s}=e,{openSettings:a}=(0,eD.r)(),{customDomains:n}=sK({projectId:null==t?void 0:t.id,enabled:!0});return(0,p.jsxs)("div",{className:"my-2 flex flex-col gap-1",children:[(null==t?void 0:t.url)?(0,p.jsx)(G.z,{asChild:!0,variant:"link",className:"mx-0 w-full px-4 font-medium",children:(0,p.jsxs)("a",{href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer",children:[(0,p.jsx)(eo.Z,{name:"language",size:"small"}),(0,sF.P)(t.url),(0,p.jsx)(eo.Z,{name:"arrow_outward",size:"small",className:"ml-auto text-muted-foreground"})]})}):(0,p.jsxs)("div",{className:"flex min-h-7 items-center gap-2 px-4 py-0.5",children:[(0,p.jsx)(eo.Z,{name:"language",size:"small"}),(0,p.jsxs)("p",{className:"text-sm font-medium",children:[null==t?void 0:t.name,".lovable.app"]}),s&&(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",onClick:s,className:"ml-auto h-6 w-6 opacity-70 hover:opacity-100",children:(0,p.jsx)(eo.Z,{name:"edit",size:"small"})})]}),null==n?void 0:n.map((e,t)=>(0,p.jsx)("div",{className:"flex items-center px-4 py-0.5",children:(0,p.jsx)(sZ.Z,{domain:e,showRemove:!1,showIcon:!0},t)},t)),(0,p.jsx)("div",{className:"flex items-center gap-2 px-4 py-0.5",children:(0,p.jsxs)(G.z,{variant:"link",size:"sm",className:"pl-0 font-normal text-muted-foreground",onClick:()=>a("domains"),children:[(0,p.jsx)(eo.Z,{name:"add",size:"small"}),"Custom domains"]})})]})};var sW=s(5460);let sB=e=>{let{projectId:t,securityWarnings:s,setShowPublishConfirmDialog:a,projectUrl:n}=e,[l,r]=(0,g.useState)(),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),p=(0,x.D)({mutationFn:async()=>{let e=(0,N.SJ)(),s=await e.post("/projects/".concat(t,"/deployments"),{});return await (0,sW.G)({projectId:t}),{request:s,wasFirstTime:!n}},onSuccess:e=>{let{wasFirstTime:t}=e;t?m(!0):v.Am.success("Project updated!",{description:"Published project updated"})},onError:e=>{if(422===e.status){var t;r((null===(t=e.data)||void 0===t?void 0:t.detail)||null),o(!0)}else r(e.message||e.details||"Unidentified error. Please contact support if this issue persists."),o(!1);d(!0)}});return{errorMessage:l,isBuildError:i,failedDialogOpen:c,successDialogOpen:u,setFailedDialogOpen:d,setSuccessDialogOpen:m,handlePublish:async()=>{if(!t){T.logging.error("project id is missing, can't deploy");return}s&&s.supabase.errors>0?a(!0):p.mutate()},handlePublishAnyway:()=>{a(!1),p.mutate()},publishMutation:p}};var sG=s(49360),sH=s(78079);let sq=e=>{let{projectId:t,setIsOpen:s,setShowPublishConfirmDialog:a,shouldFetchSecurityWarnings:n,supabaseProjectId:l}=e,{data:r,isLoading:i,isError:o}=(0,tn.a)(tu.W.securityWarnings({projectId:t,enabled:!!t&&!!l&&n})),c=(0,g.useMemo)(()=>{if(o)return{supabase:{errors:0,warnings:0,success:!1}};if(r){var e,t,s,a;return{supabase:{errors:null!==(s=null===(e=r.supabase)||void 0===e?void 0:e.errors)&&void 0!==s?s:0,warnings:null!==(a=null===(t=r.supabase)||void 0===t?void 0:t.warnings)&&void 0!==a?a:0,success:!0}}}return null},[r,o]),d=(0,sH.mo)({projectId:t,onSuccess:()=>{null==s||s(!1)}}),u=d.isPending,m=c&&c.supabase.errors+c.supabase.warnings>0,p=c&&c.supabase.errors>0;return{securityWarnings:c,isLoadingWarnings:i,isSendingSecurityReview:u,handleReviewIssuesInDialog:()=>{if(a(!1),l){let e=c&&0===c.supabase.errors?"?preset=WARN&id=":"";window.open("".concat("https://supabase.com/dashboard/project/".concat(l,"/advisors/security")).concat(e),"_blank")}},handleSecurityReview:()=>{if(!t){T.logging.error("project id is missing, can't start security review");return}d.mutate({body:{message:"Please perform a comprehensive security review of my project.",id:(0,sG.Z)(),security_review:!0,chat_only:!0}})},hasSupabaseErrors:p,hasSecurityIssues:m}},sX=e=>{let t,s,{errors:a,warnings:n,supabaseProjectId:l}=e,r=(0,y.Z)("md"),i=a>0,o=n>0,c=i||o;c?i?(t="bg-destructive-primary",s="".concat(a," Supabase Error").concat(a>1?"s":"")):(t="bg-warning-primary",s="".concat(n," Supabase Warning").concat(n>1?"s":"")):(t="bg-success-primary",s="No Supabase security issues");let d="https://supabase.com/dashboard/project/".concat(l,"/advisors/security").concat(!i&&o?"?preset=WARN&id=":"");return(0,p.jsxs)("a",{href:d,target:"_blank",rel:"noopener noreferrer","aria-label":"View security issues on Supabase",className:(0,ed.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg bg-muted px-2 text-base transition-colors duration-100 ease-in-out md:mx-2 md:h-8 md:text-sm",c&&"hover:bg-muted-hover"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)("span",{className:"h-1.5 w-1.5 shrink-0 rounded-full ".concat(t)})}),(0,p.jsx)("p",{className:(0,ed.cn)("flex-grow text-base font-medium leading-none text-primary md:text-sm"),children:s}),c&&(0,p.jsx)(eo.Z,{name:"arrow_outward",size:r?"default":"small",className:"text-muted-foreground"})]})},sY=e=>{var t;let{isLoadingSecurityWarnings:s,securityWarnings:a,project:n}=e;return(null==n?void 0:null===(t=n.supabase_project_config)||void 0===t?void 0:t.supabase_project_id)?(0,p.jsx)("div",{className:"pb-2",children:s||!a?(0,p.jsxs)("div",{className:(0,ed.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg bg-muted px-2 md:mx-2 md:h-8"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)(eL.O,{className:"h-1.5 w-1.5 rounded-full"})}),(0,p.jsx)(eL.O,{className:"h-3 max-w-48 flex-grow"})]}):(0,p.jsx)(sX,{errors:a.supabase.errors,warnings:a.supabase.warnings,supabaseProjectId:n.supabase_project_config.supabase_project_id})}):null},s$=e=>{var t,s,a;let{disabled:n=!1}=e,[l,r]=(0,g.useState)(!1),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),u=(0,eb.ty)(),m=(0,eb.wf)(),x=(0,B.iZ)(e=>e.project),f=(0,h.NL)(),{securityWarnings:v,isLoadingWarnings:b,hasSecurityIssues:j,hasSupabaseErrors:y,handleReviewIssuesInDialog:w,handleSecurityReview:N,isSendingSecurityReview:E}=sq({projectId:null==x?void 0:x.id,supabaseProjectId:null==x?void 0:null===(t=x.supabase_project_config)||void 0===t?void 0:t.supabase_project_id,setIsOpen:r,setShowPublishConfirmDialog:o,shouldFetchSecurityWarnings:l}),{errorMessage:k,isBuildError:C,failedDialogOpen:_,successDialogOpen:S,setFailedDialogOpen:T,setSuccessDialogOpen:R,handlePublish:I,handlePublishAnyway:P,publishMutation:A}=sB({projectId:null==x?void 0:x.id,securityWarnings:v,setShowPublishConfirmDialog:o,projectUrl:(null==x?void 0:x.url)||void 0}),z=!!(null==x?void 0:null===(s=x.supabase_project_config)||void 0===s?void 0:s.supabase_project_id);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(ex.h_,{onOpenChange:r,open:l,children:[(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(ex.$F,{asChild:!0,disabled:n,children:(0,p.jsxs)(G.z,{id:"publish-menu",variant:"affirmative",size:"sm",className:"gap-1.5",onMouseEnter:()=>{(null==x?void 0:x.id)&&f.prefetchQuery(tu.W.securityWarnings({projectId:x.id,enabled:!!x.id&&z}))},children:[(0,p.jsx)(eo.Z,{name:"language",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Publish"})]})})}),(0,p.jsx)(ec._v,{children:"Publish your project"})]}),(0,p.jsxs)(ex.AW,{className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0 md:max-w-[350px]",align:"end",collisionPadding:8,children:[(0,p.jsx)(tH,{title:(null==x?void 0:x.url)?"Update":"Publish",description:(null==x?void 0:x.url)?"":"Publish your project to make it visible for others on the internet."}),(0,p.jsx)(ex.VD,{}),(0,p.jsx)(sV,{project:x,onRenameClick:()=>d(!0)}),z&&(0,p.jsx)(sY,{isLoadingSecurityWarnings:b,securityWarnings:v,project:x}),u&&(0,p.jsx)(sP,{project:x,onActionComplete:()=>r(!1)}),m&&(0,p.jsx)(sM,{project:x}),(0,p.jsx)(ex.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tq,{href:"https://docs.lovable.dev/features/deploy"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(G.z,{variant:"secondary",size:"sm",onClick:N,disabled:E,loading:E,className:"relative gap-1.5",children:"Review Security"}),(0,p.jsx)(G.z,{variant:j?"secondary":"affirmative",size:"sm",onClick:I,disabled:b,loading:A.isPending,children:(null==x?void 0:x.url)?"Update":"Publish"}),(null==x?void 0:null===(a=x.supabase_project_config)||void 0===a?void 0:a.supabase_project_id)&&y&&(0,p.jsx)(sO,{supabaseProjectId:x.supabase_project_config.supabase_project_id,securityWarnings:v})]})]})]})]}),(0,p.jsx)(sR,{open:_,onOpenChange:T,errorMessage:k,isBuildError:C}),(0,p.jsx)(sz,{open:S,onOpenChange:R,project:x}),(0,p.jsx)(sD,{open:i,onOpenChange:o,onPublishAnyway:P,onReviewIssues:w}),x&&(0,p.jsx)(e_.i,{project:x,isOpen:c,onClose:()=>d(!1)})]})},sJ=(0,g.memo)(function(){let e=(0,eb.Cb)(),t=(0,tQ.G)(),s=(0,eZ.hO)(e=>e.projectWorkspace),{hasUnsavedChanges:a}=(0,tm.v)(),n=null==s?void 0:s.disable_publish;return(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,p.jsx)(sk,{hasUnsavedChanges:a}),!e&&(0,p.jsx)(tK,{}),t&&(0,p.jsx)(tY,{disabled:a}),t&&(0,p.jsx)(t2,{disabled:a}),(0,p.jsx)(tJ.Z,{plan:null==s?void 0:s.plan,onClick:()=>{_.ZP.capture(R.VL.UPGRADE.BUTTON_CLICKED.NAV_BAR,{context:R.VL.UPGRADE.CONTEXT.BILLING})}}),(0,p.jsx)(s$,{disabled:a||!!n})]})}),sQ={Left:()=>(0,p.jsx)("div",{className:"flex items-center space-x-2",children:(0,p.jsx)(eL.O,{className:"h-6 w-20 md:h-7"})}),Center:()=>(0,p.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(0,p.jsx)(eL.O,{className:"h-6 w-48 md:h-7"})}),Right:()=>(0,p.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,p.jsx)(eL.O,{className:"h-6 w-20 md:h-7"})})},s0=(0,g.memo)(function(e){let{commitMessage:t}=e;return(0,p.jsxs)("div",{className:"flex h-full min-w-0 items-center gap-2",children:[(0,p.jsx)("span",{className:"text-sm text-muted-foreground",children:"Previewing"}),(0,p.jsx)("div",{className:"flex h-7 min-w-0 items-center rounded-full border border-input px-3 text-sm",children:(0,p.jsx)("p",{className:"min-w-0 max-w-[250px] truncate",children:t})})]})}),s1=()=>{let[e,t]=(0,g.useState)(!1),s=()=>t(!1),{openSettings:a}=(0,eD.r)();return{GithubRequiredDialog:()=>(0,p.jsx)(H.Vq,{open:e,onOpenChange:t,children:(0,p.jsxs)(H.cZ,{size:"sm",children:[(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{children:"GitHub Access Required"}),(0,p.jsx)(H.Be,{children:"This action requires GitHub access. Please connect your GitHub account by clicking the button below."})]}),(0,p.jsxs)(H.cN,{children:[(0,p.jsx)(H.GG,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"secondary",children:"Cancel"})}),(0,p.jsxs)(G.z,{variant:"default",onClick:()=>{s(),a("github")},children:[(0,p.jsx)(q.xR.GitHub,{className:"h-4 w-4"}),"Connect GitHub"]})]})]})}),isOpen:e,open:()=>t(!0),close:s}},s2=e=>{let{activeEdit:t,project:s}=e,{open:a,GithubRequiredDialog:n}=s1();return(null==t?void 0:t.commit_sha)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(G.z,{variant:"secondary",size:"sm",className:"shadow-none",onClick:()=>{var e,n,l;let r=(0,t0._J)((null==s?void 0:s.github_repo_name)||"",t.commit_sha||"",null==s?void 0:null===(e=s.github_owner)||void 0===e?void 0:e.name);if(_.ZP.capture(R.SL.CONSOLE.GITHUB_LINK_CLICKED,{hasCustomGithubOwner:(null==s?void 0:null===(n=s.github_owner)||void 0===n?void 0:n.name)!==t0.aR,context:"nav_bar"}),(null==s?void 0:null===(l=s.github_owner)||void 0===l?void 0:l.name)===t0.aR){a();return}r&&window.open(r,"_blank")},children:[(0,p.jsx)(q.xR.GitHub,{className:"h-3.5 w-3.5"}),(0,p.jsx)("span",{className:"hidden sm:flex",children:"View on GitHub"})]}),(0,p.jsx)(n,{})]}):null},s5=e=>{let{projectId:t}=e,{exitConsole:s}=(0,z.pE)(),a=(0,f.useRouter)();return(0,p.jsx)(G.z,{size:"sm",variant:"secondary",type:"button",onClick:()=>{_.ZP.capture(R.SL.CONSOLE.EXITED_VIA_BUTTON,{context:"previewing_view"}),t&&a.replace("/projects/".concat(t)),s()},className:"shadow-none",children:"Exit"})};var s4=s(78276),s3=s(26237),s6=s(79396);let s8=(0,g.memo)(function(e){let{activeEdit:t}=e,{exitConsole:s}=(0,z.pE)(),a=(0,s3.C)(),n=(0,D.bk)(e=>e.isSomeRevertMutationPending),{mutate:l,isPending:r}=(0,s6.I)({onSuccess:s}),{disabled:i,disabledTooltip:o}=(0,g.useMemo)(()=>t?n||a?{disabled:!0,disabledTooltip:(0,p.jsx)("p",{className:"max-w-sm",children:"Cannot revert while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete."})}:{disabled:!1,disabledTooltip:void 0}:{disabled:!0,disabledTooltip:(0,p.jsx)("p",{className:"max-w-sm",children:"There is no selected edit to revert to."})},[t,n,a]);return(0,p.jsx)(s4.b,{showTooltip:i,tooltipContent:o,children:(0,p.jsx)(G.z,{variant:"affirmative",className:"gap-1",size:"sm",loading:r,disabled:!t||n||a,type:"button",onClick:()=>{_.ZP.capture(R.SL.CONSOLE.RESTORE_VERSION_CLICKED,{context:"previewing_view"}),l({edit:t})},children:r?(0,p.jsx)("span",{children:"Restoring..."}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"Restore"}),(0,p.jsx)("span",{className:"hidden sm:flex",children:"this version"})]})})})});s8.displayName="RestoreCommitButton";let s9=(0,g.memo)(function(e){let{activeEdit:t}=e;return(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(s5,{}),(0,p.jsx)(s8,{activeEdit:t})]})}),s7=(0,g.memo)(function(e){let{projectName:t,createdBy:s}=e;return(0,p.jsxs)("div",{className:"flex h-full items-center truncate",children:[(0,p.jsx)("p",{className:"font-medium",children:t}),"\xa0by\xa0",(0,p.jsx)(eT.default,{href:"/@".concat(s),children:(0,p.jsx)("p",{className:"font-medium",children:s})})]})}),ae=(0,g.memo)(function(){let{setIsRemixDialogOpen:e}=(0,B.d2)(),{canEdit:t}=(0,S.t)(),s=(0,B.iZ)(e=>e.project),{isAuthenticated:a}=(0,b.Eu)(),n=(0,f.useRouter)(),l=!!(null==s?void 0:s.is_supabase_enabled)||!!(null==s?void 0:s.supabase_project_config),r=t||!l,i=(0,g.useCallback)(()=>{if(!a){n.push("/login?redirect=".concat(window.location.pathname));return}e(!0)},[a,n,e]);return(0,p.jsxs)(ec.u,{instant:!0,children:[(0,p.jsx)(ec.aJ,{className:"cursor-default",children:(0,p.jsxs)(G.z,{className:"flex items-center gap-1",onClick:i,disabled:!r,size:"sm",children:[(0,p.jsx)(eo.Z,{name:"shuffle",size:"small"}),"Remix"]})}),(0,p.jsx)(ec._v,{className:"max-w-xs",children:r?(0,p.jsx)("p",{children:"Remix this project"}):(0,p.jsx)("p",{children:"This project is connected to Supabase. To remix, you must be a collaborator or member of this workspace."})})]})}),at=()=>{let{canEdit:e,isLoading:t}=(0,S.t)(),s=(0,B.iZ)(e=>e.project),{isAuthenticated:a}=(0,b.Eu)(),n=(0,A.aK)(e=>e.edits),l=(0,z.Sl)(e=>e.activeEditId),r=l?n[l]:null,i=(0,z.Sl)(e=>e.consoleContentType),o=(0,$.c)(e=>e.hasFetchedCollaborators);return(0,g.useMemo)(()=>s?t||a&&!o?{center:(0,p.jsx)(sQ.Center,{}),right:(0,p.jsx)(sQ.Right,{}),left:(0,p.jsx)(sQ.Left,{})}:r&&"snapshot-preview"===i?{center:(0,p.jsx)(s0,{commitMessage:r.commit_message}),right:(0,p.jsx)(s9,{activeEdit:r}),left:(0,p.jsx)(s2,{activeEdit:r,project:s})}:e?{center:(0,p.jsx)(tL,{}),right:(0,p.jsx)(sJ,{}),left:(0,p.jsx)(tV,{})}:{center:(0,p.jsx)(s7,{projectName:s.name,createdBy:s.created_by}),right:(0,p.jsx)(ae,{}),left:null}:{center:null,right:null,left:null},[s,t,a,o,r,i,e])},as=(0,g.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:s,openSidebar:a,hideButtons:n}=e,[l,r]=(0,ei.QJ)(eH.I8),{left:i,center:o,right:c}=at(),d=(0,eW.SE)(e=>e.panelSizes)[0],u=(0,y.Z)("md");return(0,p.jsxs)("nav",{className:(0,ed.cn)("relative hidden min-h-12 w-full shrink-0 flex-col items-center gap-2 px-4 py-2 md:flex md:h-12 md:flex-row md:gap-0 md:py-0"),children:[(0,p.jsx)(eG,{className:"flex w-full shrink-0 items-center",children:(0,p.jsxs)("div",{className:"relative flex w-full flex-shrink-0 items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex-basis-0 flex-grow-1 flex flex-shrink-0 items-center gap-2",style:{width:u||0===d?"auto":"".concat(d||eB.DEFAULT_SIDEBAR_SIZE,"%")},children:[(0,p.jsx)(eV,{}),!n&&(0,p.jsxs)("div",{className:"flex flex-row-reverse gap-2 sm:ml-auto sm:mr-4 md:flex-row",children:[(0,p.jsx)(em,{openSidebar:a}),(0,p.jsx)(eq,{isSidebarOpen:t,toggleSidebar:s})]})]}),(0,p.jsxs)("div",{className:"relative flex flex-shrink flex-grow justify-between gap-1 overflow-x-auto pl-2 @container md:ml-1 md:gap-2.5 md:pl-0",children:[(0,p.jsx)("div",{className:"hidden w-full md:flex",children:i}),t&&(0,p.jsx)("div",{className:"hidden md:flex",children:o}),(0,p.jsx)("div",{className:"ml-auto flex w-full justify-end md:ml-0",children:c})]})]})}),(0,p.jsxs)("div",{className:"flex min-h-8 w-full justify-between gap-2 md:hidden",children:[(0,p.jsx)("div",{className:"flex min-w-0 flex-1 items-center",children:o}),(0,p.jsx)("div",{className:"flex items-center",children:i})]}),!t&&(0,p.jsx)("div",{className:"absolute left-1/2 top-1/2 hidden -translate-x-1/2 -translate-y-1/2 md:flex",children:o})]})});as.displayName="EditorNav";var aa=()=>{let e=(0,B.iZ)(e=>e.project),t=(0,D.bk)(e=>e.isSendChatMessageMutationPending),s=null==e?void 0:e.available_project_migrations;return(0,g.useMemo)(()=>null!=s&&!!s.length&&s.length>0&&!t,[s,t])},an=s(72384);let al=()=>{let e=(0,B.iZ)(e=>e.project),t=(0,V.D)(),s=(0,D.bk)(e=>e.isSendChatMessageMutationPending),a=(0,D.pY)(),n=null==e?void 0:e.available_project_migrations,[l,r]=(0,g.useState)(!(null==n?void 0:n.length));(0,g.useEffect)(()=>{(null==n?void 0:n.length)||r(!1),(null==n?void 0:n.length)&&!s&&r(!0)},[null==n?void 0:n.length,s]);let{mutateAsync:i,isPending:o}=(0,sH.mo)({projectId:t,onSuccess:async()=>{v.Am.success("Project Updated")},onSubmit:()=>{}}),c=async()=>{try{var s;await i({body:{id:(0,O.Fd)(),message:"Please update the project template to the latest Lovable version to enable new features.",mode:an.S.INSTANT,contains_error:!1,project_migration_ids:null==e?void 0:null===(s=e.available_project_migrations)||void 0===s?void 0:s.map(e=>e.id)},projectId:t})}catch(e){T.logging.error(e),v.Am.error("Error",{description:"There was an error sending the project update request."})}};return e&&l?(0,p.jsxs)(H.cZ,{children:[(0,p.jsx)(H.fK,{children:(0,p.jsx)(H.$N,{className:"text-xl font-medium",children:"Project out of date"})}),(0,p.jsxs)(H.Be,{className:"max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:[n&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h3",{className:"text-lg font-medium",children:"Available Updates"}),(0,p.jsx)("ul",{className:"space-y-3",children:n.map((e,t)=>(0,p.jsxs)("li",{className:"border-l-2 border-primary/20 pl-4",children:[(0,p.jsx)("h4",{className:"font-medium",children:e.name}),(0,p.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description})]},t))})]}),(0,p.jsx)("p",{className:"mt-4 text-sm first-of-type:mt-0",children:"The AI assistant will guide you through the necessary steps to complete the migration."})]}),(0,p.jsxs)(H.cN,{children:[(0,p.jsx)(H.GG,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"outline",children:"Close"})}),(0,p.jsx)(G.z,{disabled:a,loading:o,onClick:c,children:"Update Project"})]})]}):null};var ar=s(96027),ai=s(23374);let ao=e=>{let{className:t,...s}=e;return(0,p.jsx)(ai.eh,{className:(0,ed.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})},ac=ai.s_,ad=e=>{let{tooltip:t,className:s,...a}=e,[n,l]=(0,g.useState)(!1),[r,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(0);return(0,g.useEffect)(()=>{var e;let t;let s=(e=e=>{c(e.clientY)},function(){for(var s=arguments.length,a=Array(s),n=0;n<s;n++)a[n]=arguments[n];clearTimeout(t),t=setTimeout(()=>e.apply(this,a),100)});return window.addEventListener("mousemove",s),()=>{window.removeEventListener("mousemove",s)}},[]),(0,p.jsx)(ai.OT,{className:(0,ed.cn)("relative -mr-px mb-[20px] mt-[12px] flex w-[2px] cursor-col-resize items-center justify-center rounded-full transition-colors duration-300 ease-in-out after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 hover:bg-accent-primary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",s,n?"bg-accent-primary":""),onDragging:e=>{l(e)},...a,children:t&&(0,p.jsxs)(ec.u,{disableHoverableContent:!0,open:!n&&r,onOpenChange:e=>{i(e),e&&u(o)},children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)("div",{className:"absolute -left-[2px] -right-[2px] bottom-0 top-0 z-[12000]"})}),(0,p.jsx)(ec._v,{side:"right",align:"start",alignOffset:d>0?d-68:0,children:t})]})})};function au(){let e=(0,ew.f6)(e=>e.activeMode);return(0,g.useCallback)(t=>{let s=(0,ew.XE)(e);document.querySelectorAll("iframe#".concat(s)).forEach(e=>{e.contentWindow&&e.contentWindow.postMessage(t,"*")})},[e])}(a=c||(c={})).ELEMENT_CLICKED="ELEMENT_CLICKED",a.TOGGLE_SELECTOR="TOGGLE_SELECTOR",a.UPDATE_SELECTED_ELEMENTS="UPDATE_SELECTED_ELEMENTS",a.SELECTOR_STATE_RESPONSE="SELECTOR_STATE_RESPONSE",a.TOGGLE_PICK_AND_EDIT_REQUESTED="TOGGLE_PICK_AND_EDIT_REQUESTED",a.REQUEST_PICKER_STATE="REQUEST_PICKER_STATE",a.SELECTOR_SCRIPT_LOADED="SELECTOR_SCRIPT_LOADED",a.GET_SELECTOR_STATE="GET_SELECTOR_STATE",a.REQUEST_SELECTED_ELEMENTS="REQUEST_SELECTED_ELEMENTS",a.SET_ELEMENT_CONTENT="SET_ELEMENT_CONTENT",a.SET_ELEMENT_ATTRS="SET_ELEMENT_ATTRS",a.SET_STYLESHEET="SET_STYLESHEET",a.EDIT_TEXT_REQUESTED="EDIT_TEXT_REQUESTED",a.ELEMENT_DOUBLE_CLICKED="ELEMENT_DOUBLE_CLICKED",a.ELEMENT_TEXT_UPDATED="ELEMENT_TEXT_UPDATED",a.COMPONENT_TREE="COMPONENT_TREE",a.REQUEST_COMPONENT_TREE="REQUEST_COMPONENT_TREE",a.HOVER_ELEMENT_REQUESTED="HOVER_ELEMENT_REQUESTED",a.UNHOVER_ELEMENT_REQUESTED="UNHOVER_ELEMENT_REQUESTED",a.KEYBIND="KEYBIND",a.DUPLICATE_ELEMENT_REQUESTED="DUPLICATE_ELEMENT_REQUESTED",a.GET_PARENT_ELEMENT="GET_PARENT_ELEMENT",a.PARENT_ELEMENT="PARENT_ELEMENT",a.SCROLL_HAPPENED="SCROLL_HAPPENED";var am=s(32582),ap=s(9078),ah=s(76624);let ax=()=>{let{ast:e}=(0,tm.v)(),t=(0,tc.A7)(e=>e.addPendingChange);return(0,g.useCallback)((s,a)=>{var n,l;let r=e.find(e=>e.filePath===s.filePath);if(!r){T.logging.error("Node not found",{element:s}),v.Am.error("Node not found",{description:"Node not found"});return}let i=!1;if((0,ah.default)(r.ast,{JSXElement(e){var t;(null===(t=e.node.loc)||void 0===t?void 0:t.start.line)===s.lineNumber&&(a(e.node,e),i=!0,e.stop())}}),!i)return;let o=(n=r.ast,l={sourceMaps:!0,sourceFileName:r.filePath},(0,ap.default)(n,l,void 0).code);t(r.filePath,o)},[t,e,v.Am])};var af=s(21399);(n=d||(d={})).TEXT_CHANGE="TEXT_CHANGE",n.IMAGE_CHANGE="IMAGE_CHANGE",n.REMOVE_NODE="REMOVE_NODE",n.CLASS_NAME_UPDATE="CLASS_NAME_UPDATE",n.CLASS_NAME_SET="CLASS_NAME_SET",n.DUPLICATE_NODE="DUPLICATE_NODE";let ag=e=>{let{visibleMode:t}=e,s=(0,ew.XE)(t);return document.querySelector("iframe#".concat(s))},av=e=>{let{elementBounds:t,iframe:s,elementSpacing:a,elementHeight:n}=e,l=t.y+t.height+a;if(l+n+16<=s.offsetHeight)return l;let r=t.y-n-a;return r>=16?r:t.y+8},ab=e=>{let{elementBounds:t,iframe:s,elementWidth:a}=e,n=t.x+t.width/2-a/2;return n+a>s.offsetWidth-16?s.offsetWidth-a-16:n<16?16:n},aj=e=>{let{iframeRect:t,x:s,y:a}=e;return{x:t.x+s,y:t.y+a}},ay=e=>{let{elementBounds:t,visibleMode:s,showVisualEditsPanel:a}=e,n=ag({visibleMode:s});if(!n)return;let l=n.getBoundingClientRect(),r=av({elementBounds:t,iframe:n,elementHeight:40,elementSpacing:8});a(aj({iframeRect:l,x:ab({elementBounds:t,iframe:n,elementWidth:400}),y:r}))},aw={current:!1},aN=e=>{let{isLocked:t,elementType:s,payload:a,ast:n}=e;return!t&&"button"!==s&&(0,am.H2)({...a,content:null},n)},aE=e=>{let{payload:t,sendIframeMessage:s}=e;s({type:c.EDIT_TEXT_REQUESTED,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}})};function ak(){let{isLocked:e}=(0,af.i)(),{ast:t,setHistory:s}=(0,tm.v)(),a=(0,tF.UC)(e=>e.isPickAndEditActive),{setIsPickAndEditActive:n,showFloatingInput:l,showVisualEditsPanel:r}=(0,tF.S9)(),{store:i}=(0,ew.My)(),o=(0,tF.UC)(e=>e.selectedElements),{setSelectedElements:u,setCustomPromptValue:m,closeVisualEditsPanel:p}=(0,tF.S9)(),h=au(),x=(0,g.useCallback)(e=>{let{isPickAndEditActive:t,selectedElements:s}=e;h({type:c.TOGGLE_SELECTOR,payload:{isActive:t}}),h({type:c.UPDATE_SELECTED_ELEMENTS,payload:s})},[h]),f=(0,g.useCallback)(()=>{x({isPickAndEditActive:a,selectedElements:o})},[a,o,x]),b=(0,g.useCallback)(()=>{n(!0),x({isPickAndEditActive:!0,selectedElements:o})},[n,x,o]),j=(0,g.useCallback)(()=>{n(!1),x({isPickAndEditActive:!1,selectedElements:o})},[n,x,o]),y=(0,g.useCallback)(()=>{a?j():b()},[a,b,j]),w=ax();(0,g.useEffect)(()=>{h({type:c.TOGGLE_SELECTOR,payload:{isActive:a}})},[h,a]);let N=(0,g.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,s=e.data.lineNumber,a=e.data.col;t&&s&&a&&h({type:c.HOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:s,col:a}}})},[h]),E=(0,g.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,s=e.data.lineNumber,a=e.data.col;t&&s&&a&&h({type:c.UNHOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:s,col:a}}})},[h]),k=(0,g.useCallback)(e=>{if(!e){v.Am.error("Failed to select element");return}_.ZP.capture("visual_edits:element_selected",{type:e.elementType});try{var t;let s=e=>e?JSON.parse(decodeURIComponent(e.toString())):null,a={...e,content:s(e.content),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>({...e,content:s(e.content)}))};u([a]),h({type:c.UPDATE_SELECTED_ELEMENTS,payload:[a]})}catch(t){v.Am.error("Error processing element data",{description:t instanceof Error?t.message:"Unknown error"}),T.logging.error("Error in handleElementClick",{error:t,elementData:e})}},[u,h]),C=(0,g.useRef)();return(0,g.useEffect)(()=>{C.current=l=>{switch(l.data.type){case"ELEMENT_CLICKED":{let s=l.data.payload,a=l.data.rect,n=i.getState().visibleMode;a&&(m(""),ay({elementBounds:a,visibleMode:n,showVisualEditsPanel:r})),aN({isLocked:e,elementType:s.elementType,payload:s,ast:t})&&aE({payload:s,sendIframeMessage:h}),k(l.data.payload)}break;case"TOGGLE_PICK_AND_EDIT_REQUESTED":case"ELEMENT_DOUBLE_CLICKED":break;case"REQUEST_PICKER_STATE":case"REQUEST_SELECTED_ELEMENTS":h({type:c.UPDATE_SELECTED_ELEMENTS,payload:o});break;case"SELECTOR_SCRIPT_LOADED":f();break;case"GET_SELECTOR_STATE":h({type:c.SELECTOR_STATE_RESPONSE,payload:{isActive:a}});break;case"ELEMENT_TEXT_UPDATED":{_.ZP.capture("visual_edits:element_text_updated");let e=l.data.payload,t=o.find(t=>t.filePath===e.id.filePath&&t.lineNumber===e.id.lineNumber);if(!t)return;let a={...t,textContent:e.content};u([a,...o.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)]),w(a,t=>(0,am.Rw)(t,e.content)),s(s=>[...s,{type:d.TEXT_CHANGE,element:a,oldText:t.textContent||"",newText:e.content}]);break}case"SELECTOR_SCRIPT_LOADED":h({type:c.TOGGLE_SELECTOR,payload:{isActive:!0}}),n(!0);break;case"PARENT_ELEMENT":{_.ZP.capture("visual_edits:get_parent_element");let e=l.data.payload;e&&k(e);break}case c.SCROLL_HAPPENED:p()}}},[t,b,j,k,f,e,a,w,o,h,s,n,u,l,i,m,r,p]),(0,g.useEffect)(()=>{if(!aw.current){let e=e=>{var t;null===(t=C.current)||void 0===t||t.call(C,e)};return window.addEventListener("message",e),aw.current=!0,()=>{window.removeEventListener("message",e),aw.current=!1}}},[]),(0,er.y1)("esc",e=>{e.preventDefault(),e.stopPropagation()},{enableOnFormTags:!0},[]),(0,g.useEffect)(()=>{h({type:c.UPDATE_SELECTED_ELEMENTS,payload:o}),f()},[f,o,h,x]),{isPickAndEditActive:a,togglePickAndEdit:y,handleDeactivatePickAndEdit:j,selectedElements:o,hoverElement:N,unhoverElement:E,canEdit:!e}}let aC=()=>{let e=(0,z.Sl)(e=>e.activeView),t=(0,g.useRef)(e),s=(0,tF.UC)(e=>e.isVisualEditingActive),a=(0,tF.UC)(e=>e.selectedElements),n=(0,tF.UC)(e=>e.visualEditsPanelState),l=(0,tF.UC)(e=>e.lastPanelPosition),{showVisualEditsPanel:r}=(0,tF.S9)(),i=au();(0,g.useEffect)(()=>{"dev-mode"===t.current&&("preview"===e||"console"===e)&&(i({type:c.UPDATE_SELECTED_ELEMENTS,payload:a}),s&&a.length>0&&!n.isOpen&&l&&r(l)),t.current=e},[e,s,a,n.isOpen,l,i,r])};var a_=s(53647),aS=s(4478),aT=s.n(aS),aR=s(88108),aI=s.n(aR),aP=s(50676),aA=s(13735),az=s.n(aA);class aD extends Error{constructor(e){super("Unable to identify the plugin based on ".concat(e,". This could be due to a misspelling, an invalid plugin, or the plugin is not yet included in the supported plugins list.")),this.name="PluginNotFoundException"}}let aO=new Map([["w",[{scaleKey:"width",ns:"width",class:["width"],type:"length"}]],["min-w",[{scaleKey:"minWidth",ns:"minWidth",class:["min-width"],type:"length"}]],["max-w",[{scaleKey:"maxWidth",ns:"maxWidth",class:["max-width"],type:"length"}]],["h",[{scaleKey:"height",ns:"height",class:["height"],type:"length"}]],["min-h",[{scaleKey:"minHeight",ns:"minHeight",class:["min-height"],type:"length"}]],["max-h",[{scaleKey:"maxHeight",ns:"maxHeight",class:["max-height"],type:"length"}]],["size",[{scaleKey:"size",ns:"size",class:["width","height"],type:"length"}]],["m",[{scaleKey:"margin",ns:"margin",class:["margin"],type:"length",supportNegative:!0}]],["mx",[{scaleKey:"margin",ns:"marginX",class:["margin-left","margin-right"],type:"length",supportNegative:!0}]],["my",[{scaleKey:"margin",ns:"marginY",class:["margin-top","margin-bottom"],type:"length",supportNegative:!0}]],["mt",[{scaleKey:"margin",ns:"marginTop",class:["margin-top"],type:"length",supportNegative:!0}]],["mr",[{scaleKey:"margin",ns:"marginRight",class:["margin-right"],type:"length",supportNegative:!0}]],["mb",[{scaleKey:"margin",ns:"marginBottom",class:["margin-bottom"],type:"length",supportNegative:!0}]],["ml",[{scaleKey:"margin",ns:"marginLeft",class:["margin-left"],type:"length",supportNegative:!0}]],["p",[{scaleKey:"padding",ns:"padding",class:["padding"],type:"length"}]],["px",[{scaleKey:"padding",ns:"paddingX",class:["padding-left","padding-right"],type:"length"}]],["py",[{scaleKey:"padding",ns:"paddingY",class:["padding-top","padding-bottom"],type:"length"}]],["pt",[{scaleKey:"padding",ns:"paddingTop",class:["padding-top"],type:"length"}]],["pr",[{scaleKey:"padding",ns:"paddingRight",class:["padding-right"],type:"length"}]],["pb",[{scaleKey:"padding",ns:"paddingBottom",class:["padding-bottom"],type:"length"}]],["pl",[{scaleKey:"padding",ns:"paddingLeft",class:["padding-left"],type:"length"}]],["text",[{scaleKey:"fontSize",ns:"fontSize",class:["font-size"],type:"length"},{scaleKey:"textColor",ns:"textColor",class:["color"],type:"color"}]],["indent",[{scaleKey:"textIndent",ns:"textIndent",class:["text-indent"],type:"length",supportNegative:!0}]],["underline-offset",[{scaleKey:"textUnderlineOffset",ns:"textUnderlineOffset",class:["text-underline-offset"],type:"number"}]],["decoration",[{scaleKey:"textDecorationThickness",ns:"textDecorationThickness",class:["text-decoration-thickness"],type:"number"},{scaleKey:"textDecorationColor",ns:"textDecorationColor",class:["text-decoration-color"],type:"color"}]],["font",[{scaleKey:"fontWeight",ns:"fontWeight",class:["font-weight"],type:"number"},{scaleKey:"fontFamily",ns:"fontFamily",class:["font-family"],type:"family-name"}]],["leading",[{scaleKey:"lineHeight",ns:"lineHeight",class:["line-height"],type:"number"}]],["tracking",[{scaleKey:"letterSpacing",ns:"letterSpacing",class:["letter-spacing"],type:"length",supportNegative:!0}]],["bg",[{scaleKey:"backgroundImage",ns:"backgroundImage",class:["background-image"],type:"image"},{scaleKey:"backgroundPosition",ns:"backgroundPosition",class:["background-position"],type:"position"},{scaleKey:"backgroundSize",ns:"backgroundSize",class:["background-size"],type:"bg-size"},{scaleKey:"backgroundColor",ns:"backgroundColor",class:["background-color"],type:"color"}]],["from",[{scaleKey:"gradientColorStops",ns:"gradientStopsFrom",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsFromPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["to",[{scaleKey:"gradientColorStops",ns:"gradientStopsTo",class:["--tw-gradient-to","--tw-gradient-to-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsToPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["via",[{scaleKey:"gradientColorStops",ns:"gradientStopsVia",class:["--tw-gradient-from"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsViaPositions",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["fill",[{scaleKey:"fill",ns:"fillColor",class:["fill"],type:"color"}]],["stroke",[{scaleKey:"strokeWidth",ns:"strokeWidth",class:["stroke-width"],type:"line-width"},{scaleKey:"stroke",ns:"strokeColor",class:["border-color"],type:"color"}]],["border",[{scaleKey:"borderWidth",ns:"borderWidth",class:["border-width"],type:"line-width"},{scaleKey:"borderColor",ns:"borderColor",class:["border-color"],type:"color"}]],["ring",[{scaleKey:"ringWidth",ns:"ringWidth",class:["box-shadow"],type:"line-width"},{scaleKey:"ringColor",ns:"ringColor",class:["--tw-ring-color"],type:"color"}]],["ring-offset",[{scaleKey:"ringOffsetWidth",ns:"ringOffsetWidth",class:["--tw-ring-offset-width"],type:"line-width"},{scaleKey:"ringOffsetColor",ns:"ringOffsetColor",class:["--tw-ring-offset-color"],type:"color"}]],["rounded",[{scaleKey:"borderRadius",ns:"borderRadius",class:["border-radius"],type:"length"}]],["rounded-tl",[{scaleKey:"borderRadius",ns:"borderTopLeftRadius",class:["border-top-left-radius"],type:"length"}]],["rounded-tr",[{scaleKey:"borderRadius",ns:"borderTopRightRadius",class:["border-top-right-radius"],type:"length"}]],["rounded-br",[{scaleKey:"borderRadius",ns:"borderBottomRightRadius",class:["border-bottom-right-radius"],type:"length"}]],["rounded-bl",[{scaleKey:"borderRadius",ns:"borderBottomLeftRadius",class:["border-bottom-left-radius"],type:"length"}]],["flex",[{scaleKey:"flex",ns:"flex",class:["flex"],type:"number"}]],["basis",[{scaleKey:"flexBasis",ns:"flexBasis",class:["flex-basis"],type:"length"}]],["grid-cols",[{scaleKey:"gridTemplateColumns",ns:"gridTemplateColumns",class:["grid-template-columns"],type:"number"}]],["grid-rows",[{scaleKey:"gridTemplateRows",ns:"gridTemplateRows",class:["grid-template-rows"],type:"number"}]],["gap",[{scaleKey:"gap",ns:"gap",class:["gap"],type:"length"}]],["gap-x",[{scaleKey:"gap",ns:"gapX",class:["gap"],type:"length"}]],["gap-y",[{scaleKey:"gap",ns:"gapY",class:["gap"],type:"length"}]],["divide-x",[{scaleKey:"divideWidth",ns:"divideX",class:["border-left-width","border-right-width"],type:"length"}]],["divide-y",[{scaleKey:"divideWidth",ns:"divideY",class:["border-top-width","border-bottom-width"],type:"length"}]],["divide",[{scaleKey:"divideColor",ns:"divideColor",class:["--tw-divide-color"],type:"color"}]],["divide-opacity",[{scaleKey:"divideOpacity",ns:"divideOpacity",class:["--tw-divide-opacity"],type:"number"}]],["col",[{scaleKey:"gridColumn",ns:"gridColumn",class:["grid-column"],type:"number"}]],["row",[{scaleKey:"gridRow",ns:"gridRow",class:["grid-row"],type:"number"}]],["space-x",[{scaleKey:"spacing",ns:"spaceX",class:["margin-left"],type:"number",supportNegative:!0}]],["space-y",[{scaleKey:"spacing",ns:"spaceY",class:["margin-top"],type:"number",supportNegative:!0}]],["opacity",[{scaleKey:"opacity",ns:"opacity",class:["opacity"],type:"number"}]],["shadow",[{scaleKey:"boxShadow",ns:"boxShadow",class:["box-shadow"],type:"length"},{scaleKey:"boxShadowColor",ns:"boxShadowColor",class:["box-shadow"],type:"color"}]],["transition",[{scaleKey:"transitionProperty",ns:"transitionProperty",class:["transition-property"],type:"named"}]],["duration",[{scaleKey:"transitionDuration",ns:"transitionDuration",class:["transition-duration"],type:"number"}]],["delay",[{scaleKey:"transitionDelay",ns:"transitionDelay",class:["transition-delay"],type:"number"}]],["scale",[{scaleKey:"scale",ns:"scale",class:["scale"],type:"number",supportNegative:!0}]],["rotate",[{scaleKey:"rotate",ns:"rotate",class:["rotate"],type:"angle",supportNegative:!0}]],["translate",[{scaleKey:"translate",ns:"translate",class:["transform"],type:"length",supportNegative:!0}]],["translate-y",[{scaleKey:"translate",ns:"translateY",class:["transform"],type:"length",supportNegative:!0}]],["translate-x",[{scaleKey:"translate",ns:"translateX",class:["transform"],type:"length",supportNegative:!0}]],["skew",[{scaleKey:"skew",ns:"skew",class:["skew"],type:"angle",supportNegative:!0}]],["z",[{scaleKey:"zIndex",ns:"zIndex",class:["z-index"],type:"number",supportNegative:!0}]],["inset",[{scaleKey:"inset",ns:"inset",class:["inset"],type:"length",supportNegative:!0}]],["inset-x",[{scaleKey:"inset",ns:"insetX",class:["left","right"],type:"length",supportNegative:!0}]],["inset-y",[{scaleKey:"inset",ns:"insetY",class:["top","bottom"],type:"length",supportNegative:!0}]],["top",[{scaleKey:"inset",ns:"positionTop",class:["top"],type:"length",supportNegative:!0}]],["right",[{scaleKey:"inset",ns:"positionRight",class:["right"],type:"length",supportNegative:!0}]],["bottom",[{scaleKey:"inset",ns:"positionBottom",class:["bottom"],type:"length",supportNegative:!0}]],["left",[{scaleKey:"inset",ns:"positionLeft",class:["left"],type:"length",supportNegative:!0}]],["start",[{scaleKey:"inset",ns:"insetInlineStart",class:["inset-inline-start"],type:"length",supportNegative:!0}]],["end",[{scaleKey:"inset",ns:"insetInlineEnd",class:["inset-inline-end"],type:"length",supportNegative:!0}]],["order",[{scaleKey:"order",ns:"order",class:["order"],type:"length",supportNegative:!0}]],["blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["brightness",[{scaleKey:"brightness",ns:"brightness",class:["filter"],type:"number"}]],["contrast",[{scaleKey:"contrast",ns:"contrast",class:["filter"],type:"number"}]],["drop-shadow",[{scaleKey:"dropShadow",ns:"dropShadow",class:["filter"],type:"number"}]],["hue-rotate",[{scaleKey:"hueRotate",ns:"hueRotate",class:["filter"],type:"number"}]],["saturate",[{scaleKey:"saturate",ns:"saturate",class:["filter"],type:"number"}]],["backdrop-blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["backdrop-brightness",[{scaleKey:"backdropBrightness",ns:"backdropBrightness",class:["backdrop-filter"],type:"number"}]],["backdrop-contrast",[{scaleKey:"backdropContrast",ns:"backdropContrast",class:["backdrop-filter"],type:"number"}]],["backdrop-drop-shadow",[{scaleKey:"backdropDropShadow",ns:"backdropDropShadow",class:["backdrop-filter"],type:"number"}]],["backdrop-hue-rotate",[{scaleKey:"backdropHueRotate",ns:"backdropHueRotate",class:["backdrop-filter"],type:"number"}]],["backdrop-saturate",[{scaleKey:"backdropSaturate",ns:"backdropSaturate",class:["backdrop-filter"],type:"number"}]]]),aL=new Map([["border-solid",{class:["border-style"],value:"solid",ns:"borderStyle"}],["border-dashed",{class:["border-style"],value:"dashed",ns:"borderStyle"}],["border-dotted",{class:["border-style"],value:"dotted",ns:"borderStyle"}],["border-double",{class:["border-style"],value:"double",ns:"borderStyle"}],["border-none",{class:["border-style"],value:"none",ns:"borderStyle"}],["ring-inset",{class:["--tw-ring-inset"],value:"inset",ns:"ring"}],["divide-solid",{class:["divide-style"],value:"solid",ns:"divideStyle"}],["divide-dashed",{class:["divide-style"],value:"dashed",ns:"divideStyle"}],["divide-dotted",{class:["divide-style"],value:"dotted",ns:"divideStyle"}],["divide-double",{class:["divide-style"],value:"double",ns:"divideStyle"}],["divide-none",{class:["divide-style"],value:"none",ns:"divideStyle"}],["block",{class:["display"],value:"block",ns:"display"}],["inline-block",{class:["display"],value:"inline-block",ns:"display"}],["inline",{class:["display"],value:"inline",ns:"display"}],["flex",{class:["display"],value:"flex",ns:"display"}],["grid",{class:["display"],value:"grid",ns:"display"}],["hidden",{class:["display"],value:"none",ns:"display"}],["table",{class:["display"],value:"table",ns:"display"}],["table-row",{class:["display"],value:"table-row",ns:"display"}],["table-cell",{class:["display"],value:"table-cell",ns:"display"}],["contents",{class:["display"],value:"contents",ns:"display"}],["list-item",{class:["display"],value:"list-item",ns:"display"}],["flow-root",{class:["display"],value:"flow-root",ns:"display"}],["visible",{class:["visibility"],value:"visible",ns:"visibility"}],["invisible",{class:["visibility"],value:"hidden",ns:"visibility"}],["hyphens-none",{class:["hyphens"],value:"none",ns:"hyphens"}],["hyphens-manual",{class:["hyphens"],value:"manual",ns:"hyphens"}],["hyphens-auto",{class:["hyphens"],value:"auto",ns:"hyphens"}],["break-normal",{class:["word-break","overflow-wrap"],value:"normal",ns:"wordBreak"}],["break-words",{class:["overflow-wrap"],value:"break-word",ns:"wordBreak"}],["break-all",{class:["word-break"],value:"break-all",ns:"wordBreak"}],["break-keep",{class:["word-break"],value:"keep-all",ns:"wordBreak"}],["whitespace-normal",{class:["white-space"],value:"normal",ns:"whitespace"}],["whitespace-nowrap",{class:["white-space"],value:"nowrap",ns:"whitespace"}],["whitespace-pre",{class:["white-space"],value:"pre",ns:"whitespace"}],["whitespace-pre-line",{class:["white-space"],value:"pre-line",ns:"whitespace"}],["whitespace-pre-wrap",{class:["white-space"],value:"pre-wrap",ns:"whitespace"}],["whitespace-break-spaces",{class:["white-space"],value:"break-spaces",ns:"whitespace"}],["static",{class:["position"],value:"static",ns:"position"}],["fixed",{class:["position"],value:"fixed",ns:"position"}],["absolute",{class:["position"],value:"absolute",ns:"position"}],["relative",{class:["position"],value:"relative",ns:"position"}],["sticky",{class:["position"],value:"sticky",ns:"position"}],["overflow-auto",{class:["overflow"],value:"auto",ns:"overflow"}],["overflow-hidden",{class:["overflow"],value:"hidden",ns:"overflow"}],["overflow-visible",{class:["overflow"],value:"visible",ns:"overflow"}],["overflow-scroll",{class:["overflow"],value:"scroll",ns:"overflow"}],["overflow-x-auto",{class:["overflow-x"],value:"auto",ns:"overflowX"}],["overflow-x-hidden",{class:["overflow-x"],value:"hidden",ns:"overflowX"}],["overflow-x-visible",{class:["overflow-x"],value:"visible",ns:"overflowX"}],["overflow-x-scroll",{class:["overflow-x"],value:"scroll",ns:"overflowX"}],["overflow-y-auto",{class:["overflow-y"],value:"auto",ns:"overflowY"}],["overflow-y-hidden",{class:["overflow-y"],value:"hidden",ns:"overflowY"}],["overflow-y-visible",{class:["overflow-y"],value:"visible",ns:"overflowY"}],["overflow-y-scroll",{class:["overflow-y"],value:"scroll",ns:"overflowY"}],["text-left",{class:["text-align"],value:"left",ns:"textAlign"}],["text-center",{class:["text-align"],value:"center",ns:"textAlign"}],["text-right",{class:["text-align"],value:"right",ns:"textAlign"}],["text-justify",{class:["text-align"],value:"justify",ns:"textAlign"}],["text-start",{class:["text-align"],value:"start",ns:"textAlign"}],["text-end",{class:["text-align"],value:"end",ns:"textAlign"}],["underline",{class:["text-decoration-line"],value:"underline",ns:"textDecoration"}],["line-through",{class:["text-decoration-line"],value:"line-through",ns:"textDecoration"}],["overline",{class:["text-decoration-line"],value:"overline",ns:"textDecoration"}],["no-underline",{class:["text-decoration-line"],value:"none",ns:"textDecoration"}],["text-wrap",{class:["text-wrap"],value:"wrap",ns:"textWrap"}],["text-nowrap",{class:["text-wrap"],value:"nowrap",ns:"textWrap"}],["text-balance",{class:["text-wrap"],value:"balance",ns:"textWrap"}],["text-pretty",{class:["text-wrap"],value:"pretty",ns:"textWrap"}],["truncate",{class:["overflow","text-overflow","white-space"],value:"",ns:"TextOverflow"}],["text-ellipsis",{class:["text-overflow"],value:"ellipsis",ns:"textWrap"}],["text-clip",{class:["text-overflow"],value:"clip",ns:"textWrap"}],["uppercase",{class:["text-transform"],value:"uppercase",ns:"textTransform"}],["lowercase",{class:["text-transform"],value:"lowercase",ns:"textTransform"}],["capitalize",{class:["text-transform"],value:"capitalize",ns:"textTransform"}],["normal-case",{class:["text-transform"],value:"none",ns:"textTransform"}],["italic",{class:["font-style"],value:"italic",ns:"fontStyle"}],["not-italic",{class:["font-style"],value:"normal",ns:"fontStyle"}],["bg-fixed",{class:["background-attachment"],value:"fixed",ns:"backgroundAttachment"}],["bg-local",{class:["background-attachment"],value:"local",ns:"backgroundAttachment"}],["bg-scroll",{class:["background-attachment"],value:"scroll",ns:"backgroundAttachment"}],["bg-repeat",{class:["background-repeat"],value:"repeat",ns:"backgroundRepeat"}],["bg-no-repeat",{class:["background-repeat"],value:"no-repeat",ns:"backgroundRepeat"}],["bg-repeat-x",{class:["background-repeat"],value:"repeat-x",ns:"backgroundRepeat"}],["bg-repeat-y",{class:["background-repeat"],value:"repeat-y",ns:"backgroundRepeat"}],["bg-repeat-round",{class:["background-repeat"],value:"round",ns:"backgroundRepeat"}],["bg-repeat-space",{class:["background-repeat"],value:"space",ns:"backgroundRepeat"}],["bg-origin-border",{class:["background-origin"],value:"border",ns:"backgroundOrigin"}],["bg-origin-padding",{class:["background-origin"],value:"padding",ns:"backgroundOrigin"}],["bg-origin-content",{class:["background-origin"],value:"content",ns:"backgroundOrigin"}],["flex-row",{class:["flex-direction"],value:"row",ns:"flexDirection"}],["flex-row-reverse",{class:["flex-direction"],value:"row-reverse",ns:"flexDirection"}],["flex-col",{class:["flex-direction"],value:"column",ns:"flexDirection"}],["flex-col-reverse",{class:["flex-direction"],value:"column-reverse",ns:"flexDirection"}],["flex-wrap",{class:["flex-wrap"],value:"wrap",ns:"flexWrap"}],["flex-wrap-reverse",{class:["flex-wrap"],value:"wrap-reverse",ns:"flexWrap"}],["flex-nowrap",{class:["flex-wrap"],value:"nowrap",ns:"flexWrap"}],["items-start",{class:["align-items"],value:"flex-start",ns:"alignItems"}],["items-end",{class:["align-items"],value:"flex-end",ns:"alignItems"}],["items-center",{class:["align-items"],value:"center",ns:"alignItems"}],["items-baseline",{class:["align-items"],value:"baseline",ns:"alignItems"}],["items-stretch",{class:["align-items"],value:"stretch",ns:"alignItems"}],["justify-start",{class:["justify-content"],value:"flex-start",ns:"justifyContent"}],["justify-end",{class:["justify-content"],value:"flex-end",ns:"justifyContent"}],["justify-center",{class:["justify-content"],value:"center",ns:"justifyContent"}],["justify-between",{class:["justify-content"],value:"space-between",ns:"justifyContent"}],["justify-around",{class:["justify-content"],value:"space-around",ns:"justifyContent"}],["justify-evenly",{class:["justify-content"],value:"space-evenly",ns:"justifyContent"}],["grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["flex-grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["flex-grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["flex-shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["flex-shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["basis-auto",{class:["flex-basis"],value:"auto",ns:"flexBasis"}],["basis-full",{class:["flex-basis"],value:"100%",ns:"flexBasis"}],["grayscale",{class:["filter"],value:"grayscale(100%)",ns:"grayScale"}],["grayscale-0",{class:["filter"],value:"grayscale(0)",ns:"grayScale"}],["invert",{class:["filter"],value:"invert(100%)",ns:"invert"}],["invert-0",{class:["filter"],value:"invert(0)",ns:"invert"}],["sepia",{class:["filter"],value:"sepia(100%)",ns:"sepia"}],["sepia-0",{class:["filter"],value:"sepia(0)",ns:"sepia"}],["backdrop-grayscale",{class:["backdrop-filter"],value:"backdrop-grayscale(100%)",ns:"backdropGrayScale"}],["backdrop-grayscale-0",{class:["backdrop-filter"],value:"backdrop-grayscale(0)",ns:"backdropGrayScale"}],["backdrop-invert",{class:["backdrop-filter"],value:"backdrop-invert(100%)",ns:"backdrop-invert"}],["backdrop-invert-0",{class:["backdrop-filter"],value:"backdrop-invert(0)",ns:"backdrop-invert"}],["backdrop-sepia",{class:["backdrop-filter"],value:"backdrop-sepia(100%)",ns:"backdrop-sepia"}],["backdrop-sepia-0",{class:["backdrop-filter"],value:"backdrop-sepia(0)",ns:"backdrop-sepia"}],["ease-linear",{class:["transition-timing-function"],value:"linear",ns:"transitionTiming"}],["ease-in",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 1, 1)",ns:"transitionTiming"}],["ease-out",{class:["transition-timing-function"],value:"cubic-bezier(0, 0, 0.2, 1)",ns:"transitionTiming"}],["ease-in-out",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 0.2, 1)",ns:"transitionTiming"}],["object-contain",{class:["object"],value:"contain",ns:"objectFit"}],["object-cover",{class:["object"],value:"cover",ns:"objectFit"}],["object-fill",{class:["object"],value:"fill",ns:"objectFit"}],["object-none",{class:["object"],value:"none",ns:"objectFit"}],["object-scale-down",{class:["object"],value:"scale-down",ns:"objectFit"}]]),aM=new Map([["first","pseudo"],["last","pseudo"],["only","pseudo"],["odd","pseudo"],["even","pseudo"],["first-of-type","pseudo"],["last-of-type","pseudo"],["only-of-type","pseudo"],["visited","state"],["target","state"],["open","state"],["default","form"],["checked","form"],["indeterminate","form"],["placeholder-shown","form"],["autofill","form"],["optional","form"],["required","form"],["valid","form"],["invalid","form"],["in-range","form"],["out-of-range","form"],["read-only","form"],["empty","content"],["focus-within","interaction"],["hover","interaction"],["group-hover","interaction"],["focus","interaction"],["focus-visible","interaction"],["active","interaction"],["enabled","interaction"],["disabled","interaction"],["dark","system"]]);var aZ=s(50967);let aF=s.n(aZ)()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return aI()(e||{}).theme});class aU{addRoot(e){return this._classRoot=e,this}addValue(e){return this._classValue=e,this}appendModifier(e){return e&&(this._modifier="/"+e),this}appendVariants(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t)this._variants.push(e);return this}makeImportant(){return this.important=!0,this}makeNegative(){return this.negative=!0,this}toString(){let e=["media","system","interaction","pseudo","content","form","state","misc"],t=this._variants.sort((t,s)=>e.indexOf(t.type)-e.indexOf(s.type));return(t.length>0?t.map(e=>e.value).join(":")+":":"")+(this.important?"!":"")+(this.negative?"-":"")+this._classRoot+(this._classValue?"-"+this._classValue:"")+this._modifier}static makeInputArbitraryFormat(e){return e.replace(/\s/g,"_")}static makeArbitrary(e){return"["+aU.makeInputArbitraryFormat(e)+"]"}constructor(){this._classRoot="",this._classValue="",this._modifier="",this._variants=[],this.important=!1,this.negative=!1}}let aK=(e,t)=>{if(!e)return"";if("["===e[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1)),"%"===e[e.length-1])return aU.makeArbitrary(e);for(let[s,a]of Object.entries(t))if(s==e||a==e)return s;return(0===Number(e)||Number(e)>=1)&&100>=Number(e)?aU.makeArbitrary(e+"%"):Number(e)>=0&&1>=Number(e)?aU.makeArbitrary(e):""};var aV=s(88430);let aW=e=>{let t=(0,aV.Vi)(e),s=t.alpha();if(t.isValid())return{hex:t.alpha(1).toHex(),alpha:1!==s?s.toString():void 0}},aB=(e,t)=>{if(!e)return!1;for(let[s,a]of Object.entries(t)){if(("#fff"===a||"#000"===a)&&(0,aV.Vi)(e).isEqual(a))return s;for(let[t,n]of Object.entries(a))if(n===e)return"".concat(s,"-").concat(t)}return!1},aG=new Uint8Array(256);function aH(e,t){let s=0,a=[],n=0,l=e.length,r=t.charCodeAt(0);for(let t=0;t<l;t++){let i=e.charCodeAt(t);if(0===s&&i===r){a.push(e.slice(n,t)),n=t+1;continue}switch(i){case 92:t+=1;break;case 39:case 34:for(;++t<l;){let s=e.charCodeAt(t);if(92===s){t+=1;continue}if(s===i)break}break;case 40:aG[s]=41,s++;break;case 91:aG[s]=93,s++;break;case 123:aG[s]=125,s++;break;case 93:case 125:case 41:s>0&&i===aG[s-1]&&s--}}return a.push(e.slice(n)),a}let aq=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","currentcolor","canvas","canvastext","linktext","visitedtext","activetext","buttonface","buttontext","buttonborder","field","fieldtext","highlight","highlighttext","selecteditem","selecteditemtext","mark","marktext","graytext","accentcolor","accentcolortext"]),aX=/^(rgba?|hsla?|hwb|color|(ok)?(lab|lch)|light-dark|color-mix)\(/i;function aY(e,t){if(!e)return!1;let s=!1;if(t){let[a]=aH(e,"/");s=!!az()(t.colors,a.split("-").join("."))}return 35===e.charCodeAt(0)||aX.test(e)||aq.has(e.toLowerCase())||s}let a$=(e,t)=>{let s=aF(t),a=new aU,n=e.negative||!1;a.appendVariants(...e.variants||[]),e.important&&a.makeImportant(),"-"===e.value[0]&&(e.value=e.value.slice(1),n=!0);let[l]=Array.from(aL.entries()).filter(t=>{let[,s]=t;return s.ns===e.property}).find(t=>{let[,s]=t;return s.value===e.value})||[];if(l)return a.addRoot(l).toString();let[r,i=[]]=Array.from(aO.entries()).find(t=>{let[,s]=t;return s.some(t=>t.ns===e.property)})||[];if(!r)throw new aD(e.property);if(a.addRoot(r),aY(e.value,s)){let t=i.find(e=>"color"===e.type);if(!t)throw new aD(e.property);let n=az()(s[t.scaleKey||"colors"],e.value.split("-").join("."));if(n&&"object"!=typeof n)return a.appendModifier(aK(e.modifier,s.opacity)).addValue(e.value).toString();let l=aW(e.value);return l?a.appendModifier(aK(l.alpha||e.modifier,s.opacity)).addValue(aB(l.hex,s[t.scaleKey||"colors"])||aU.makeArbitrary(l.hex)).toString():""}let o=i.find(t=>t.ns===e.property);if(!o)throw new aD(e.property);let c=aJ(e.value,s[o.scaleKey]);return c&&(a.addValue(c),o.supportNegative&&n&&a.makeNegative()),a.toString()},aJ=(e,t)=>{if(e){for(let[s,a]of Object.entries(t))if(Array.isArray(a)&&(s===e||a.includes(e))||s===e||a===e)return"DEFAULT"!==s?s:void 0;return aU.makeArbitrary(e)}},aQ=["calc","min","max","clamp","mod","rem","sin","cos","tan","asin","acos","atan","atan2","pow","sqrt","hypot","log","exp","round"];function a0(e){return -1!==e.indexOf("(")&&aQ.some(t=>e.includes("".concat(t,"(")))}function a1(e){return e.startsWith("url(")?e:e=function(e){if(-1===e.indexOf("(")||!aQ.some(t=>e.includes(t)))return e;let t="",s=[];for(let a=0;a<e.length;a++){let n=e[a];if("("===n){t+=n;let l=a;for(let t=a-1;t>=0;t--){let s=e.charCodeAt(t);if(s>=48&&s<=57)l=t;else if(s>=97&&s<=122)l=t;else break}let r=e.slice(l,a);if(aQ.includes(r)||s[0]&&""===r){s.unshift(!0);continue}s.unshift(!1);continue}if(")"===n)t+=n,s.shift();else if(","===n&&s[0]){t+=", ";continue}else if(" "===n&&s[0]&&" "===t[t.length-1])continue;else if(("+"===n||"*"===n||"/"===n||"-"===n)&&s[0]){let s=t.trimEnd(),l=s[s.length-1];if("+"===l||"*"===l||"/"===l||"-"===l||"("===l||","===l){t+=n;continue}" "===e[a-1]?t+="".concat(n," "):t+=" ".concat(n," ")}else if(s[0]&&e.startsWith("to-zero",a)){let s=a;a+=7,t+=e.slice(s,a+1)}else t+=n}return t}(e=function(e){let t="";for(let s=0;s<e.length;s++){let a=e[s];"\\"===a&&"_"===e[s+1]?(t+="_",s+=1):"_"===a?t+=" ":t+=a}return t}(e))}let a2={color:aY,length:ns,percentage:ne,number:function(e){return a9.test(e)||a0(e)},url:a4,position:function(e){let t=0;for(let s of aH(e," ")){if("center"===s||"top"===s||"right"===s||"bottom"===s||"left"===s){t+=1;continue}if(!s.startsWith("var(")){if(ns(s)||ne(s)){t+=1;continue}return!1}}return t>0},"bg-size":function(e){let t=0;for(let s of aH(e,",")){if("cover"===s||"contain"===s){t+=1;continue}let e=aH(s," ");if(1!==e.length&&2!==e.length)return!1;e.every(e=>"auto"===e||ns(e)||ne(e))&&(t+=1)}return t>0},"line-width":function(e){return"thin"===e||"medium"===e||"thick"===e},image:function(e){let t=0;for(let s of aH(e,","))if(!s.startsWith("var(")){if(a4(s)||a6.test(s)||a3.test(s)){t+=1;continue}return!1}return t>0},"family-name":function(e){let t=0;for(let s of aH(e,",")){let e=s.charCodeAt(0);if(e>=48&&e<=57)return!1;s.startsWith("var(")||(t+=1)}return t>0},"generic-name":function(e){return"serif"===e||"sans-serif"===e||"monospace"===e||"cursive"===e||"fantasy"===e||"system-ui"===e||"ui-serif"===e||"ui-sans-serif"===e||"ui-monospace"===e||"ui-rounded"===e||"math"===e||"emoji"===e||"fangsong"===e},"absolute-size":function(e){return"xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"xxx-large"===e},"relative-size":function(e){return"larger"===e||"smaller"===e},angle:function(e){return na.test(e)},vector:function(e){return nn.test(e)},named:()=>!0},a5=/^url\(.*\)$/;function a4(e){return a5.test(e)}let a3=/^(?:element|image|cross-fade|image-set)\(/,a6=/^(repeating-)?(conic|linear|radial)-gradient\(/,a8=/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/,a9=new RegExp("^".concat(a8.source,"$")),a7=new RegExp("^".concat(a8.source,"%$"));function ne(e){return a7.test(e)||a0(e)}let nt=new RegExp("^".concat(a8.source,"(").concat("cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cqw|cqh|cqi|cqb|cqmin|cqmax",")$"));function ns(e){return nt.test(e)||a0(e)}let na=new RegExp("^".concat(a8.source,"(").concat("deg|rad|grad|turn",")$")),nn=new RegExp("^".concat(a8.source," +").concat(a8.source," +").concat(a8.source,"$"));class nl extends Error{constructor(e,t){super("Found a matched plugin `".concat(e,"`, but the value `").concat(t,"` could not matched. This could be due to a misspelling or the given value is not covered by tailwind.config file.")),this.name="PluginNotFoundException"}}let nr=(e,t,s)=>{if("color"===t.type){let a=az()(s,e.split("-").join("."));if(!a)throw new nl(t.ns,e);return"object"==typeof a&&a.DEFAULT&&(a=a.DEFAULT),{value:a,kind:t.type,class:t.class,raw:e}}let a=s[e];if(!a)throw new nl(t.ns,e);return{value:a,class:t.class,raw:e,kind:t.type}},ni=(e,t)=>{if(!e)return{root:"",kind:"error",message:"Empty input"};let s=aF(t),a={important:!1,negative:!1},n=aH(e,":"),l=n.pop(),r=[];for(let e=n.length-1;e>=0;--e){let t=function(e,t){if("["===e[0]&&"]"===e[e.length-1]){let t=e.slice(1,-1);return{kind:"arbitrary",type:"misc",value:t="-"===t[0]&&"-"===t[1]?"var(".concat(t,")"):a1(t)}}return Object.keys(t).includes(e)?{kind:"named",type:"media",value:e}:{kind:"named",type:aM.get(e)||"misc",value:e}}(n[e],s.screens);null!==t&&r.push(t)}"!"===l[0]&&(a.important=!0,l=l.slice(1)),"-"===l[0]&&(a.negative=!0,l=l.slice(1));let i=aL.get(l);if(i)return{root:l,kind:"named",property:i.ns,value:i.value,valueDef:{class:i.class,raw:l,kind:"named",value:i.value},variants:r,modifier:null,important:a.important,negative:a.negative,arbitrary:!1};let[o,c]=function(e,t){if(t.has(e))return[e,null];let s=e.lastIndexOf("-");if(-1===s)return"@"===e[0]&&t.has("@")?["@",e.slice(1)]:[null,null];do{let a=e.slice(0,s);if(t.has(a))return[a,e.slice(s+1)];s=e.lastIndexOf("-",s-1)}while(s>0);return[null,null]}(l,aO);if(!o)return{root:l,kind:"error",message:"Tailwindcss core plugin not found"};let d=aO.get(o),u=null,[m,p=null]=aH(c||"","/");if(p&&aY(m.replace(/[\[\]]/g,""),s)&&(u=aK(p,s.opacity)),m&&"["===m[0]&&"]"===m[m.length-1]){let e=m.slice(1,-1),t=function(e,t){if(e.startsWith("var("))return null;for(let a of t){var s;if(null===(s=a2[a])||void 0===s?void 0:s.call(a2,e))return a}return null}(e,Array.from(d.values()).map(e=>{let{type:t}=e;return t})),n=d.find(e=>e.type===t);if("color"===t){let t=aW(e);if(!t)return{root:l,kind:"error",message:"Color is not correct"};m=aB(t.hex,s[(null==n?void 0:n.scaleKey)||"colors"])||t.hex}else d.length>0&&(n=d.find(e=>e.type===t)||d.find(e=>"color"!==e.type));return e=a1(e),{root:o,kind:"functional",property:n.ns,value:e,valueDef:{value:e,class:n.class,raw:m,kind:t||"named"},variants:r,modifier:u,arbitrary:!0,important:a.important,negative:a.negative}}c||(c="DEFAULT");let h=d.find(e=>{let{scaleKey:t}=e;return c.split("-")[0]in s[t]||m in s[t]});if(!h)return{root:l,kind:"error",message:'found "'.concat(d.map(e=>e.ns).join(", "),'" plugins but unable to determine which one is matched to given value "').concat(c,'".')};let x=nr("color"===h.type?m:c,h,s[h.scaleKey]);return{root:o,kind:"functional",property:h.ns,value:x.value,valueDef:x,variants:r,modifier:u,important:a.important,negative:a.negative,arbitrary:!1}},no=e=>{var t;return Object.entries((null==e?void 0:null===(t=e.theme)||void 0===t?void 0:t.screens)||{}).sort((e,t)=>parseInt(t[1])-parseInt(e[1])).concat([["default","0px"]])},nc=(e,t)=>e.findIndex(e=>{let[s]=e;return s===t}),nd=(e,t)=>e>=t,nu=(e,t,s,a)=>{var n,l;let r=Array.isArray(t)?t:[t],i=no(s),o=r.map(e=>ni(e,s));if(o.some(e=>"error"===e.kind))return e;let c=e.split(/\s+/).filter(Boolean),d=c.filter(e=>{try{var t,n;let l=ni(e.trim(),s);if("error"===l.kind)return!0;return o.some(e=>"error"!==e.kind&&e.property===l.property)&&nd(nc(i,(null===(n=l.variants)||void 0===n?void 0:null===(t=n.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default"),nc(i,a||"default"))}catch(e){return!1}}),u=d.reduce((e,t)=>{var a,n,l,r;let o=ni(t.trim(),s),c=ni(e.trim(),s);return"error"===o.kind||"error"===c.kind?e:nc(i,(null===(n=o.variants)||void 0===n?void 0:null===(a=n.find(e=>"media"===e.type))||void 0===a?void 0:a.value)||"default")<nc(i,(null===(r=c.variants)||void 0===r?void 0:null===(l=r.find(e=>"media"===e.type))||void 0===l?void 0:l.value)||"default")?t:e},d[0])||"default",m=ni(u.trim(),s),p="error"!==m.kind&&(null===(l=m.variants)||void 0===l?void 0:null===(n=l.find(e=>"media"===e.type))||void 0===n?void 0:n.value)||"default";return[...c.filter(e=>{try{var t,a;let n=ni(e.trim(),s);if("error"===n.kind||!o.some(e=>"error"!==e.kind&&e.property===n.property))return!0;return((null===(a=n.variants)||void 0===a?void 0:null===(t=a.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default")!==(p||"default")}catch(e){return!0}}),p&&"default"!==p?r.map(e=>"".concat(p,":").concat(e)).join(" "):r.join(" ")].join(" ")},nm=(e,t,s,a)=>{let n=no(s),l=e.split(/\s+/g).map(e=>{try{var l;let r=ni(e.trim(),s);if("error"===r.kind||r.property!==t)return null;let i=null===(l=r.variants)||void 0===l?void 0:l.find(e=>"media"===e.type);if(i&&a){let e=nc(n,i.value),t=nc(n,a);if(-1===t&&(t=n.length),e<t)return null}return{parsed:r,breakpoint:(null==i?void 0:i.value)||"default"}}catch(e){return null}}).filter(e=>null!==e);if(0===l.length)return null;if(!a)return l.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:nc(n,t.breakpoint)<nc(n,e.breakpoint)?t:e,l[0]).parsed;let r=nc(n,a),i=l.filter(e=>"default"===e.breakpoint||nd(nc(n,e.breakpoint),r));return 0===i.length?null:i.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:nc(n,t.breakpoint)<nc(n,e.breakpoint)?t:e,i[0]).parsed},np=(e,t)=>{let s=no(e);if(!s)return"default";let a=t.getBoundingClientRect().width;for(let[e,t]of s){let s="string"==typeof t?parseInt(t):"number"==typeof t?t:null;if(null!==s&&a>=s)return e}return"default"},nh=e=>{if(void 0!==e)try{return JSON.parse(e)}catch(e){return}},nx=()=>{let{code:e}=(0,tm.v)(),t=(0,g.useMemo)(()=>{var t;return null===(t=e.find(e=>{let[t,s]=e;return(null==t?void 0:t.split("/").pop())==="tailwind.config.lov.json"}))||void 0===t?void 0:t[1]},[e]);return(0,g.useMemo)(()=>nh(t)||aI()({content:[]}),[t])},nf=e=>{let t=new Set,s=e.theme||{};for(let[e]of aL)t.add(e);for(let[e,a]of aO)for(let n of a){let a=s[n.scaleKey];if(a){for(let s of Object.keys(a))if("DEFAULT"===s)t.add(e);else{let a="".concat(e,"-").concat(s);t.add(a),n.supportNegative&&t.add("-".concat(a))}if("color"===n.type&&a){for(let[s,n]of Object.entries(a))if("object"==typeof n&&null!==n)for(let a of Object.keys(n))"DEFAULT"===a?t.add("".concat(e,"-").concat(s)):t.add("".concat(e,"-").concat(s,"-").concat(a))}}}return Array.from(t).sort()},ng=()=>{let e=nx(),t=(0,ew.f6)(e=>e.visibleMode),{twi:s}=(0,aP.XM)({config:e,options:{merge:!0}}),a=(0,g.useCallback)((s,a)=>{let n=(0,ew.XE)(t),l=document.querySelector("iframe#".concat(n));if(!l)return s;let r=np(e,l);return nu(s,a,e,r)},[e,t]),n=(0,g.useCallback)((s,a)=>{if(!s)return null;let n=(0,ew.XE)(t),l=document.querySelector("iframe#".concat(n));if(!l)return null;let r=np(e,l);return nm(s,a,e,r)},[e,t]);return{theme:null==e?void 0:e.theme,parse:t=>ni(t,e),classname:t=>a$(t,e),updateTwClassname:a,classNameToStyle:s,getRelevantTwClass:n}},nv=()=>{let e=nx(),t=(0,g.useMemo)(()=>nf(e),[e]);return{getAutocomplete:(0,g.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(!e.trim())return[];let a=e.toLowerCase();return t.sort((e,t)=>aT()(t,a)-aT()(e,a)).slice(0,s)},[t]),classNames:t}};var nb=s(5635),nj=s(85598),ny=s(94949);let nw=e=>{let{disabled:t,onImagesUploaded:s,onUrlSubmitted:a,maxSize:n=20971520,className:l}=e,{upload:r,download:i}=(0,ny.F)(),{authUser:o}=(0,b.Eu)(),c=(0,g.useCallback)(async e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),id:(0,sG.Z)(),type:e.type}));return(await Promise.all(t.map(async e=>{try{await r({fileName:e.id,file:e.file,continueOnError:!1});let{url:t}=await i({dir_name:o.uid,file_name:e.id});return{downloadUrl:t,name:"".concat(e.id,".").concat({"image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","image/webp":"webp"}[e.type]||"png"),type:e.type,id:e.id}}catch(t){return console.error("Failed to upload image ".concat(e.id,":"),t),null}}))).filter(e=>null!==e)},[r,i,o]),{getInputProps:d,open:u,getRootProps:m,isDragActive:h}=(0,nj.uI)({onDrop:async e=>{s(await c(e))},noClick:!0,noKeyboard:!0,maxSize:n,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}});(0,g.useEffect)(()=>{let e=async e=>{var t;let a=Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).filter(e=>e.type.startsWith("image/")).map(e=>e.getAsFile()).filter(e=>null!==e);a.length&&s(await c(a))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[s,c,o]);let[x,f]=(0,g.useState)("");return(0,p.jsxs)("div",{className:(0,ed.cn)("group relative rounded-lg bg-input [&:has(:focus)]:border-accent",{"pointer-events-none":t},l),children:[h&&(0,p.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center rounded-lg bg-background/80",children:(0,p.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-center",children:[(0,p.jsx)("p",{children:"Drop images here"}),(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Accepts PNG, JPG files up to ",n/1048576,"MB"]})]})}),(0,p.jsxs)("div",{...m(),children:[(0,p.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 border-none py-8 pt-10 text-sm disabled:cursor-not-allowed disabled:opacity-50",onClick:u,disabled:t,children:[(0,p.jsx)(eo.Z,{name:"add_photo_alternate"}),"Attach image"]}),(0,p.jsx)("input",{...d()})]}),(0,p.jsx)("form",{className:"flex gap-1 p-2",onSubmit:e=>{e.preventDefault(),a(e.target.elements.namedItem("image-url").value)},children:(0,p.jsxs)("div",{className:"relative w-full",children:[(0,p.jsx)(eJ.I,{name:"image-url",placeholder:"Image URL",className:"w-full bg-muted pr-16",disabled:t,onChange:e=>{f(e.target.value)},value:x}),(0,p.jsx)("div",{className:"absolute right-0 top-0 flex h-full items-center justify-center pr-1",children:(0,p.jsx)(G.z,{variant:"muted",type:"submit",size:"sm",className:(0,ed.cn)("opacity-0 transition-opacity",x?"opacity-100":"opacity-0"),disabled:t,children:"Add"})})]})})]})};var nN=s(76818);let nE=e=>{let{title:t,children:s,disabled:a,childrenWrapperClassName:n}=e;return(0,p.jsxs)("div",{className:(0,ed.cn)("grid grid-cols-[100px_1fr]",{hidden:a}),children:[(0,p.jsx)("p",{className:"my-auto text-sm font-medium text-muted-foreground",children:t}),(0,p.jsx)("div",{className:n,children:s})]})},nk=e=>{let{children:t,disabled:s}=e;return(0,p.jsx)("div",{className:(0,ed.cn)("border-px flex flex-col gap-1.5",{hidden:s}),children:t})},nC={content:"Content",margin:"Margin",background:"Background",borderRadius:"Border radius",image:"Image",resize:"Resize",fontSize:"Font size",textAlign:"Text align",padding:"Padding",fontWeight:"Font weight",color:"Color"},n_={spacing:[{key:"margin",title:nC.margin},{key:"padding",title:nC.padding}],typography:[{key:"fontSize",title:nC.fontSize},{key:"fontWeight",title:nC.fontWeight}]},nS=()=>{let e=au(),{selectedElements:t}=ak(),{history:s,setHistory:a,currentClassName:n,setCurrentClassName:l}=(0,tm.v)(),{setSelectedElements:r}=(0,tF.S9)(),i=ax(),{updateTwClassname:o,classNameToStyle:u,classname:m}=ng(),p=(0,g.useCallback)(e=>{a(t=>[...t,e].slice(-100))},[a]),h=(0,g.useCallback)(e=>{switch(e.type){case d.TEXT_CHANGE:i(e.element,t=>(0,am.Rw)(t,e.newText));break;case d.IMAGE_CHANGE:i(e.element,t=>(0,am.R5)(t,{src:e.newUrl}));break;case d.REMOVE_NODE:i(e.element,(e,t)=>{t.remove()});break;case d.CLASS_NAME_UPDATE:case d.CLASS_NAME_SET:i(e.element,t=>(0,am.R5)(t,{className:e.newClassName}));break;case d.DUPLICATE_NODE:i(e.element,(e,t)=>{t.insertAfter(e)})}p(e)},[i,p]),x=(0,g.useCallback)(s=>{switch(s.type){case d.TEXT_CHANGE:i(s.element,e=>(0,am.Rw)(e,s.oldText)),e({type:c.SET_ELEMENT_CONTENT,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},content:s.oldText}}),r(t.map(e=>e.filePath===s.element.filePath&&e.lineNumber===s.element.lineNumber?{...e,textContent:s.oldText}:e));break;case d.IMAGE_CHANGE:i(s.element,e=>(0,am.R5)(e,{src:s.oldUrl})),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},attrs:{src:s.oldUrl}}});break;case d.REMOVE_NODE:i(s.element,(e,t)=>{try{let e=JSON.parse(s.node);t.insertBefore(e)}catch(e){console.error("Failed to parse node",{item:s},e)}}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},attrs:{style:""}}});break;case d.CLASS_NAME_UPDATE:case d.CLASS_NAME_SET:i(s.element,e=>(0,am.R5)(e,{className:s.oldClassName})),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},attrs:{style:u(s.oldClassName)}}}),t.some(e=>e.filePath===s.element.filePath&&e.lineNumber===s.element.lineNumber)&&l(s.oldClassName);break;case d.DUPLICATE_NODE:i(s.element,(e,t)=>{let s=t.getNextSibling();s&&s.remove()})}},[i,e,r,t,u,l]),f=(0,g.useCallback)(()=>{let e=s[s.length-1];e&&(x(e),a(e=>e.slice(0,-1)))},[s,a,x]),v=(0,g.useCallback)((s,a)=>{let n=String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),l="";i(s,e=>{var t;l=(null===(t=e.children[0])||void 0===t?void 0:t.value)||""}),l!==n&&(h({type:d.TEXT_CHANGE,element:s,oldText:l,newText:n}),e({type:c.SET_ELEMENT_CONTENT,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col},content:n}}),r(t.map(e=>e.filePath===s.filePath&&e.lineNumber===s.lineNumber?{...e,textContent:n}:e)))},[h,e,t,r,i]),b=(0,g.useCallback)(function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,n="";i(t,e=>{var t,s;n=(null===(s=e.openingElement.attributes.find(e=>"JSXAttribute"===e.type&&"src"===e.name.name))||void 0===s?void 0:null===(t=s.value)||void 0===t?void 0:t.value)||""}),h({type:d.IMAGE_CHANGE,element:t,oldUrl:n,newUrl:s}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{src:a}}})},[h,i,e]),j=(0,g.useCallback)(t=>{_.ZP.capture("visual_edits:element_deleted"),e({type:c.GET_PARENT_ELEMENT,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}});let s="";i(t,e=>{s=(0,ap.default)(e).code}),h({type:d.REMOVE_NODE,element:t,node:s}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{style:"display: none;"}}})},[i,h,e]),y=(0,g.useCallback)(t=>{let{element:s,className:a,reset:n=!1}=t,l=null;i(s,e=>{l=(0,am.Xu)(e)}),h({type:d.CLASS_NAME_SET,element:s,oldClassName:l||"",newClassName:a}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col},attrs:{style:u(a),...n?{class:a}:{}}}})},[u,h,i,e]),w=(0,g.useCallback)(t=>{let{element:s,newClassNames:a,preview:l=!1}=t,r=null,m=null;return(i(s,e=>{null!==(r=(0,am.Xu)(e))&&(m=o(r,a))}),null===r||null===m)?n:(l||h({type:d.CLASS_NAME_UPDATE,element:s,oldClassName:r,newClassName:m}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col},attrs:{"data-lov-dirty":"true",style:u(m)+";"+u(a)}}}),m)},[u,n,h,i,e,o]),N=(0,g.useCallback)(e=>{h({type:d.DUPLICATE_NODE,element:e})},[h]),E=(0,g.useCallback)((e,t)=>{l((0,am.EE)(e,t))},[l]),k=(0,g.useCallback)(e=>{let{element:t,classObj:s,preview:a=!1}=e;try{let e=Array.isArray(s)?s.map(e=>m(e)):[m(s)],n=w({element:t,newClassNames:e,preview:a});return a||l(n),n}catch(e){return n}},[m,w,l,n]),C=(0,g.useCallback)(e=>{let{element:t,className:s,reset:a=!1}=e;y({element:t,className:s,reset:a}),l(s)},[y,l]);return{handleTextChange:v,handleImageChange:b,handleRemoveNode:j,updateElementClassName:w,setElementClassName:y,handleDuplicateNode:N,undoLastOperation:f,initializeClassName:E,handleUpdateClassName:k,handleUpdateClassNameAdvanced:C}};function nT(e){let{disabled:t,canEditText:s,element:a,onTextChange:n,imageUploadSection:l}=e,r=(0,nb.B)(a);return"img"===r?l:s?(0,p.jsx)(nE,{title:nC.content,disabled:"text"!==r&&"button"!==r,children:(0,p.jsx)(nN.g,{value:String(a.textContent||"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),disabled:!s||t,className:(0,ed.cn)("resize-none text-sm leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]","h-auto border bg-input focus:bg-input",!s&&"hidden"),placeholder:"Enter text here",onChange:e=>n(a,e.target.value)})}):"text"===r||"button"===r?(0,p.jsx)(nE,{title:nC.content,children:(0,p.jsx)("div",{className:"my-auto flex items-center justify-between",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Content linked to backend or code. Ask AI to edit."})})}):(0,p.jsx)("p",{children:"This element does not support text editing."})}var nR=s(92259),nI=s(82959),nP=s(18081),nA=s(93673),nz=s(9259);let nD=e=>{let{element:t,disabled:s}=e,{currentClassName:a,ast:n}=(0,tm.v)(),l=(0,nb.B)(t),{initializeClassName:r,handleUpdateClassName:i}=nS();(0,g.useEffect)(()=>{r(t,n)},[t,n,r]);let{getRelevantTwClass:o,parse:c,classname:d}=ng(),u=(0,g.useMemo)(()=>{var e,t,s,n,l,r,i,c,d,u,m,p;if(!a)return;let h=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},x=o(a,"padding"),f=o(a,"paddingY"),g=o(a,"paddingX");return{paddingTop:null!==(r=null!==(l=h(null===(e=o(a,"paddingTop"))||void 0===e?void 0:e.value))&&void 0!==l?l:h(null==f?void 0:f.value))&&void 0!==r?r:h(null==x?void 0:x.value),paddingBottom:null!==(c=null!==(i=h(null===(t=o(a,"paddingBottom"))||void 0===t?void 0:t.value))&&void 0!==i?i:h(null==f?void 0:f.value))&&void 0!==c?c:h(null==x?void 0:x.value),paddingLeft:null!==(u=null!==(d=h(null===(s=o(a,"paddingLeft"))||void 0===s?void 0:s.value))&&void 0!==d?d:h(null==g?void 0:g.value))&&void 0!==u?u:h(null==x?void 0:x.value),paddingRight:null!==(p=null!==(m=h(null===(n=o(a,"paddingRight"))||void 0===n?void 0:n.value))&&void 0!==m?m:h(null==g?void 0:g.value))&&void 0!==p?p:h(null==x?void 0:x.value)}},[o,a]),m=(0,g.useMemo)(()=>{var e,t,s,n,l,r,i,c,d,u,m,p;if(!a)return;let h=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},x=o(a,"margin"),f=o(a,"marginY"),g=o(a,"marginX");return{marginTop:null!==(r=null!==(l=h(null===(e=o(a,"marginTop"))||void 0===e?void 0:e.value))&&void 0!==l?l:h(null==f?void 0:f.value))&&void 0!==r?r:h(null==x?void 0:x.value),marginBottom:null!==(c=null!==(i=h(null===(t=o(a,"marginBottom"))||void 0===t?void 0:t.value))&&void 0!==i?i:h(null==f?void 0:f.value))&&void 0!==c?c:h(null==x?void 0:x.value),marginLeft:null!==(u=null!==(d=h(null===(s=o(a,"marginLeft"))||void 0===s?void 0:s.value))&&void 0!==d?d:h(null==g?void 0:g.value))&&void 0!==u?u:h(null==x?void 0:x.value),marginRight:null!==(p=null!==(m=h(null===(n=o(a,"marginRight"))||void 0===n?void 0:n.value))&&void 0!==m?m:h(null==g?void 0:g.value))&&void 0!==p?p:h(null==x?void 0:x.value)}},[o,a]),h={margin:{horizontal:{property:"marginX",icon:nI.Z,placeholder:"X margin",value:null==m?void 0:m.marginLeft},vertical:{property:"marginY",icon:nR.Z,placeholder:"Y margin",value:null==m?void 0:m.marginTop}},padding:{horizontal:{property:"paddingX",icon:nP.Z,placeholder:"X padding",value:null==u?void 0:u.paddingLeft},vertical:{property:"paddingY",icon:nA.Z,placeholder:"Y padding",value:null==u?void 0:u.paddingTop}}},x=(0,g.useRef)({}),f=(0,g.useCallback)(e=>{var s;let a=e.property,n=Date.now();x.current[a]&&cancelAnimationFrame(x.current[a].rafId);let r=()=>{let e=x.current[a];if(e){let s=c(d(e.immediateValue));if("error"===s.kind)return;let r=s.valueDef.raw,o=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===l&&r.split("-").length>1){let[e,t]=r.split("-"),s=parseInt(t)-100;if((s=100*Math.floor(s/100))>0){let t="".concat(e,"-").concat(s);o.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}i({element:t,classObj:o}),x.current[a].lastUpdateTime=n,delete x.current[a]}};x.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(s=x.current[a])||void 0===s?void 0:s.lastUpdateTime)||0},x.current[a].rafId=requestAnimationFrame(()=>{r()})},[d,t,l,i,c]),v=null!==a;return(0,p.jsx)(p.Fragment,{children:v?(0,p.jsx)(nk,{disabled:"img"===l,children:n_.spacing.map(e=>{var t,a;let n=h[e.key];return(0,p.jsxs)(nE,{title:e.title,childrenWrapperClassName:"flex gap-1",children:[(0,p.jsx)(nz.R,{max:240,className:"h-7 flex-grow rounded-md bg-input",inputClassName:"h-7 pl-7",value:null!==(t=n.horizontal.value)&&void 0!==t?t:0,placeholder:n.horizontal.placeholder,name:n.horizontal.property,disabled:s,"aria-label":"".concat(e.title," horizontal scrubber"),onChange:e=>n.horizontal.value!==e&&f({property:n.horizontal.property,value:"".concat(e,"px")}),leftIconClassName:"pl-1.5",leftIcon:(0,p.jsx)(n.horizontal.icon,{className:"size-4 fill-muted-foreground"})}),(0,p.jsx)(nz.R,{max:240,value:null!==(a=n.vertical.value)&&void 0!==a?a:0,className:"h-7 flex-grow rounded-md bg-input",inputClassName:"h-7 pl-7",placeholder:n.vertical.placeholder,name:n.vertical.property,disabled:s,"aria-label":"".concat(e.title," vertical scrubber"),onChange:e=>n.vertical.value!==e&&f({property:n.vertical.property,value:"".concat(e,"px")}),leftIconClassName:"pl-1.5",leftIcon:(0,p.jsx)(n.vertical.icon,{className:"size-4 fill-muted-foreground"})})]},e.key)})}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the spacing by prompting in the chat box."})})};var nO=s(40756),nL=s(27339),nM=s(64266),nZ=s(36254),nF=s(89651),nU=s(38846);let nK=e=>{let{size:t=.666,lightColor:s="#fff",darkColor:a="#ddd",...n}=e,l=t/2,r=(0,g.useId)();return(0,p.jsxs)("svg",{width:"100%",height:"100%",...n,children:[(0,p.jsx)("defs",{children:(0,p.jsxs)("pattern",{id:"".concat(r,"-transparent-pattern"),width:"".concat(t,"rem"),height:"".concat(t,"rem"),patternUnits:"userSpaceOnUse",children:[(0,p.jsx)("rect",{width:"".concat(t,"rem"),height:"".concat(t,"rem"),fill:s}),(0,p.jsx)("rect",{x:"0",width:"".concat(l,"rem"),height:"".concat(l,"rem"),y:"0",fill:a}),(0,p.jsx)("rect",{x:"".concat(l,"rem"),width:"".concat(l,"rem"),height:"".concat(l,"rem"),y:"".concat(l,"rem"),fill:a})]})}),(0,p.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,"-transparent-pattern)")})]})};var nV=s(26815);function nW(e){if(!e)return null;try{e=e.replace("#",""),(3===e.length||4===e.length)&&(e=e.split("").map(e=>e+e).join(""));let t=8===e.length,s=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16),l=t?parseInt(e.slice(6,8),16)/255:1;return{r:isNaN(s)?0:s,g:isNaN(a)?0:a,b:isNaN(n)?0:n,a:isNaN(l)?1:l}}catch(e){return null}}function nB(e,t,s,a){let n=e=>Math.round(e).toString(16).padStart(2,"0"),l=Math.round(255*a);return"#".concat(n(e)).concat(n(t)).concat(n(s)).concat(l<255?n(l):"")}function nG(e,t,s,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=Math.max(e/=255,t/=255,s/=255),r=Math.min(e,t,s),i=l-r,o=0,c=0===l?0:i/l;if(l===r)return{h:n,s:100*c,v:100*l,a};switch(l){case e:o=(t-s)/i+(t<s?6:0);break;case t:o=(s-e)/i+2;break;case s:o=(e-t)/i+4}return{h:360*(o/=6),s:100*c,v:100*l,a}}function nH(e,t,s,a){let n=0,l=0,r=0,i=Math.floor(6*(e/=360)),o=6*e-i,c=(s/=100)*(1-(t/=100)),d=s*(1-o*t),u=s*(1-(1-o)*t);switch(i%6){case 0:n=s,l=u,r=c;break;case 1:n=d,l=s,r=c;break;case 2:n=c,l=s,r=u;break;case 3:n=c,l=d,r=s;break;case 4:n=u,l=c,r=s;break;case 5:n=s,l=c,r=d}return{r:Math.round(255*n),g:Math.round(255*l),b:Math.round(255*r),a:a}}let nq=e=>{if(!e)return{singles:[],groups:[]};let t=[],s=[];for(let[a,n]of Object.entries(e))if("string"!=typeof n){let e=[];for(let[t,s]of Object.entries(n))"string"!=typeof s||s.includes("--")||e.push(["".concat(a,"-").concat(t),s]);e.length>0&&s.push([a,e])}else{if(n.includes("--"))continue;t.push([a,n])}return{singles:t.filter(e=>{let[t]=e;return["black","white"].includes(t)}),groups:s}},nX=g.createContext(null);function nY(e){let{children:t}=e,[s,a]=g.useState(null),n=g.useRef(null),l=g.useCallback(e=>{a(e),n.current=e},[]),r=g.useRef(null),i=g.useCallback(()=>{a(null)},[]);return(0,p.jsxs)(nX.Provider,{value:{showTooltip:l,hideTooltip:i},children:[t,(0,p.jsx)("div",{ref:r,className:(0,ed.cn)("pointer-events-none fixed h-fit w-fit rounded-md border bg-muted px-2 py-1 text-sm text-foreground shadow-sm transition-opacity duration-100 ease-out","bottom-4 right-4 whitespace-nowrap capitalize",s?"opacity-100":"opacity-0"),children:n.current})]})}let n$=e=>{let{color:t,onClick:s,name:a}=e,n=g.useContext(nX),l="transparent"===t?(0,p.jsx)(nK,{size:.666,lightColor:"#fff",darkColor:"#ddd"}):(0,p.jsx)("div",{className:"h-full w-full rounded-sm",style:{backgroundColor:t,boxShadow:"0px 0px 0px 1px hsl(0deg 0% 98% / 10%) inset"}});return(0,p.jsx)(G.z,{className:"h-8 w-8 overflow-hidden rounded-sm border-none bg-transparent p-0 ring-white hover:ring-1",onClick:s,onMouseOver:e=>{e.currentTarget.getBoundingClientRect(),null==n||n.showTooltip(a)},onMouseLeave:()=>null==n?void 0:n.hideTooltip(),children:l})},nJ=e=>{let{colors:t,onChange:s}=e,a=g.useMemo(()=>nq(t),[t]);return(0,p.jsx)(nY,{children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[a.groups.map(e=>{let[t,a]=e;return(0,p.jsxs)("div",{children:[(0,p.jsx)(nV.Label,{className:"block pb-2 text-sm capitalize",children:t}),(0,p.jsx)("div",{className:"flex flex-row flex-wrap gap-1.5",children:a.map(e=>{let[t,a]=e;return(0,p.jsx)(n$,{color:a,onClick:()=>s(t),name:t},t)})})]},t)}),(0,p.jsxs)("div",{children:[(0,p.jsx)(nV.Label,{className:"block pb-4 text-sm capitalize",children:"Other Colors"}),(0,p.jsxs)("div",{className:"flex flex-row flex-wrap gap-1.5",children:[a.singles.map(e=>{let[t,a]=e;return(0,p.jsx)(n$,{color:a,onClick:()=>s(t),name:t},t)}),(0,p.jsx)(n$,{color:"transparent",onClick:()=>s("transparent"),name:"transparent"}),(0,p.jsx)(n$,{color:"black",onClick:()=>s("inherit"),name:"inherit"})]})]})]})})};function nQ(e){let{color:t,onChange:s,presetColors:a,children:n,disabled:l=!1}=e,[r,i]=g.useState(()=>nW(t)||{r:0,g:0,b:0,a:1}),[o,c]=g.useState(()=>nG(r.r,r.g,r.b,r.a,0)),[d,u]=g.useState(t),[m,h]=g.useState(!1);g.useEffect(()=>{if(t===d)return;let e=nW(t)||{r:0,g:0,b:0,a:1},s=nG(e.r,e.g,e.b,e.a,o.h);i(e),c(s),u(t)},[t,d,o.h]);let x=g.useRef(null),[f,v]=g.useState(!1),b=g.useCallback(e=>{var t;let a=null===(t=x.current)||void 0===t?void 0:t.getBoundingClientRect();if(!a)return;let n=Math.min(Math.max(0,e.clientX-a.left),a.width),l=Math.min(Math.max(0,e.clientY-a.top),a.height),r=n/a.width*100,d=100-l/a.height*100,u=nH(o.h,r,d,o.a);i(u),c({...o,s:r,v:d,a:o.a}),s(nB(u.r,u.g,u.b,u.a))},[o,s]);g.useEffect(()=>{let e=e=>{f&&b(e)},t=()=>{v(!1),document.body.classList.remove("select-none")};return f&&(document.body.classList.add("select-none"),window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{document.body.classList.remove("select-none"),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[f,b]);let j=g.useCallback(e=>{let[t]=e;c({...o,h:t});let a=nH(t,o.s,o.v,o.a);i(a),s(nB(a.r,a.g,a.b,a.a))},[o,s]),y=g.useCallback(e=>{let[t]=e;c({...o,a:t});let a=nH(o.h,o.s,o.v,t);i(a),s(nB(a.r,a.g,a.b,a.a))},[o,s]);return(0,p.jsxs)(eQ.J2,{open:m,onOpenChange:l?void 0:h,children:[(0,p.jsx)(eQ.xo,{disabled:l,asChild:!0,children:n}),(0,p.jsx)(eQ.yk,{className:"mb-0 flex w-[285px] flex-col overflow-y-hidden rounded-lg border border-muted-border bg-popover px-0 pb-0 pt-0 shadow-lg",style:{maxHeight:"var(--radix-popover-content-available-height)"},collisionPadding:5,onKeyDown:e=>{"Escape"===e.key&&(h(!1),e.preventDefault(),e.stopPropagation())},children:(0,p.jsxs)(td.mQ,{defaultValue:"styles",className:"flex min-h-0 flex-1 flex-col",children:[(0,p.jsxs)(td.dr,{className:"my-1 w-full px-4",children:[(0,p.jsx)(td.SP,{disabled:l,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"styles",children:"Styles"}),(0,p.jsx)(td.SP,{disabled:l,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"custom",children:"Custom"})]}),(0,p.jsx)(td.nU,{value:"styles",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,p.jsx)(nY,{children:!!a&&(0,p.jsx)(nJ,{colors:a,onChange:s})})}),(0,p.jsx)(td.nU,{value:"custom",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{ref:x,className:"relative h-56 w-full rounded-md ".concat(l?"cursor-not-allowed opacity-50":"cursor-default"),style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)"),backgroundImage:"linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)"},onMouseDown:e=>{l||(v(!0),b(e))},children:(0,p.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-md shadow-muted/50",style:{left:"".concat(o.s,"%"),top:"".concat(100-o.v,"%"),backgroundColor:"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b)}})}),(0,p.jsxs)(nU.fC,{disabled:l,min:0,max:360,step:1,value:[o.h],onValueChange:j,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",children:[(0,p.jsx)(nU.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full bg-primary/20",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},children:(0,p.jsx)(nU.e6,{className:"absolute h-full bg-primary opacity-0"})}),(0,p.jsx)(nU.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-background shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)")}})]}),(0,p.jsxs)(nU.fC,{disabled:l,min:0,max:1,step:.01,value:[o.a],onValueChange:y,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",style:{"--value":nB(r.r,r.g,r.b,1)},children:[(0,p.jsxs)(nU.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(nK,{size:.666,lightColor:"#fff",darkColor:"#ddd"})}),(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(to right, transparent 0%, ".concat(nB(r.r,r.g,r.b,1)," 100%)")}})})]}),(0,p.jsx)(nU.bU,{className:"relative block h-4 w-4 rounded-full border-2 border-primary bg-white shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",children:(0,p.jsx)("span",{className:"absolute inset-0 rounded-full",style:{backgroundColor:nB(r.r,r.g,r.b,o.a)}})})]})]}),(0,p.jsx)("div",{className:"grid gap-2",children:(0,p.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,p.jsxs)("div",{children:[(0,p.jsx)(nV.Label,{className:"text-xs",htmlFor:"hex",children:"Hex"}),(0,p.jsx)(eJ.I,{id:"hex",disabled:l,value:d,onChange:e=>{if(l)return;let t=e.target.value;u(t);let a=nW(t);a&&(i(a),c(nG(a.r,a.g,a.b,a.a,0)),s(t))},className:"h-8 bg-input"})]})})})]})})]})})]})}var n0=s(74991);let n1=e=>{var t;let{inputValue:s,cursorPosition:a}=e;if(!s.trim()||null===a)return null;let n=s.substring(0,a),l=s.substring(a),r=n.split(/\s+/),i=(r[r.length-1]||"")+((null===(t=l.match(/^[^\s]*/))||void 0===t?void 0:t[0])||"");if(0===i.length)return null;let o=i.lastIndexOf(":");if(-1!==o){let e=i.substring(0,o+1),t=i.substring(o+1),s=t.length>0;return{completeWord:i,hasModifier:!0,modifier:e,classAfterColon:t,hasClassAfterColon:s}}return{completeWord:i,hasModifier:!1,modifier:"",classAfterColon:"",hasClassAfterColon:!1}},n2=e=>{let{wordInfo:t,getAutocomplete:s,limit:a}=e;if(!t)return{suggestions:[],shouldShow:!1};let{hasModifier:n,modifier:l,classAfterColon:r,hasClassAfterColon:i,completeWord:o}=t;if(n){if(i){let e=s(r,a).map(e=>l+e);return{suggestions:e,shouldShow:e.length>0}}return{suggestions:[],shouldShow:!1}}{let e=s(o,a);return{suggestions:e,shouldShow:e.length>0}}},n5=e=>{var t;let{element:s,currentClassName:a,disabled:n,isOpen:l,onUpdateClassName:r}=e,{getAutocomplete:i}=nv(),[o,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)(""),[m,h]=(0,g.useState)(null),[x,f]=(0,g.useState)(""),v=(0,g.useRef)(null),b=(0,g.useRef)(null),j=(0,g.useRef)([]),y=(0,g.useCallback)(e=>{f(e)},[]),w=(0,g.useCallback)(()=>{let e=v.current;e&&h(e.selectionStart||0)},[]);(0,g.useEffect)(()=>{let e=e=>{let t=e.target,s=b.current;!s||s.contains(t)||t instanceof Element&&(t.closest('[role="dialog"]')||t.closest("[cmdk-root]")||t.closest("[data-radix-popper-content-wrapper]"))||c(!1)};if(o)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);let N=(0,g.useMemo)(()=>n2({wordInfo:n1({inputValue:d,cursorPosition:m}),getAutocomplete:i,limit:10}).suggestions,[d,m,i]),E=(0,g.useCallback)(e=>{let t=v.current;if(!t||null===m)return;let a=d.substring(0,m),n=d.substring(m),l=a.split(/\s+/),i=l[l.length-1]||"",o=n.match(/^[^\s]*/),p=(null==o?void 0:o[0])||"",x=n.substring(p.length),f=a.substring(0,a.length-i.length),g=(f+e+" "+x).replace(/\s+/g," ");u(g),r({element:s,className:g}),c(!1),setTimeout(()=>{t.focus();let s=f.length+e.length+1;t.setSelectionRange(s,s),h(s)},0)},[d,m,s,r]),k=(0,g.useCallback)(()=>{c(n2({wordInfo:n1({inputValue:d,cursorPosition:m}),getAutocomplete:i,limit:10}).shouldShow)},[d,m,i]);(0,g.useEffect)(()=>{u(a||"")},[a]),(0,g.useEffect)(()=>{k()},[k]),(0,g.useEffect)(()=>{o&&N.length>0?f(N[0]):f("")},[o,N]);let C=(0,g.useMemo)(()=>N.indexOf(x),[N,x]);return(0,g.useEffect)(()=>{if(C>=0&&j.current[C]){var e;null===(e=j.current[C])||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[C]),(0,p.jsx)(eU.E.div,{initial:{opacity:0,height:0},animate:{opacity:l?1:0,height:l?"auto":0},transition:{duration:.15,bounce:0},className:"mb-3 flex flex-row gap-2",children:(0,p.jsx)("div",{ref:b,className:"relative w-full pt-2",children:(0,p.jsxs)(eQ.J2,{open:!0,children:[(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(nN.g,{ref:v,disabled:n,value:d,className:"w-full !resize-none bg-input outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-offset-0",placeholder:"Enter Tailwind classes...",onChange:e=>{let t=e.target.value;u(t),r({element:s,className:t}),h(e.target.selectionStart||0)},onKeyUp:w,onClick:w,onSelect:w,onKeyDown:e=>{if("Escape"===e.key)c(!1);else if("Enter"===e.key)x&&N.includes(x)&&(e.preventDefault(),E(x));else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t=(N.indexOf(x)+("ArrowDown"===e.key?1:-1)+N.length)%N.length;y(N[t]||"")}setTimeout(w,0)},onFocus:e=>{h(e.currentTarget.selectionStart||0)}})}),(0,p.jsx)(eQ.yk,{className:(0,ed.cn)("max-h-40 w-full overflow-y-auto p-0",{hidden:!o}),side:"bottom",align:"start",style:{width:null===(t=v.current)||void 0===t?void 0:t.offsetWidth},children:(0,p.jsx)(e$.mY,{autoFocus:!1,value:x,onValueChange:y,children:(0,p.jsx)(e$.e8,{children:(0,p.jsx)(e$.fu,{children:N.map((e,t)=>(0,p.jsx)("div",{ref:e=>{j.current[t]=e},children:(0,p.jsx)(e$.di,{value:e,onSelect:()=>E(e),children:(0,p.jsx)("span",{className:"text-xs",children:e})})},e))})})})})]})})})},n4=(e,t,s)=>{let{setActiveView:a}=(0,z.pE)(),{openFileAtLine:n,openFileAtLineRange:l}=(0,tf.r)(),{hideVisualEditsPanel:r}=(0,tF.S9)();return(0,g.useCallback)(()=>{if(!e.filePath)return;a("dev-mode");let i=(0,am.xA)(e,t);i?l(e.filePath,i.startLine,i.endLine):n(e.filePath,e.lineNumber),(null==s?void 0:s.hidePanel)&&r()},[e,a,t,null==s?void 0:s.hidePanel,l,n,r])},n3=e=>{let t,s;if(!e)return;let a=1;if(e.modifier){var n,l;a=(null===(n=e.modifier)||void 0===n?void 0:n.startsWith("["))&&(null===(l=e.modifier)||void 0===l?void 0:l.endsWith("]"))?parseFloat(e.modifier.replace(/[\[\]]/g,"")):parseInt(e.modifier)/100}if("inherit"===e.valueDef.raw)return;"transparent"===e.valueDef.raw&&(a=0),e.valueDef.raw.startsWith("#")?s=e.valueDef.raw:(t=e.valueDef.raw,s=e.value);let r=nW(s);if(!r)return{name:t,hex:void 0};let i=nB(r.r,r.g,r.b,a);return{name:t||i,hex:i,hexWithoutAlpha:nB(r.r,r.g,r.b,1)}},n6={fontSize:{xs:"XS",base:"Body",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL","4xl":"4XL","5xl":"5XL","6xl":"6XL","7xl":"7XL","8xl":"8XL","9xl":"9XL"},borderRadius:{none:"None",DEFAULT:"Default",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL",full:"Full"}},n8=e=>{var t,s;let{element:a,disabled:n,immediateValues:l,debouncedOnClassNameUpdate:r,onSelectParent:i,isWaitingForLivePreviewToStart:o}=e,{currentClassName:c,ast:d}=(0,tm.v)(),u=(0,nb.B)(a),{handleUpdateClassName:m,handleUpdateClassNameAdvanced:h}=nS(),{theme:x,getRelevantTwClass:f}=ng(),v=n4(a,d,{hidePanel:!0}),b={fontSize:{property:"fontSize",placeholder:"Select font size",getValue:(e,t)=>{var s;return(null===(s=t(e,"fontSize"))||void 0===s?void 0:s.valueDef.raw)||"base"},options:e=>Object.entries((null==e?void 0:e.fontSize)||{}),nameMap:n6.fontSize},fontWeight:{property:"fontWeight",placeholder:"Select weight",getValue:(e,t)=>{var s;return null===(s=t(e,"fontWeight"))||void 0===s?void 0:s.valueDef.raw},options:e=>Object.entries((null==e?void 0:e.fontWeight)||{}).filter(e=>{let[t]=e;return"black"!==t}),nameMap:null}},j=n3(f(c,"textColor")),y=n3(f(c,"backgroundColor")),[w,N]=(0,nF.Z)("lov_vis_advancedOpen",{defaultValue:!1}),E=(0,g.useCallback)((e,t)=>{var s;return null!==(s=l[e])&&void 0!==s?s:t},[l]),k=null===(t=f(c,"textAlign"))||void 0===t?void 0:t.value,C=null!==c;return(0,p.jsx)(p.Fragment,{children:C?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-grow flex-col gap-2",children:[(0,p.jsxs)(nk,{disabled:"text"!==u&&"button"!==u,children:[n_.typography.map(e=>{let t=b[e.key];return(0,p.jsx)(nE,{title:e.title,children:(0,p.jsxs)(a_.Ph,{name:t.property,disabled:n,onValueChange:e=>{e&&(_.ZP.capture("visual_edits:".concat(t.property,"_changed")),r({property:t.property,value:e}))},onOpenChange:e=>{e||m({element:a,classObj:[{property:t.property,value:t.getValue(c,f)}]})},value:t.getValue(c,f),children:[(0,p.jsx)(a_.i4,{className:"h-7 bg-input",name:t.property,"aria-label":"".concat(e.title," selector"),children:(0,p.jsx)(a_.ki,{placeholder:t.placeholder})}),(0,p.jsx)(a_.Bw,{children:t.options(x).map(e=>{var s;let[n,l]=e;return(0,p.jsx)(a_.Ql,{"data-value":n,value:n,onFocus:e=>{let s=e.target.getAttribute("data-value");s&&requestAnimationFrame(()=>{m({element:a,classObj:[{property:t.property,value:s}],preview:!0})})},children:t.nameMap?null!==(s=t.nameMap[n])&&void 0!==s?s:n:(0,p.jsx)("span",{className:"capitalize",children:n})},n)})})]})},e.key)}),(0,p.jsx)(nE,{title:nC.color,children:(0,p.jsx)(nQ,{disabled:n,presetColors:null==x?void 0:x.colors,color:E("textColor",null==j?void 0:j.hex)||"transparent",onChange:e=>{e&&(_.ZP.capture("visual_edits:text_color_changed"),r({property:"textColor",value:e||"inherit"}))},children:(0,p.jsxs)(G.z,{variant:"outline",disabled:n,className:"flex h-7 w-full justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,p.jsxs)("div",{className:"relative mr-1 h-4 w-4 shrink-0 overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(nK,{})}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==j?void 0:j.hexWithoutAlpha}}),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==j?void 0:j.hex}})]}),(0,p.jsx)("span",{className:"truncate",children:(null==j?void 0:j.name)||"Inherit"})]})},"".concat(a.filePath,":").concat(a.lineNumber))}),(0,p.jsx)(nE,{title:nC.textAlign,children:(0,p.jsxs)(n0.E,{className:"flex flex-row justify-end gap-1",value:k,onValueChange:e=>r({property:"textAlign",value:e}),children:[(0,p.jsxs)(nV.Label,{title:"Left",children:[(0,p.jsx)(n0.m,{value:"left",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(G.z,{variant:"outline",className:(0,ed.cn)("bg-input p-2",{"bg-accent":"left"===k}),onClick:()=>r({property:"textAlign",value:"left"}),children:(0,p.jsx)(nM.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(nV.Label,{title:"Center",children:[(0,p.jsx)(n0.m,{value:"center",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(G.z,{variant:"outline",className:(0,ed.cn)("bg-input p-1.5",{"bg-accent":"center"===k}),onClick:()=>r({property:"textAlign",value:"center"}),children:(0,p.jsx)(nO.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(nV.Label,{title:"Right",children:[(0,p.jsx)(n0.m,{value:"right",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(G.z,{variant:"outline",className:(0,ed.cn)("bg-input p-2",{"bg-accent":"right"===k}),onClick:()=>r({property:"textAlign",value:"right"}),children:(0,p.jsx)(nZ.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(nV.Label,{title:"Justify",children:[(0,p.jsx)(n0.m,{value:"justify",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(G.z,{variant:"outline",className:(0,ed.cn)("bg-input p-2",{"bg-accent":"justify"===k}),onClick:()=>r({property:"textAlign",value:"justify"}),children:(0,p.jsx)(nL.Z,{className:"size-4 fill-muted-foreground"})})]})]})})]}),(0,p.jsxs)(nk,{disabled:"div"!==u&&"button"!==u,children:[(0,p.jsx)(nE,{title:nC.background,children:(0,p.jsx)(nQ,{disabled:n,color:E("backgroundColor",null==y?void 0:y.hex)||"transparent",onChange:e=>{e&&(_.ZP.capture("visual_edits:background_color_changed"),r({property:"backgroundColor",value:e||"inherit"}))},presetColors:null==x?void 0:x.colors,children:(0,p.jsxs)(G.z,{variant:"outline",disabled:n,className:"flex h-9 w-full items-center justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,p.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(nK,{})}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==y?void 0:y.hexWithoutAlpha}}),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==y?void 0:y.hex}})]}),(0,p.jsx)("span",{className:"truncate",children:(null==y?void 0:y.name)||"Inherit"})]})},"".concat(a.filePath,":").concat(a.lineNumber))}),(0,p.jsx)(nE,{title:nC.borderRadius,children:(0,p.jsxs)(a_.Ph,{disabled:n,onValueChange:e=>e&&r({property:"borderRadius",value:e}),value:(null===(s=f(c,"borderRadius"))||void 0===s?void 0:s.valueDef.raw)||"none",children:[(0,p.jsx)(a_.i4,{className:"h-7 bg-input hover:bg-input",children:(0,p.jsx)(a_.ki,{placeholder:"Select border radius"})}),(0,p.jsx)(a_.Bw,{children:Object.entries((null==x?void 0:x.borderRadius)||{}).map(e=>{var t;let[s,a]=e;return(0,p.jsx)(a_.Ql,{value:s,children:null!==(t=n6.borderRadius[s])&&void 0!==t?t:"Default"},s)})})]})})]})]}),(0,p.jsxs)("div",{className:(0,ed.cn)("mt-4 flex flex-row justify-between",{"pb-3":!w}),children:[(0,p.jsxs)(G.z,{variant:"ghost",size:"sm",className:"h-6 py-0.5 pl-0.5 text-sm transition duration-300 hover:bg-secondary",onClick:()=>{N(!w),_.ZP.capture("visual_edits:advanced_clicked")},children:[(0,p.jsx)(eo.Z,{name:"chevron_right",size:"small",className:(0,ed.cn)("transition-transform duration-150 ease-in-out",{"rotate-90":w})}),"Advanced"]}),(0,p.jsx)("div",{className:(0,ed.cn)("flex flex-row gap-2",{"opacity-0":!w}),children:(0,p.jsxs)(ec.u,{instant:!0,children:[(0,p.jsx)(ec.aJ,{children:(0,p.jsx)(eo.Z,{name:"help",size:"small",className:"text-muted-foreground"})}),(0,p.jsx)(ec._v,{children:(0,p.jsx)("p",{children:"Enter custom Tailwind classes"})})]})})]}),w&&(0,p.jsx)(n5,{element:a,currentClassName:c,disabled:n,isOpen:w,onUpdateClassName:h}),(0,p.jsxs)(G.z,{className:"flex w-full items-center justify-start pl-2",onClick:i,variant:"ghost",children:[(0,p.jsx)(eo.Z,{name:"ink_selection",size:"small"}),"Select parent"]}),a.filePath&&(0,p.jsxs)(G.z,{variant:"ghost",size:"icon-sm",disabled:o,onClick:v,type:"button",className:"mt-1 flex w-full items-center justify-start pl-2",children:[(0,p.jsx)(eo.Z,{name:"code",size:"small"}),"Go to code"]})]}):(0,p.jsx)("p",{children:"Change the styles by prompting in the chat box."})})};function n9(e){let{element:t,canEdit:s,isSaving:a,handleRemoveNode:n,isDisabled:l}=e;return(0,p.jsxs)(H.Vq,{children:[(0,p.jsx)(H.hg,{children:(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(G.z,{disabled:!s||a||l,variant:"ghost",size:"icon-sm","aria-label":"quick actions",className:"hover:bg-destructive",children:(0,p.jsx)(eo.Z,{name:"delete",size:"small",className:"size-6 text-destructive-foreground"})})}),(0,p.jsx)(ec._v,{children:(0,p.jsx)("p",{children:"Delete element"})})]})}),(0,p.jsx)(H.cZ,{className:"p-4",size:"sm",children:(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{children:"Delete Element"}),(0,p.jsx)(H.Be,{children:"Are you sure you want to delete this element?"}),(0,p.jsxs)(H.cN,{className:"flex gap-2 pt-4",children:[(0,p.jsx)(H.GG,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"outline",children:"Cancel"})}),(0,p.jsx)(H.GG,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"destructive",onClick:()=>n(t),children:"Delete"})})]})]})})]})}function n7(e){var t;let{element:s,canEdit:a,isSaving:n}=e,l=au(),[r,i]=(0,g.useState)({}),[o,d]=(0,g.useState)(null),{authUser:u}=(0,b.Eu)(),{ast:m,currentClassName:h}=(0,tm.v)(),{handleRemoveNode:x,handleDuplicateNode:f,undoLastOperation:v,initializeClassName:j,handleTextChange:y,handleImageChange:w,handleUpdateClassName:N}=nS(),{getRelevantTwClass:E,parse:k,classname:C}=ng(),S=(0,g.useRef)({});(0,g.useEffect)(()=>{j(s,m)},[s,m,j]),(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,f,x,v]);let T=(0,tc.A7)(e=>e.addUpload),R=(0,nb.B)(s),I=n||!a||null===h,P=(0,g.useCallback)(e=>{var t;let a=e.property,n=Date.now();i(t=>({...t,[a]:e.value})),S.current[a]&&cancelAnimationFrame(S.current[a].rafId);let l=()=>{let e=S.current[a];if(e){let t=k(C(e.immediateValue));if("error"===t.kind)return;let l=t.valueDef.raw,r=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===R&&l.split("-").length>1){let[e,t]=l.split("-"),s=parseInt(t)-100;if((s=100*Math.floor(s/100))>0){let t="".concat(e,"-").concat(s);r.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}N({element:s,classObj:r}),S.current[a].lastUpdateTime=n,delete S.current[a]}};S.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(t=S.current[a])||void 0===t?void 0:t.lastUpdateTime)||0},S.current[a].rafId=requestAnimationFrame(()=>{l()})},[C,s,R,N,k]),A=(0,ew.f6)(e=>"live"!==e.visibleMode&&"live"===e.targetMode),{hasInitialCode:z}=(0,tm.v)(),D=A||!z,O=(0,p.jsxs)(nk,{disabled:"img"!==R,children:[(0,p.jsx)(nE,{title:nC.image,children:(0,am.cB)(s,m,"src")?(0,p.jsx)(nw,{disabled:I||!(0,am.cB)(s,m,"src"),onUrlSubmitted:e=>w(s,e),onImagesUploaded:e=>{e.length>0&&(_.ZP.capture("visual_edits:image_uploaded"),T({dir_name:u.uid,file_name:e[0].name,type:e[0].type,id:e[0].id}),w(s,"/lovable-uploads/".concat(e[0].name),e[0].downloadUrl))}}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"This element contains dynamic elements and its image cannot be manually edited. Please use the chat to change the image."})}),(0,p.jsx)(nE,{title:nC.resize,children:(0,p.jsxs)(a_.Ph,{disabled:I,onValueChange:e=>e&&P({property:"objectFit",value:e}),value:((null===(t=E(h,"objectFit"))||void 0===t?void 0:t.valueDef.raw)||"object-none").replace("object-",""),children:[(0,p.jsx)(a_.i4,{className:"bg-input",children:(0,p.jsx)(a_.ki,{placeholder:"Select border radius"})}),(0,p.jsxs)(a_.Bw,{className:"bg-popover",children:[(0,p.jsx)(a_.Ql,{value:"contain",children:"Contain"}),(0,p.jsx)(a_.Ql,{value:"cover",children:"Cover"}),(0,p.jsx)(a_.Ql,{value:"fill",children:"Fill"}),(0,p.jsx)(a_.Ql,{value:"none",children:"None"}),(0,p.jsx)(a_.Ql,{value:"scale-down",children:"Scale down"})]})]})})]}),L=(0,am.H2)(s,m);return(0,p.jsx)("div",{className:"flex shrink-0 items-center gap-1.5",children:D?(0,p.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,p.jsx)("p",{className:"text-sm",children:"Starting live preview..."}),(0,p.jsx)(te.$,{variant:"ring",size:"default"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(eQ.J2,{open:"quickActions"===o,onOpenChange:e=>d(e?"quickActions":null),children:[(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit quick actions",disabled:D,className:(0,ed.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"quickActions"===o}),children:(0,p.jsx)(eo.Z,{name:"img"===R?"image":"text_fields",size:"small"})})})}),(0,p.jsx)(ec._v,{children:(0,p.jsx)("p",{children:"img"===R?"Edit image":"Edit content"})})]}),(0,p.jsx)(eQ.yk,{side:"bottom",align:"center",children:(0,p.jsx)(nT,{element:s,disabled:!a,canEditText:L,onTextChange:y,imageUploadSection:O,onRemoveNode:x,canEdit:a,isSaving:n})})]}),(0,p.jsxs)(eQ.J2,{open:"spacing"===o,onOpenChange:e=>d(e?"spacing":null),children:[(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit spacing",disabled:D,className:(0,ed.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"spacing"===o}),children:(0,p.jsx)(eo.Z,{name:"zoom_out_map",size:"small"})})})}),(0,p.jsx)(ec._v,{children:(0,p.jsx)("p",{children:"Edit spacing"})})]}),(0,p.jsx)(eQ.yk,{side:"bottom",align:"center",className:"p-2",children:(0,p.jsx)(nD,{element:s,disabled:I})})]}),(0,p.jsxs)(eQ.J2,{open:"style"===o,onOpenChange:e=>d(e?"style":null),children:[(0,p.jsxs)(ec.u,{children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit style",disabled:D,className:(0,ed.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"style"===o}),children:(0,p.jsx)(eo.Z,{name:"brush",size:"small"})})})}),(0,p.jsx)(ec._v,{children:(0,p.jsx)("p",{children:"Edit styles"})})]}),(0,p.jsx)(eQ.yk,{side:"bottom",align:"center",children:(0,p.jsx)(n8,{element:s,disabled:I,immediateValues:r,debouncedOnClassNameUpdate:P,onSelectParent:()=>{l({type:c.GET_PARENT_ELEMENT,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col}}})},isWaitingForLivePreviewToStart:D})})]}),(0,p.jsx)(n9,{element:s,canEdit:a,isSaving:n,handleRemoveNode:x,isDisabled:D})]})})}function le(e){let{isDiscardDialogOpen:t,setIsDiscardDialogOpen:s,hasUnsavedChanges:a,isSaving:n,handleDiscard:l}=e;return(0,p.jsxs)(H.Vq,{open:t,onOpenChange:s,children:[(0,p.jsx)(H.hg,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"secondary",size:"sm",className:"duration-125 transition ease-out hover:bg-secondary",onClick:e=>{a||(e.preventDefault(),e.stopPropagation())},disabled:n||!a,children:"Discard"})}),(0,p.jsx)(H.cZ,{className:"p-4",size:"sm",children:(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{children:"Discard Changes"}),(0,p.jsx)(H.Be,{children:"Are you sure you want to discard your changes?"}),(0,p.jsxs)(H.cN,{className:"flex gap-2 pt-4",children:[(0,p.jsx)(H.GG,{children:(0,p.jsx)(G.z,{variant:"outline",children:"Cancel"})}),(0,p.jsx)(H.GG,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"destructive",onClick:l,children:"Discard"})})]})]})})]})}function lt(e){let{selectedElement:t,prevSelectedElementRef:s,selectedElements:a}=e,n=(0,B.iZ)(e=>e.projectId),{turnOffVisualEditing:l}=(0,tF.S9)(),r=(0,g.useRef)(null),i=(0,tF.UC)(e=>e.customPromptValue),{setCustomPromptValue:o}=(0,tF.S9)(),{hasUnsavedChanges:c}=(0,tm.v)(),d=(0,tF.UC)(e=>e.isVisualEditingActive)&&c;(0,g.useEffect)(()=>{var e,a;t.id!==(null===(e=s.current)||void 0===e?void 0:e.id)&&void 0!==t.id&&(null===(a=r.current)||void 0===a||a.focus())},[t,s]);let u=(0,sH.mo)({projectId:n}),m=async e=>{if(e.preventDefault(),i.trim()&&!u.isPending){if(d){v.Am.error("Save the manual edits first.",{duration:6e3});return}await u.mutateAsync({body:{id:(0,O.Fd)(),message:i.trim(),images:[],selected_elements:a,chat_only:!1,agent_mode:void 0},clear:()=>{o(""),l()}})}};return(0,p.jsxs)("form",{className:"flex h-full w-full items-center gap-1.5",onSubmit:m,children:[(0,p.jsx)(eJ.I,{placeholder:"Ask for quick changes...",value:i,disabled:d,onChange:e=>o(e.target.value),className:"h-8 min-w-0 grow border-none p-0 shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",ref:r}),(0,p.jsx)("button",{type:"submit",className:(0,ed.cn)("flex h-5 w-6 items-center justify-center rounded-full bg-muted-foreground text-popover",{"bg-affirmative-primary text-white":!!i}),children:(0,p.jsx)(eo.Z,{name:"arrow_upward_alt_600",size:"small"})})]})}let ls=e=>{let{position:t}=e,{selectedElements:s,canEdit:a}=ak(),{turnOffVisualEditing:n,closeVisualEditsPanel:l}=(0,tF.S9)(),r=s[0],{syncCode:i,generateAst:o,hasUnsavedChanges:d,refreshPreview:u}=(0,tm.v)(),{undoLastOperation:m}=nS(),h=(0,tc.A7)(e=>e.clearPendingChanges),x=(0,tc.A7)(e=>e.clearUploads),{snapshot:f}=(0,tc.ag)(),v=(0,g.useRef)(null),b=(0,tF.UC)(e=>e.isSaving),{setIsSaving:j}=(0,tF.S9)(),y=(0,g.useCallback)(async()=>(_.ZP.capture("visual_edits:save_clicked"),j(!0),i(f.getPendingChanges()).then(()=>{j(!1),n()})),[j,f,i,n]);(0,er.y1)("meta+z",e=>{e.preventDefault(),a&&m()}),(0,er.y1)("meta+enter",e=>{e.preventDefault(),a&&y().finally(()=>{n()})});let w=(0,g.useCallback)(()=>{_.ZP.capture("visual_edits:discard_clicked"),h(),x(),u(),o(),n()},[h,x,o,n,u]);(0,er.y1)("esc",e=>{e.preventDefault(),l()},{enableOnFormTags:!0});let N=au();(0,g.useEffect)(()=>()=>{N({type:c.TOGGLE_SELECTOR,payload:{isActive:!1}}),N({type:c.UPDATE_SELECTED_ELEMENTS,payload:[]})},[N]);let E=(0,g.useRef)(null);(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload;switch(t){case"Meta+z":a&&m();break;case"Meta+Enter":a&&y()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[a,y,d,n,m]);let[k,C]=(0,g.useState)(!1);return(0,p.jsxs)(eU.E.div,{className:"fixed z-[9999] flex items-center gap-3 rounded-2xl bg-popover px-3",style:{width:400,left:t.x,top:t.y,boxShadow:"0px 0px 10px 0px rgba(0, 0, 0, 0.1)"},initial:!1,animate:{height:40},transition:{duration:0},ref:v,children:[(0,p.jsxs)("div",{className:"relative h-full w-full",children:[d&&(0,p.jsxs)("div",{className:"absolute inset-0 z-10 -ml-4 -mr-3 flex h-full w-auto items-center justify-center gap-2 rounded-2xl bg-popover",children:[(0,p.jsx)(le,{isDiscardDialogOpen:k,setIsDiscardDialogOpen:C,hasUnsavedChanges:d,isSaving:b,handleDiscard:w}),(0,p.jsx)(G.z,{onClick:y,loading:b,disabled:!d,size:"sm","aria-label":"save visual edits",variant:"affirmative",children:"Save"})]}),(0,p.jsx)(lt,{selectedElement:r,prevSelectedElementRef:E,selectedElements:s,onDiscard:w,onSave:y})]}),(0,p.jsx)("div",{className:"w-[3px] bg-muted-hover",style:{height:24}}),(0,p.jsx)(n7,{element:r,canEdit:a,isSaving:b})]})},la=()=>{let{handleDeactivatePickAndEdit:e}=ak(),{enableServer:t}=(0,tm.v)(),{setIsPickAndEditActive:s}=(0,tF.S9)();return(0,g.useEffect)(()=>(t(),s(!0),()=>{e()}),[t,e,s]),null},ln=()=>{let e=(0,tF.UC)(e=>e.isVisualEditingActive),t=(0,tF.UC)(e=>e.visualEditsPanelState),{turnOffVisualEditing:s}=(0,tF.S9)();return aC(),(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload;switch(t){case"Alt+S":case"Alt+\xdf":s()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s]),(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(la,{}),e&&t.isOpen&&(0,p.jsx)(ls,{position:t.position})]})};var ll=s(30166),lr=s(88568),li=s(90045),lo=s(40236),lc=s(23260),ld=s(55214),lu=s.n(ld),lm=s(89396);let lp={add_dependency:{icon:"deployed_code",color:"text-green-500"},remove_dependency:{icon:"deployed_code",color:"text-red-500"},delete:{icon:"scan_delete",color:"text-red-500"},delete_directory:{icon:"scan_delete",color:"text-red-500"},edit:{icon:"note_stack",color:"text-yellow-500"},new:{icon:"note_add",color:"text-green-500"},rename:{icon:"swap_horiz",color:"text-blue-500"},rename_directory:{icon:"swap_horiz",color:"text-blue-500"}},lh=["delete","delete_directory","add_dependency","remove_dependency","rename","rename_directory"],lx=e=>{let{filePath:t,oldFilePath:s,operation:a,className:n,contentToCopy:l}=e,[r,i]=(0,g.useState)(!1),o=async()=>{if(l)try{await navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){(0,w.Eo)(e)}};return(0,p.jsxs)("div",{className:(0,ed.cn)("flex flex-row items-center gap-2 rounded-t-lg bg-transparent font-mono",n,{"rounded-b-lg":lh.includes(a)}),children:[(0,p.jsx)(eo.Z,{name:lp[a].icon,className:lp[a].color,size:"small"}),s&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:s}),(0,p.jsx)(eo.Z,{name:"arrow_right",className:"text-muted-foreground",size:"small"})]}),(0,p.jsx)("span",{className:"flex-1",children:t}),l&&(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",onClick:o,className:"ml-auto text-muted-foreground hover:text-foreground",children:(0,p.jsx)(eo.Z,{name:r?"check":"content_copy",size:"default"})})]})},lf=e=>{let{className:t,...s}=e;return(0,p.jsx)(lx,{...s,className:(0,ed.cn)("border border-border px-3 py-2 text-sm font-medium",t)})},lg=e=>{let{code:t,className:a}=e,[n,l]=(0,g.useState)(!0),[r,i]=(0,g.useState)(null),[o,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(1),[m,h]=(0,g.useState)(1),[x,f]=(0,g.useState)({x:0,y:0}),[v,b]=(0,g.useState)(!1),[j,y]=(0,g.useState)({x:0,y:0}),[w,N]=(0,g.useState)(!1),[E,k]=(0,g.useState)(!1),{resolvedTheme:C}=(0,to.F)(),_=(0,g.useRef)(null),S=(0,g.useRef)(null),T=(0,g.useRef)(null),R=(0,g.useRef)(null),{exitConsole:I}=(0,z.pE)(),P=(0,g.useCallback)(e=>{let t=e.trim();return(t=t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).trim()},[]),A=(0,g.useCallback)(()=>{if(!S.current||!T.current)return;let e=S.current,t=T.current.querySelector("svg");if(!t)return;let s=e.getBoundingClientRect(),a=s.width-40,n=s.height-80,l=t.getBoundingClientRect(),r=l.width/a,i=l.height/n;if(r>=.2&&r<=.9&&i>=.2&&i<=.9){u(1),h(1),k(!0);return}u(.8*Math.min(a/l.width,n/l.height)),h(1),f({x:0,y:0}),k(!0)},[]),D=(0,g.useCallback)(async()=>{if(!(null==t?void 0:t.trim())){i("No diagram code provided"),l(!1);return}try{l(!0),i(null),c(""),k(!1),u(1),h(1),_.current||(_.current=(await Promise.all([s.e(1860),s.e(656)]).then(s.bind(s,50656))).default);let e=_.current;if(!e)throw Error("Failed to load mermaid");let a="dark"===C;e.initialize({startOnLoad:!1,theme:a?"dark":"default",securityLevel:"loose",fontFamily:"Inter, system-ui, sans-serif",suppressErrorRendering:!0});let n=P(t),r="mermaid-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o=await e.render(r,n);if(o&&o.svg)c(o.svg),l(!1);else throw Error("No SVG content returned from mermaid")}catch(e){i(e instanceof Error?"Diagram syntax error: ".concat(e.message.split("\n")[0]):"Failed to render diagram"),l(!1)}},[t,C,P]),O=d*m,L=()=>h(e=>Math.min(1.5*e,10)),M=()=>h(e=>Math.max(e/1.5,.1)),Z=()=>{h(1),f({x:0,y:0})},F=()=>b(!1);(0,g.useEffect)(()=>{let e=e=>{if(w)switch(e.key){case"+":case"=":e.preventDefault(),L();break;case"-":e.preventDefault(),M();break;case"0":e.preventDefault(),Z();break;case"Escape":e.preventDefault(),N(!1)}};if(w)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[w,m]),(0,g.useEffect)(()=>{D()},[D]),(0,g.useEffect)(()=>{if(o&&!E&&S.current&&T.current){let e=setTimeout(()=>{A()},300);return()=>clearTimeout(e)}},[o,E,A]),(0,g.useEffect)(()=>{let e=R.current;if(!e)return;let t=e=>{if(e.preventDefault(),e.stopPropagation(),!S.current)return;let t=S.current.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,n=-.015*e.deltaY,l=d*m,r=Math.min(Math.max(m*(1+n),.1),10),i=d*r/l,o=t.width/2,c=t.height/2,u=s-o-(s-o-x.x)*i,p=a-c-(a-c-x.y)*i;h(r),f({x:u,y:p})};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[d,m,x.x,x.y]);let U=(0,p.jsxs)("div",{className:(0,ed.cn)("relative flex-1 bg-background",w?"fixed inset-0 z-50 rounded-none":"h-full",a),ref:S,children:[(0,p.jsx)("div",{className:"absolute left-4 top-4 z-10 flex gap-2",children:(0,p.jsxs)(G.z,{variant:"secondary",size:"sm",onClick:()=>{N(!1),I()},children:[(0,p.jsx)(eo.Z,{name:"close",size:"small"}),"Close"]})}),o&&(0,p.jsx)("div",{className:"absolute right-4 top-4 z-10 flex gap-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border bg-background/80 px-2 py-1 backdrop-blur-sm",children:[(0,p.jsx)("button",{onClick:M,className:"rounded p-1 hover:bg-accent",title:"Zoom out (-)",children:(0,p.jsx)(eo.Z,{name:"remove",size:"small"})}),(0,p.jsxs)("span",{className:"min-w-12 px-2 text-center font-mono text-xs",children:[Math.round(100*m),"%"]}),(0,p.jsx)("button",{onClick:L,className:"rounded p-1 hover:bg-accent",title:"Zoom in (+)",children:(0,p.jsx)(eo.Z,{name:"add",size:"small"})}),(0,p.jsx)("button",{onClick:Z,className:"ml-1 rounded p-1 hover:bg-accent",title:"Reset zoom (0)",children:(0,p.jsx)(eo.Z,{name:"refresh",size:"small"})})]})}),(0,p.jsxs)("div",{className:"flex h-full flex-col",children:[n&&(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,p.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rendering diagram..."})}),r&&(0,p.jsxs)("div",{className:"m-4 rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:[(0,p.jsx)("div",{className:"text-sm font-medium text-destructive",children:"Diagram Error"}),(0,p.jsx)("div",{className:"mt-1 text-sm text-destructive/80",children:r}),(0,p.jsxs)("details",{className:"mt-2",children:[(0,p.jsx)("summary",{className:"cursor-pointer text-sm text-muted-foreground",children:"Show diagram code"}),(0,p.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-muted p-2 text-xs",children:t})]})]}),o&&(0,p.jsx)("div",{ref:R,className:(0,ed.cn)("relative min-h-0 flex-1 overflow-hidden",w?"cursor-grab":"",v?"cursor-grabbing":""),onMouseDown:e=>{e.preventDefault(),b(!0),y({x:e.clientX-x.x,y:e.clientY-x.y})},onMouseMove:e=>{v&&(e.preventDefault(),f({x:e.clientX-j.x,y:e.clientY-j.y}))},onMouseUp:F,onMouseLeave:F,style:{userSelect:"none",overscrollBehavior:"contain"},children:(0,p.jsx)("div",{className:"flex h-full w-full origin-center items-center justify-center",style:{transform:"scale(".concat(O,") translate(").concat(x.x/O,"px, ").concat(x.y/O,"px)")},children:(0,p.jsx)("div",{ref:T,dangerouslySetInnerHTML:{__html:o}})})})]}),w&&(0,p.jsx)("div",{className:"absolute bottom-4 left-4 rounded bg-background/80 px-2 py-1 text-xs text-muted-foreground backdrop-blur-sm",children:"Use +/- to zoom, drag to pan, Esc to exit"})]});return w?(0,p.jsxs)(p.Fragment,{children:[U,(0,p.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm"})]}):U},lv=[lc.Z],lb=(0,g.memo)(e=>{let{part:t}=e,{resolvedTheme:s}=(0,to.F)(),a="dark"===s?tp.Lm:tp.C0,n=(0,g.useMemo)(()=>({code(e){let{node:t,className:s,children:n}=e;return/language-(\w+)/.exec(s||"")?(0,p.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,p.jsx)(tl.ZP,{readOnly:!0,value:String(n).replace(/\n$/,""),className:(0,ed.cn)("flex-1 overflow-y-auto",tx().editor),theme:a,extensions:tp.A4})}):(0,p.jsx)("span",{className:"rounded bg-muted px-1.5 py-0.5 font-mono text-sm",children:n})}}),[a]);switch(t.type){case"writing_file":return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)(lf,{filePath:t.file_path,operation:"new",contentToCopy:t.content}),(0,p.jsx)("div",{className:"overflow-hidden rounded-b-lg border-x border-b",children:(0,p.jsx)(tl.ZP,{readOnly:!0,value:t.content,className:(0,ed.cn)("flex-1 overflow-y-auto",tx().editor),theme:a,basicSetup:{foldGutter:!1,foldKeymap:!1},extensions:tp.A4})})]});case"text":return(0,p.jsx)("div",{className:"prose prose-zinc prose-markdown mb-2 max-w-full dark:prose-invert ".concat(lu().customProse," prose-h1:mb-2 prose-h1:text-xl prose-h1:font-medium prose-h2:text-lg prose-h2:font-medium prose-h3:text-base prose-h3:font-medium prose-pre:my-2 prose-ol:my-2 prose-ul:my-2 prose-li:my-0"),children:(0,p.jsx)(lo.UG,{remarkPlugins:lv,components:n,children:t.content})});case"edit":let l=t.search_replace_parts.map(e=>e.replace).join("\n\n");return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)(lf,{filePath:t.file_path,operation:"edit",contentToCopy:l}),(0,p.jsx)("div",{className:"rounded-b-lg border-x border-b",children:t.search_replace_parts.map((e,t)=>(0,p.jsxs)("div",{className:"mb-1 p-2",children:[(0,p.jsxs)("div",{className:"mb-1 flex text-sm text-foreground",children:[(0,p.jsx)("span",{className:"flex-1",children:"Search"}),(0,p.jsx)("span",{className:"flex-1",children:"Replace"})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(tl.ZP,{readOnly:!0,value:e.search,className:(0,ed.cn)("flex-1 overflow-y-auto",tx().editor),theme:a,extensions:tp.A4}),(0,p.jsx)(tl.ZP,{readOnly:!0,value:e.replace,className:(0,ed.cn)("flex-1 overflow-y-auto",tx().editor),theme:a,extensions:tp.A4})]})]},t))})]});case"delete":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(lf,{filePath:t.file_path,operation:"delete"})});case"rename":return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(lf,{filePath:t.new_file_path,oldFilePath:t.original_file_path,operation:"rename"})});case"add_dependency":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(lf,{filePath:t.dependency,operation:"add_dependency",className:"rounded-lg"})});case"remove_dependency":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(lf,{filePath:t.removed_dependency,operation:"remove_dependency",className:"rounded-lg"})});case"error":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsxs)("div",{className:"flex items-center rounded-lg border border-warning-primary p-3 text-sm font-medium",children:[(0,p.jsx)(eo.Z,{name:"warning",className:"mr-2 text-warning-foreground",size:"small"}),(0,p.jsx)("span",{children:t.error_message})]})});case"lov-mermaid":if(!t.done)return(0,p.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm text-muted-foreground",children:[(0,p.jsx)(eo.Z,{name:"progress_activity",size:"small",className:"animate-spin"}),(0,p.jsx)("span",{children:"Generating diagram..."})]});return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(lg,{code:t.mermaidCode})});case"tool_use":var r,i,o,c,d;if("lov-add-dependency"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(lf,{filePath:null!==(r=t.parsedData.package)&&void 0!==r?r:"",operation:"add_dependency",className:"rounded-lg"})});if("lov-remove-dependency"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(lf,{filePath:null!==(i=t.parsedData.package)&&void 0!==i?i:"",operation:"remove_dependency",className:"rounded-lg"})});if("lov-delete"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(lf,{filePath:null!==(o=t.parsedData.file_path)&&void 0!==o?o:"",operation:"delete"})});if("lov-rename"===t.name)return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(lf,{filePath:null!==(c=t.parsedData.new_file_path)&&void 0!==c?c:"",oldFilePath:null!==(d=t.parsedData.original_file_path)&&void 0!==d?d:"",operation:"rename"})});return(0,p.jsx)(lm.Y9,{name:t.name,parsedData:t.parsedData,done:t.done,duration:t.duration});default:return null}},(e,t)=>{let s=e.part,a=t.part;if(s.type!==a.type)return!1;switch(s.type){case"text":return s.content===a.content;case"writing_file":return s.file_path===a.file_path&&s.content===a.content;case"edit":if(s.search_replace_parts.length!==a.search_replace_parts.length)return!1;return s.file_path===a.file_path&&s.search_replace_parts.every((e,t)=>{let s=a.search_replace_parts[t];return e.search===s.search&&e.replace===s.replace});case"delete":return s.file_path===a.file_path;case"rename":return s.original_file_path===a.original_file_path&&s.new_file_path===a.new_file_path;case"add_dependency":return s.dependency===a.dependency&&s.isDevDependency===a.isDevDependency;case"remove_dependency":return s.removed_dependency===a.removed_dependency;case"error":return s.error_message===a.error_message;case"lov-mermaid":return s.mermaidCode===a.mermaidCode&&s.done===a.done;case"tool_use":return s.name===a.name&&s.data===a.data&&s.done===a.done&&s.duration===a.duration;default:return!1}});var lj=s(96139);(r=(l=u||(u={})).action||(l.action={})).NEW="new",r.RENAME="rename",r.RENAME_DIRECTORY="rename_directory",r.DELETE="delete",r.DELETE_DIRECTORY="delete_directory",r.EDIT="edit",r.ADD_DEPENDENCY="add_dependency";var ly=e=>{let{oldContent:t,newContent:s,filePath:a,originalFilePath:n,action:l,editable:r=!1,onChange:i}=e,[o,c]=(0,g.useState)(!0),[d,m]=(0,g.useState)(!1),[h,x]=(0,g.useState)(s),[f,b]=(0,g.useState)(!1),j=(0,ef.v)(),{addPendingChange:y,enableServer:N,syncCode:E}=(0,tm.v)(),k=h!==s,C=(0,g.useCallback)(e=>{x(e),y(a,e),N(),null==i||i(a,e)},[y,a,N,i]),{resolvedTheme:S}=(0,to.F)(),T="dark"===S?tp.Lm:tp.C0,I=async()=>{try{await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3),_.ZP.capture(R.SL.CONSOLE.DIFF_COPIED)}catch(e){(0,w.Eo)(e)}},P=(0,g.useCallback)(async()=>{if(k){b(!0);try{await E({[a]:h},{commitMessage:"Manual edit: ".concat(a)}),v.Am.success("Changes saved")}catch(e){(0,w.Eo)(e)}finally{b(!1)}}},[k,a,h,E]);return(0,p.jsxs)("div",{className:"overflow-hidden rounded-lg border border-border",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)(lf,{filePath:a,className:"border-none",oldFilePath:n,operation:l}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[!r&&(0,p.jsxs)("div",{className:"text-muted-foregroun mr-1 flex items-center gap-1 text-xs",children:[(0,p.jsx)(eo.Z,{name:"info",size:"small"}),"Only latest edits can be modified"]}),r&&k&&(0,p.jsx)(G.z,{variant:"affirmative",size:"sm",onClick:P,loading:f,disabled:f,className:"mr-1",children:"Save"}),j&&(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",onClick:I,className:"text-muted-foreground hover:text-foreground",title:d?"Copied!":"Copy diff content",children:(0,p.jsx)(eo.Z,{name:d?"check":"content_copy",size:"default"})}),l!==u.action.DELETE&&(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",onClick:()=>c(e=>!e),className:"mr-1",children:(0,p.jsx)(eo.Z,{name:o?"unfold_less":"unfold_more",size:"default"})})]})]}),h&&(0,p.jsx)(eU.E.div,{initial:{height:0},animate:{height:o?"auto":0},exit:{height:0},transition:{duration:.25},children:(0,p.jsx)(tl.ZP,{className:(0,ed.cn)(tx().editor,"border-t"),readOnly:!r,theme:T,extensions:[...tp.A4,tl.tk.editable.of(r),(0,lj.Z)({original:t,mergeControls:!1})],value:h,onChange:C})})]},a)};function lw(){return(0,p.jsx)("div",{className:"flex flex-col rounded-lg border border-border",children:(0,p.jsx)("div",{className:"flex items-center justify-between p-3",children:(0,p.jsx)("div",{className:"h-3 w-80 animate-pulse rounded bg-muted"})})})}let lN=g.memo(e=>{var t,s;let{activeEdit:a,editable:n=!1}=e,[l,r]=(0,g.useState)(Math.min(2,(null==a?void 0:null===(t=a.diff)||void 0===t?void 0:t.length)||0)),i=(0,g.useRef)(null);return(0,g.useEffect)(()=>()=>{null!==i.current&&clearTimeout(i.current)},[]),(0,g.useEffect)(()=>{(null==a?void 0:a.diff)&&l<a.diff.length&&(i.current=window.setTimeout(()=>{r(e=>{var t;return Math.min(e+2,(null===(t=a.diff)||void 0===t?void 0:t.length)||0)})},50))},[l,null==a?void 0:a.diff]),(0,p.jsx)("div",{className:"flex flex-col gap-4",children:null==a?void 0:null===(s=a.diff)||void 0===s?void 0:s.map((e,t)=>(0,p.jsx)(g.Fragment,{children:t<l?(0,p.jsx)(ly,{oldContent:e.old_content,newContent:e.new_content,filePath:e.file_path,originalFilePath:e.original_file_path,action:e.action,editable:n}):(0,p.jsx)(lw,{})},"".concat(e.action,"-").concat(e.file_path,"-").concat(t)))})});lN.displayName="DiffView";let lE=e=>{var t,s,a;let{errors:n,allErrors:l}=e,r=n.find(e=>{var t;return null===(t=e.meta_data)||void 0===t?void 0:t.url}),i=null==r?void 0:null===(t=r.meta_data)||void 0===t?void 0:t.url,o=null==r?void 0:null===(s=r.meta_data)||void 0===s?void 0:s.method,c=null==r?void 0:null===(a=r.meta_data)||void 0===a?void 0:a.origin,d=n.length===l.length?"This":"At least one of these";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-sm",children:[d," is a Cross-Origin Resource Sharing (CORS) error. It means that the HTTP call you made is not allowed by the server. This could be because the server is not configured to accept requests from the client URL. Unfortuantely this is not something that the AI can fix for you since we don't control the server you're trying to communicate with."]}),(0,p.jsx)("p",{className:"text-sm",children:"If you are in control of the server, please configure the server to accept requests from the client URL. If you are not in control of the server, please contact the server administrator to configure the server to accept requests from the client URL. If it's not possible to change the CORS configuration, explore other API services that do allow requests directly from the browser."}),(0,p.jsx)("table",{className:"text-sm",children:(0,p.jsxs)("tbody",{children:[i&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"URL"}),(0,p.jsx)("td",{children:i})]}),o&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"Method"}),(0,p.jsx)("td",{children:o})]}),c&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"Origin"}),(0,p.jsx)("td",{children:c})]})]})})]})};var lk=s(5707),lC=s(40878);let l_=e=>"string"==typeof e?e:(0,e7.l)((0,lk.K)(e.seconds),new Date),lS=e=>{switch(e){case s_.N.CORS_ERROR:return"CORS error";case s_.N.HTTP_SERVER_ERROR:return"HTTP server error";case s_.N.HTTP_CLIENT_ERROR:return"HTTP client error";case s_.N.SUPABASE_EDGE_FUNCTION_ERROR:return"Supabase edge function error";case s_.N.BUILD:return"Build error";case s_.N.RUNTIME:case s_.N.IMMEDIATE_RUNTIME:return"Runtime error";default:return"Error"}};function lT(e){let{hideFn:t}=e,{clearBlankScreenErrors:s}=(0,k.D)();return(0,p.jsx)(G.z,{variant:"secondary",size:"sm",onClick:()=>{s(),t()},children:"Dismiss"})}function lR(e){let{error:t,hideFn:s}=e,a=(0,V.D)(),{onClick:n,isPending:l}=(0,sS.hw)({projectId:a,errors:[t]}),r=(0,D.bk)(e=>e.isSendChatMessageMutationPending),{setShowConsole:i}=(0,z.pE)(),{setView:o}=(0,lC.zp)(),c=(0,y.Z)("md");return(0,p.jsxs)(G.z,{variant:"secondary",size:"sm",disabled:l||r,onClick:()=>{i(null),c&&o(lC.$.CHAT),s(),n()},children:[(0,p.jsx)(eo.Z,{name:"bolt",size:"small"}),"Try to fix"]})}let lI=e=>{let{error:t}=e,[s,a]=(0,g.useState)(!1),{setShowConsole:n}=(0,z.pE)();return s?null:(0,p.jsxs)("div",{className:"mb-4 mt-2 rounded-xl bg-warning",children:[(0,p.jsxs)("div",{className:"flex flex-row items-center justify-between pb-1 pl-3 pr-1.5 pt-1.5",children:[(0,p.jsxs)("div",{className:"flex flex-row items-center text-sm text-warning-foreground",children:[(0,p.jsx)(eo.Z,{name:"warning",size:"small",className:"mr-2"}),(0,p.jsx)("p",{className:"mr-2 font-medium",children:lS(t.type)}),(0,p.jsx)("p",{className:"leading-none",children:l_(t.created_at)})]}),(0,p.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,p.jsx)(lT,{hideFn:()=>{a(!0),n(null)}}),(0,p.jsx)(lR,{error:t,hideFn:()=>{a(!0)}})]})]}),(0,p.jsx)(sS.UL,{errors:[t],roundedTop:!1})]})},lP=e=>{var t,s,a;let{errors:n,allErrors:l}=e;return n.length!==l.length?(0,p.jsx)("p",{className:"text-sm",children:"At least one of these HTTP calls failed which means that the server or API you're trying to communicate with is not working properly. Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with."}):(0,p.jsxs)("p",{className:"text-sm",children:["This is an HTTP server error which means that the server or API you're trying to communicate with is not working properly.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(null===(t=n[0].meta_data)||void 0===t?void 0:t.url)&&!(null===(s=n[0].meta_data)||void 0===s?void 0:s.status)&&(0,p.jsxs)(p.Fragment,{children:["Please validate that the url"," ",(0,p.jsx)("pre",{className:"inline-block rounded bg-secondary p-1",children:null===(a=n[0].meta_data)||void 0===a?void 0:a.url})," ","is correct."]})]})},lA=e=>{let{errors:t}=e;if(!sS.t6[t[0].type])return null;let s=[...t].sort((e,t)=>t.created_at.seconds-e.created_at.seconds),a=s.filter(e=>e.type===s_.N.CORS_ERROR),n=s.filter(e=>e.type===s_.N.HTTP_SERVER_ERROR);return(0,p.jsxs)(p.Fragment,{children:[a.length>0&&(0,p.jsx)(lE,{errors:a,allErrors:t}),n.length>0&&(0,p.jsx)(lP,{errors:n,allErrors:t}),t.map(e=>(0,p.jsx)(lI,{error:e},e.id))]})},lz=()=>{let e=(0,z.Sl)(e=>e.activeConsoleErrorContent),t=(0,V.v)();if(!t)throw Error("Project ID is required and should always be set here");return e&&0!==e.length?(0,p.jsx)(lA,{errors:e,projectId:t}):null},lD=(0,ll.default)(()=>s.e(5941).then(s.bind(s,5941)).then(e=>e.ConsoleDebug),{loadableGenerated:{webpack:()=>[5941]},loading:()=>(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading debug view..."})}),lO=(0,ll.default)(()=>s.e(4273).then(s.bind(s,24273)).then(e=>e.ConsoleAnnotation),{loadableGenerated:{webpack:()=>[24273]},loading:()=>(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading annotation view..."})}),lL=(e,t)=>{let s="".concat(t,"-");switch(e.type){case"text":let a=e.content.trim().substring(0,20)||"empty-text";s+="text-".concat(a);break;case"writing_file":s+="file-".concat(e.file_path);break;case"edit":s+="edit-".concat(e.file_path);break;case"delete":s+="delete-".concat(e.file_path);break;case"rename":s+="rename-".concat(e.original_file_path,"-").concat(e.new_file_path);break;case"add_dependency":s+="add-dep-".concat(e.dependency);break;case"remove_dependency":s+="remove-dep-".concat(e.removed_dependency);break;case"error":let n=e.error_message.trim().substring(0,20)||"empty-error";s+="error-".concat(n);break;case"lov-mermaid":let l=e.mermaidCode.trim().substring(0,20)||"empty-mermaid";s+="mermaid-".concat(l);break;case"tool_use":s+="tool-use-".concat(e.name,"-").concat(e.data.substring(0,20));break;default:s+="unknown-".concat(Math.random().toString(36).substring(2,9))}return s},lM=e=>{var t;let{scrollContainerRef:s}=e,a=(0,z.Sl)(e=>e.activeConsoleCodeContent),n=(0,li.hT)(e=>e.codeViewType),l=(0,z.Sl)(e=>e.activeEditId),r=(0,A.aK)(e=>e.edits),i=(0,B.iZ)(e=>e.project),o=l?r[l]:null,c=(null==o?void 0:o.commit_sha)===(null==i?void 0:i.latest_commit_sha),d=(0,g.useRef)(null),u=(0,g.useRef)(),m=(0,g.useRef)(!0),h=(0,g.useRef)(!1),x=(0,g.useCallback)(()=>{if(s.current){let{scrollTop:e,scrollHeight:t,clientHeight:a}=s.current;m.current=t-e-a<10}},[s]),f=(0,g.useCallback)(e=>{e.deltaY<0?h.current=!0:h.current=!1},[]),v=(0,g.useCallback)(()=>{h.current=!0},[]),b=(0,g.useCallback)(()=>{h.current=!1},[]);return((0,g.useEffect)(()=>{let e=s.current;return e&&(e.addEventListener("scroll",x),e.addEventListener("wheel",f),e.addEventListener("touchstart",v),e.addEventListener("touchend",b)),()=>{e&&(e.removeEventListener("scroll",x),e.removeEventListener("wheel",f),e.removeEventListener("touchstart",v),e.addEventListener("touchend",b))}},[s,x,f,v,b]),(0,g.useEffect)(()=>{var e,t,a;u.current!==(null===(e=s.current)||void 0===e?void 0:e.scrollHeight)&&(u.current=null===(t=s.current)||void 0===t?void 0:t.scrollHeight,m.current&&!h.current&&(null===(a=d.current)||void 0===a||a.scrollIntoView({behavior:"auto"})))},[a,s]),n===li.es.DIFF)?(0,p.jsx)(lN,{activeEdit:o,editable:c},null==o?void 0:o.id):(0,p.jsxs)(p.Fragment,{children:[a&&(null===(t=a.parts)||void 0===t?void 0:t.length)>0?a.parts.map((e,t)=>(0,p.jsx)(lb,{part:e},lL(e,t))):null,(0,p.jsx)("div",{ref:d})]})},lZ=()=>{let e=(0,z.Sl)(e=>e.activeEditId),t=(0,A.aK)(e=>e.edits),s=e?t[e]:null,a=(0,B.iZ)(e=>e.project),n=(0,g.useMemo)(()=>{if(s&&a)return(0,e6.t)({projectId:null==a?void 0:a.id,sha:s.commit_sha})},[s,a]);return(0,p.jsx)("iframe",{id:"preview-panel",src:"".concat(n,"?forceHideBadge=true"),sandbox:lr.h,allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;",className:"min-h-full w-full flex-grow"})},lF=()=>{let e=(0,z.Sl)(e=>e.activeConsoleMermaidContent);return e?e.mermaidCode?(0,p.jsx)("div",{className:"flex h-full flex-col",children:(0,p.jsx)("div",{className:"min-h-0 flex-1",children:(0,p.jsx)(lg,{code:e.mermaidCode,className:"h-full"})})}):(0,p.jsx)("p",{className:"mt-4 text-center text-red-500",children:"Mermaid data found but no code property."}):(0,p.jsx)("p",{className:"mt-4 text-center",children:"No mermaid diagram selected."})},lU=e=>{let{scrollContainerRef:t}=e;switch((0,z.Sl)(e=>e.consoleContentType)){case"error":case"code":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(lz,{})}),(0,p.jsx)(lM,{scrollContainerRef:t})]});case"snapshot-preview":return(0,p.jsx)(lZ,{});case"mermaid":return(0,p.jsx)(lF,{});case"debug":return(0,p.jsx)(lD,{});case"annotation":return(0,p.jsx)(lO,{});default:return(0,p.jsx)("p",{className:"mt-4 text-center",children:"Click on a code chip in the chat to inspect the code output."})}},lK=()=>{let e=(0,z.Sl)(e=>e.consoleContentType),t=(0,g.useRef)(null);return(0,p.jsx)("div",{className:(0,ed.cn)("absolute inset-0 z-50 overflow-y-auto rounded-b-none bg-background p-4 pb-10",{"p-0":"snapshot-preview"===e||"mermaid"===e,"overflow-hidden":"mermaid"===e}),ref:t,children:(0,p.jsx)(lU,{scrollContainerRef:t})})};var lV=s(61563),lW=s(96771);let lB=e=>{let{diffAvailable:t}=e,s=(0,li.hT)(e=>e.codeViewType),{setCodeViewType:a}=(0,li.VK)(),n=(0,z.Sl)(e=>e.activeEditId),l=(0,A.aK)(e=>e.edits),r=n?l[n]:null;return(0,p.jsxs)(lV.t,{className:"ml-auto",type:"single",variant:"outline",value:s,defaultValue:li.es.RAW,onValueChange:e=>{e&&(a(e),e===li.es.RAW?_.ZP.capture(R.SL.PREVIEW.RAW_TAB_CLICKED):e===li.es.DIFF&&_.ZP.capture(R.SL.PREVIEW.DIFF_TAB_CLICKED))},children:[(null==r?void 0:r.type)!==lW.I.type.REVERT&&(0,p.jsx)(lV.G,{size:"sm",value:li.es.RAW,children:"Raw"}),(0,p.jsx)(lV.G,{size:"sm",disabled:!t,value:li.es.DIFF,children:"Diff"})]})};var lG=e=>{let{label:t,score:s,lastUpdated:a,issueCount:n=0,isSelected:l=!1,isLoading:r=!1,onClick:i,onRun:o,onForceRefresh:c}=e,d=e=>e>=90?"#10b981":e>=50?"#f59e0b":"#ef4444";return(0,p.jsxs)("div",{className:"relative flex cursor-pointer flex-col items-center rounded-lg border p-4 transition-all ".concat(l?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 bg-white hover:border-gray-300"),onClick:i,children:[void 0!==s&&c&&(0,p.jsx)(G.z,{size:"sm",variant:"ghost",className:"absolute right-1 top-1 h-6 w-6 p-0 opacity-60 hover:opacity-100",onClick:e=>{e.stopPropagation(),c()},disabled:r,title:"Force refresh",children:(0,p.jsx)(eo.Z,{name:"refresh",size:"small"})}),(0,p.jsx)("div",{className:"relative mb-2 h-16 w-16",children:void 0!==s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("svg",{className:"h-16 w-16 -rotate-90 transform",viewBox:"0 0 36 36",children:[(0,p.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),(0,p.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:d(s),strokeWidth:"2",strokeDasharray:"".concat(s,", 100")})]}),(0,p.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,p.jsx)("span",{className:"font-bold text-sm",style:{color:d(s)},children:Math.round(s)})})]}):(0,p.jsx)("div",{className:"flex h-16 w-16 items-center justify-center",children:(0,p.jsx)(G.z,{size:"sm",variant:"outline",className:"h-12 w-12 rounded-full p-0",onClick:e=>{e.stopPropagation(),null==o||o()},disabled:r,children:r?(0,p.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}):(0,p.jsx)(eo.Z,{name:"play_circle",size:"small"})})})}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("span",{className:"block text-xs font-medium",children:t}),a&&(0,p.jsx)("span",{className:"mt-1 block text-xs text-muted-foreground",children:(e=>{let t=Math.floor((Date.now()-e)/6e4);if(t<1)return"Just now";if(t<60)return"".concat(t,"m ago");let s=Math.floor(t/60);return s<24?"".concat(s,"h ago"):"".concat(Math.floor(s/24),"d ago")})(a)}),void 0!==s&&n>0&&(0,p.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-1",children:[(0,p.jsx)(eo.Z,{name:"warning",size:"small",className:"text-amber-500"}),(0,p.jsxs)("span",{className:"text-xs font-medium text-amber-600",children:[n," issue",1!==n?"s":""]})]}),void 0!==s&&0===n&&(0,p.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-1",children:[(0,p.jsx)(eo.Z,{name:"check",size:"small",className:"text-green-500"}),(0,p.jsx)("span",{className:"text-xs font-medium text-green-600",children:"No issues"})]})]})]})};let lH=(e,t,s)=>{let a=(0,V.D)(),[n,l]=(0,g.useState)(!1),{onClick:r,isPending:i}=(0,sS.hw)({projectId:a,errors:[{id:(0,O.Fd)(),type:s_.N.BUILD,error_message:"SEO Audit Issue (".concat(e.severity,"): ").concat(e.title,"\n\nDescription: ").concat(e.description).concat(e.explanation&&e.explanation!==e.description?"\n\nExplanation: ".concat(e.explanation):"").concat(void 0!==e.score?"\n\nCurrent Score: ".concat(e.score):"").concat(e.savings?"\n\nEstimated savings: ".concat(e.savings):"").concat(e.errorMessage?"\n\nError: ".concat(e.errorMessage):"").concat(e.details?"\n\nAdditional Details: ".concat(JSON.stringify(e.details,null,2)):"","\n\nIMPORTANT INSTRUCTIONS FOR FIXING THIS SEO ISSUE:\n- STRICTLY preserve the existing functional behavior, design, and UX of the application\n- ONLY make changes that are absolutely necessary to fix this specific SEO issue\n- DO NOT modify the application's visual design, layout, or user experience unless it's essential for the SEO fix\n- If the audit requires changes that might affect functionality or UX, be extremely cautious and make minimal changes\n- If you cannot clearly determine how to fix this issue safely without risking application functionality, simply provide the analysis in chat mode instead of making code changes\n- Focus on technical SEO fixes like meta tags, HTML structure, accessibility attributes, etc. that don't affect the user experience\n\nPlease analyze this SEO issue and implement only the minimal necessary changes to improve the website's SEO performance without affecting the application's functionality or user experience."),occurred_at:new Date().toISOString(),created_at:sC.EK.now()}]}),o=(0,D.bk)(e=>e.isSendChatMessageMutationPending);return{handleFix:(0,g.useCallback)(async()=>{if(!n)try{l(!0),_.ZP.capture(R.Md.TRY_FIX,{strategy:t,category:s,auditId:e.id,auditSeverity:e.severity,auditTitle:e.title}),await r(),v.Am.success("SEO fix attempt initiated successfully")}catch(e){T.logging.error("Failed to initiate SEO fix:",{error:e}),v.Am.error("Failed to initiate SEO fix. Please try again.")}finally{l(!1)}},[r,n,t,s,e.id,e.severity,e.title]),isFixing:i||o||n}};var lq=e=>{let{audit:t,strategy:s,category:a}=e,{handleFix:n,isFixing:l}=lH(t,s,a),r=(0,g.useCallback)(async()=>{await n()},[n]);return(0,p.jsxs)(G.z,{onClick:r,variant:"outline",size:"sm",disabled:l,className:"flex items-center gap-2",children:[(0,p.jsx)(eo.Z,{name:"build",size:"small"}),l?"Fixing...":"Try to fix"]})},lX=e=>{let{audit:t,strategy:s,category:a}=e,n={error:{container:"bg-red-50 border-red-200",dot:"bg-red-500",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-yellow-50 border-yellow-200",dot:"bg-yellow-500",title:"text-yellow-800",text:"text-yellow-700"},info:{container:"bg-gray-50 border-gray-200",dot:"bg-gray-500",title:"text-gray-800",text:"text-gray-700"},minor:{container:"bg-orange-50 border-orange-200",dot:"bg-orange-500",title:"text-orange-800",text:"text-orange-700"}}[t.severity];return(0,p.jsx)("div",{className:"rounded-lg border p-4 ".concat(n.container),children:(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-1 items-start",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)("div",{className:"mt-2 h-2 w-2 rounded-full ".concat(n.dot)})}),(0,p.jsxs)("div",{className:"ml-3 flex-1",children:[(0,p.jsx)("h5",{className:"font-medium ".concat(n.title),children:t.title}),(0,p.jsxs)("p",{className:"mt-1 text-sm ".concat(n.text),children:[t.description,t.savings&&(0,p.jsxs)("span",{children:[" Est. savings: ",t.savings]})]})]})]}),(0,p.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,p.jsx)(lq,{audit:t,strategy:s,category:a})})]})})},lY=s(66070),l$=()=>(0,p.jsx)("div",{className:"flex h-full w-full items-center justify-center p-6",children:(0,p.jsx)(lY.Zb,{className:"w-full max-w-md",children:(0,p.jsxs)(lY.aY,{className:"space-y-6 p-8 text-center",children:[(0,p.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:(0,p.jsx)(eo.Z,{name:"globe",size:"large",className:"text-muted-foreground"})}),(0,p.jsx)("div",{className:"space-y-2",children:(0,p.jsx)("h2",{className:"font-semibold text-xl",children:"Publish First to Analyze SEO"})}),(0,p.jsx)("div",{className:"space-y-3",children:(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Click the ",(0,p.jsx)("strong",{children:"Publish"})," button in the top right corner to make your project live."]})}),(0,p.jsx)("div",{className:"border-t pt-4",children:(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"Once published, you'll be able to run comprehensive SEO analysis including performance, accessibility, best practices, and SEO score checks."})})]})})}),lJ=e=>{let{screenshotData:t}=e;return t?(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsx)("h4",{className:"text-md mb-4 font-medium",children:"Page Screenshot"}),(0,p.jsx)("div",{className:"flex justify-center",children:(0,p.jsx)("img",{src:t,alt:"Page screenshot",className:"h-auto max-w-full rounded-lg border shadow-sm",style:{maxHeight:"400px"}})})]}):null},lQ=s(8164);let l0={error:0,warning:1,minor:2,info:3},l1=e=>[...e].sort((e,t)=>{let s=l0[e.severity]-l0[t.severity];return 0!==s?s:e.title.localeCompare(t.title)}),l2={all:["pageSpeed"],project:e=>[...l2.all,e],combination:(e,t,s)=>[...l2.project(e),t,s]},l5=e=>{var t,s;if(!(null==e?void 0:null===(s=e.results)||void 0===s?void 0:null===(t=s.lighthouseResult)||void 0===t?void 0:t.audits))return[];let a=e.results.lighthouseResult.audits,n=[];return Object.entries(a).forEach(e=>{let[t,s]=e;if("number"!=typeof s.score||s.score>=1)return;let a="info";s.score<.5?a="error":s.score<.7?a="warning":s.score<.9&&(a="minor"),n.push({id:s.id||t,severity:a,title:s.title||t,description:s.description||s.explanation||"No description available",score:s.score,scoreDisplayMode:s.scoreDisplayMode,displayValue:s.displayValue,explanation:s.explanation,errorMessage:s.errorMessage,warnings:s.warnings,details:s.details,savings:s.displayValue})}),n},l4=(e,t)=>{var s,a;let n=null==e?void 0:null===(a=e.results)||void 0===a?void 0:null===(s=a.lighthouseResult)||void 0===s?void 0:s.categories;if(!n)return null;let l=n[({performance:"performance",accessibility:"accessibility","best-practices":"best-practices",seo:"seo"})[t]];return l?{label:({performance:"Performance",accessibility:"Accessibility","best-practices":"Best Practices",seo:"SEO"})[t],score:Math.round(100*(l.score||0)),category:t}:null},l3=(e,t,s)=>{var a,n,l,r,i;let o=l4(e,s);return o?{strategy:t,category:s,score:o,audits:l5(e),screenshot:null==e?void 0:null===(i=e.results)||void 0===i?void 0:null===(r=i.lighthouseResult)||void 0===r?void 0:null===(l=r.audits)||void 0===l?void 0:null===(n=l["final-screenshot"])||void 0===n?void 0:null===(a=n.details)||void 0===a?void 0:a.data,timestamp:Date.now()}:null},l6=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{queryKey:l2.combination(e,t,s),queryFn:async()=>{let a=(0,N.SJ)();return l3(await a.post("/projects/".concat(e,"/preview-page-speed"),{url_source:"publish",strategy:t,categories:[s]}),t,s)},staleTime:a?0:9e5,gcTime:36e5,enabled:!!e}},l8=function(e,t,s){var a;let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,tn.a)(l6(e,t,s,n)),r=(0,g.useCallback)(async()=>l.refetch(),[l]),i=(0,g.useCallback)(async()=>l.refetch(),[l]);return{data:l.data,isLoading:l.isLoading,error:l.error,runAnalysis:r,forceRefresh:i,isStale:l.isStale,lastUpdated:null===(a=l.data)||void 0===a?void 0:a.timestamp}},l9=(e,t)=>{var s;let a=(0,lQ.h)({queries:t.map(t=>{let{strategy:s,category:a}=t;return l6(e,s,a)})}),n=a.map(e=>e.data).filter(Boolean),l=a.some(e=>e.isLoading);return{data:n,isLoading:l,error:null===(s=a.find(e=>e.error))||void 0===s?void 0:s.error,runAnalysis:(0,g.useCallback)(async(e,s)=>{let n=t.findIndex(t=>t.strategy===e&&t.category===s);if(-1!==n)return a[n].refetch()},[a,t]),forceRefresh:(0,g.useCallback)(async(e,s)=>{let n=t.findIndex(t=>t.strategy===e&&t.category===s);if(-1!==n)return a[n].refetch()},[a,t]),queries:a}},l7=(e,t)=>{let{data:s,isLoading:a,error:n,runAnalysis:l,forceRefresh:r}=l9(e,["performance","accessibility","best-practices","seo"].map(e=>({strategy:t,category:e})));return{scores:s.map(e=>e.score),data:s,isLoading:a,error:n,runAnalysis:l,forceRefresh:r}};var re=()=>{var e,t;let[s,a]=(0,g.useState)("mobile"),[n,l]=(0,g.useState)("performance"),[r,i]=(0,g.useState)(new Set),o=(0,V.D)(),c=(0,B.iZ)(e=>e.project),d=!!(null==c?void 0:c.url),u=(null==c?void 0:c.latest_commit_sha)!==(null==c?void 0:null===(e=c.published_deployment)||void 0===e?void 0:e.commit_sha),{scores:m,data:h,isLoading:x,error:f,runAnalysis:v,forceRefresh:b}=l7(o,s),{data:j,isLoading:y,error:w,runAnalysis:N,forceRefresh:E}=l8(o,s,n),k=(0,g.useMemo)(()=>(null==j?void 0:j.audits)?l1(j.audits):[],[null==j?void 0:j.audits]),C=e=>{l(e),_.ZP.capture(R.Md.CATEGORY_SELECTED,{category:e,strategy:s})},S=e=>{a(e),_.ZP.capture(R.Md.STRATEGY_SELECTED,{strategy:e})},T=async e=>{i(t=>new Set([...t,e]));try{await v(s,e)}finally{i(t=>{let s=new Set(t);return s.delete(e),s})}},I=async e=>{i(t=>new Set([...t,e]));try{e===n&&await E(),await b(s,e)}finally{i(t=>{let s=new Set(t);return s.delete(e),s})}},P=async()=>{let e=["performance","accessibility","best-practices","seo"];_.ZP.capture(R.Md.REGENERATE,{strategy:s,categories:e,context:"all"}),i(new Set(e));try{await Promise.all(e.map(e=>b(s,e))),e.includes(n)&&await E()}finally{i(new Set)}},A=e=>{let t=m.find(t=>t.category===e);return null==t?void 0:t.score},z=e=>{var t;let s=h.find(t=>t.category===e);return(null==s?void 0:null===(t=s.audits)||void 0===t?void 0:t.length)||0},D=e=>h.some(t=>t.category===e),O=e=>{let t=h.find(t=>t.category===e);return null==t?void 0:t.timestamp},L=e=>x||r.has(e),M=x||y||r.size>0,Z=y||r.has(n),F=f||w;return d?(0,p.jsxs)("div",{className:"flex h-full w-full flex-col overflow-auto p-6",children:[(0,p.jsxs)("div",{className:"mb-1",children:[(0,p.jsx)("h1",{className:"font-semibold mb-4 text-2xl",children:"Page Speed Analysis"}),u&&(0,p.jsx)("div",{className:"mb-6 rounded-lg border border-amber-200 bg-amber-50 p-4",children:(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)(eo.Z,{name:"warning",className:"mt-0.5 text-amber-500",size:"small"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-amber-800",children:"Results may be outdated"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-amber-700",children:"Your latest changes haven't been published yet. The current analysis is based on the previously published version."})]})]}),(0,p.jsxs)(G.z,{size:"sm",variant:"outline",onClick:P,disabled:M,className:"gap-2",children:[(0,p.jsx)(eo.Z,{name:"refresh",size:"small"}),"Regenerate"]})]})}),(0,p.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,p.jsx)(G.z,{variant:"mobile"===s?"default":"outline",size:"sm",onClick:()=>S("mobile"),children:"Mobile"}),(0,p.jsx)(G.z,{variant:"desktop"===s?"default":"outline",size:"sm",onClick:()=>S("desktop"),children:"Desktop"})]}),(0,p.jsx)("div",{className:"mb-6 grid grid-cols-2 gap-4 md:grid-cols-4",children:[{key:"performance",label:"Performance"},{key:"accessibility",label:"Accessibility"},{key:"best-practices",label:"Best Practices"},{key:"seo",label:"SEO"}].map(e=>{let t=A(e.key),a=z(e.key),l=D(e.key),r=O(e.key),i=L(e.key);return(0,p.jsx)(lG,{label:e.label,score:t,issueCount:a,lastUpdated:r,isSelected:n===e.key,isLoading:i,onClick:()=>C(e.key),onRun:l?void 0:()=>T(e.key),onForceRefresh:()=>I(e.key)},"".concat(s,"-").concat(e.key))})})]}),F&&(0,p.jsxs)("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-red-700",children:(null===(t=f||w)||void 0===t?void 0:t.message)||"Failed to fetch page speed data"})]}),Z&&(0,p.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,p.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,p.jsx)(te.$,{size:"large"}),(0,p.jsxs)("p",{className:"text-lg text-muted-foreground",children:["Loading ",n," data for ",s,"..."]})]})}),j&&!Z&&(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsxs)("h4",{className:"text-md mb-4 font-medium",children:["Issues to Fix - ",j.score.label," (",s,")",k.length>0&&(0,p.jsxs)("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",k.length," ",1===k.length?"issue":"issues",")"]})]}),k.length>0&&(0,p.jsx)("div",{className:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)(eo.Z,{name:"info",className:"mt-0.5 text-blue-500",size:"small"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Important Information"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-blue-700",children:'Please note that not all performance issues can be automatically fixed by our AI. Some issues may persist even after applying the "Try Fix" feature. We recommend carefully reviewing the detailed analysis and suggestions provided in the chat. After any fixes are applied, you\'ll need to re-publish your application and regenerate the page speed analysis to see the updated results.'})]})]})}),(0,p.jsxs)("div",{className:"space-y-4",children:[k.map((e,t)=>(0,p.jsx)(lX,{audit:e,strategy:s,category:n},"".concat(e.id,"-").concat(t))),0===k.length&&(0,p.jsx)("div",{className:"py-8 text-center",children:(0,p.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,p.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:(0,p.jsx)(eo.Z,{name:"check",className:"text-green-600",size:"small"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"mb-1 text-lg font-medium text-green-800",children:"No Issues Found!"}),(0,p.jsxs)("p",{className:"text-sm text-green-600",children:[j.score.label," category is performing excellently. Great job!"]})]})]})})]})]}),j.screenshot&&"performance"===n&&(0,p.jsx)(lJ,{screenshotData:j.screenshot})]}),!j&&!Z&&!F&&(0,p.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsxs)("p",{className:"mb-4 text-muted-foreground",children:['Select a category above and click "Run" to analyze your project\'s'," ",n," performance"]}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analysis results are cached for each strategy and category combination"})]})})]}):(0,p.jsx)(l$,{})};let rt=e=>{let{children:t,device:s,className:a}=e,n=(0,g.useMemo)(()=>{switch(s){case"mobile":return{width:"375px",height:"100%"};case"tablet":return{width:"768px",height:"100%"};default:return{width:"100%",height:"100%"}}},[s]);return(0,p.jsx)("div",{className:(0,ed.cn)("flex flex-col transition-all ease-in-out",a),style:{width:n.width,height:n.height},children:t})};var rs=s(6454);let ra=e=>{let{hotkey:t,className:s}=e;return(0,p.jsx)("kbd",{className:(0,ed.cn)("border-current/30 ml-1 flex h-4 items-center rounded-sm border px-1 text-[9px] font-medium text-inherit transition-colors group-hover:border-foreground",s),children:t.toUpperCase()})},rn=g.forwardRef((e,t)=>{let{hidden:s=!1,disabled:a=!1,hotkey:n,showHotkey:l=!1,onClick:r,hotkeyOptions:i,className:o,...c}=e;return((0,er.y1)(n||"",e=>{e.preventDefault(),r&&r(e)},{enabled:!a,...i},[r]),s)?null:(0,p.jsxs)(G.z,{ref:t,disabled:a,onClick:r,...c,className:(0,ed.cn)("group",o),children:[c.children,l&&n&&(0,p.jsx)(ra,{hotkey:n})]})});rn.displayName="HotkeyButton";let rl=e=>{let{projectId:t,errors:s,allErrors:a,clearErrors:n,canAIFix:l}=e,{onClick:r,isPending:i}=(0,sS.hw)({projectId:t,errors:a}),o=(0,z.Sl)(e=>e.consoleContentType),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),h=(0,D.bk)(e=>e.isSendChatMessageMutationPending),{setShowConsole:x,setConsoleErrorContent:f}=(0,z.pE)(),v=(0,z.Sl)(e=>null!==e.consoleContentType);return(0,g.useEffect)(()=>{s&&0!==s.length?d(!0):d(!1)},[s]),(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 overflow-hidden",style:{height:"100%"},children:(0,p.jsx)("div",{className:(0,ed.cn)("pointer-events-auto absolute bottom-0 left-1/2 mb-36 w-5/6 max-w-[440px] -translate-x-1/2 transform rounded-lg shadow-lg transition-all duration-500 ease-in-out md:mb-4 ".concat(c?"translate-y-0 opacity-100":"translate-y-full opacity-0")),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,p.jsxs)(lY.Zb,{className:"overflow-hidden p-1",children:[(0,p.jsx)(lY.aY,{className:"p-4",children:(0,p.jsx)("div",{className:"flex w-full flex-col items-start justify-start",children:(0,p.jsxs)("div",{className:"flex w-full items-end justify-between gap-6",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"mb-1 flex items-center",children:[(0,p.jsx)(eo.Z,{name:"warning",size:"default",className:"mr-2"}),(0,p.jsx)("p",{className:"text-base font-medium",children:"Error"})]}),(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:sS.v7[s[0].type]})})]}),(0,p.jsxs)("div",{className:"flex flex-col items-end justify-end gap-2",children:[(0,p.jsx)(rn,{variant:"outline",onClick:()=>{f(a),x("error"===o?null:"error")},hotkey:"L",showHotkey:!0,children:"Show logs"}),l&&(0,p.jsx)(rn,{variant:"default",className:"w-full",onClick:()=>{n(),r()},disabled:i||h||v,hotkey:"F",showHotkey:!0,children:"Try to fix"})]})]})})}),u&&(0,p.jsx)("div",{className:"absolute right-0 top-0",children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon",onClick:()=>{n()},className:"h-6 w-6",children:(0,p.jsx)(eo.Z,{name:"close",size:"default"})})})]})})})},rr=e=>{let{projectId:t}=e,{store:s,clearBlankScreenErrors:a}=(0,k.D)(),n=s(e=>e.runtimeErrors),l=null==n?void 0:n.filter(e=>e.has_blank_screen);if(!l||0===l.length)return null;let r=l.map(e=>{let{message:t,...s}=e;return{id:(0,rs.Xm)("error").toString(),created_at:sC.EK.fromDate(new Date),type:s_.N.RUNTIME,occurred_at:new Date().toISOString(),error_message:t,meta_data:{...s}}});return(0,p.jsx)(rl,{projectId:t,allErrors:r,errors:r,clearErrors:a,canAIFix:!0})},ri=()=>{let e=(0,V.v)();return e?(0,p.jsx)(rr,{projectId:e}):(T.logging.error("projectId is not defined, this should not happen"),null)},ro=e=>{let{children:t}=e;return(0,p.jsxs)(p.Fragment,{children:[t,(0,p.jsx)(ri,{})]})},rc=[{icon:"dock_to_right",text:"Chat with AI in the sidebar"},{icon:"location_searching",text:"Select specific elements to modify"},{icon:"imagesmode",text:"Upload images as a reference"},{icon:"preview",text:"Instantly preview your changes"},{icon:"school",text:"Set custom knowledge for every edit"},{icon:"database",text:"Connect Supabase for backend"},{icon:"code_blocks",text:"Collaborate at source, via GitHub"},{icon:"globe",text:"Deploy when you're ready"}],rd=e=>{let{text:t="Setting up..."}=e,s=(0,g.useRef)(null);return(0,g.useEffect)(()=>{let e=s.current;if(!e)return;let t=()=>{e.style.transform="translateY(0)"};return e.addEventListener("animationiteration",t),()=>e.removeEventListener("animationiteration",t)},[]),(0,p.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-8",children:[(0,p.jsx)(eo.Z,{name:"lovable_icon",className:"h-[100px] w-[100px] text-muted-foreground/50"}),(0,p.jsx)("span",{children:t}),(0,p.jsxs)("div",{className:"w-100 relative mx-auto h-48 overflow-hidden rounded-lg bg-muted/50",children:[(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 h-12 bg-gradient-to-b from-muted to-transparent"}),(0,p.jsx)("div",{ref:s,className:"animate-slide-up",children:[...rc,...rc].map((e,t)=>(0,p.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,p.jsx)(eo.Z,{name:e.icon,className:"h-5 w-5 text-muted-foreground"}),(0,p.jsx)("span",{className:"text-muted-foreground",children:e.text})]},t))}),(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 h-12 bg-gradient-to-t from-muted to-transparent"})]}),(0,p.jsx)("div",{id:"onboarding-start",className:"absolute bottom-0 right-[12.5rem] h-3 w-3"})]})};function ru(e){let{message:t,level:s}=e;return void 0===s&&(s="info"),(0,p.jsx)("div",{className:(0,ed.cn)("absolute bottom-0 flex w-full flex-grow items-center justify-center pb-36 md:pb-2"),children:(0,p.jsxs)("div",{className:(0,ed.cn)("flex min-w-[300px] flex-row items-center justify-between gap-2 rounded-lg border-border px-6 py-4 shadow-lg shadow-black/25","error"===s&&"bg-warning","info"===s&&"bg-background"),children:[(0,p.jsx)("p",{className:"font-medium",children:t})," ",(0,p.jsx)(te.$,{variant:"ring",size:"default"})]})})}function rm(e){let{activeView:t}=e,s=(0,ew.f6)(e=>e.visibleMode),a=(0,B.iZ)(e=>{var t;return!!(null===(t=e.project)||void 0===t?void 0:t.preview_build_commit_sha)}),n=(0,B.iZ)(e=>!!e.project);return(0,p.jsxs)("div",{className:(0,ed.cn)("relative h-full w-full",{invisible:"console"===t||"dev-mode"===t||"seo"===t}),children:[n&&!a&&(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center"})}),(0,p.jsx)("div",{className:(0,ed.cn)("absolute inset-0",{"pointer-events-none invisible":"static"!==s||!a,active:"static"===s}),children:(0,p.jsx)(ew.g9,{})}),(0,p.jsx)("div",{className:(0,ed.cn)("absolute inset-0",{"pointer-events-none invisible":"live"!==s,active:"live"===s}),children:(0,p.jsx)(ew.i5,{})}),(0,p.jsx)(rp,{visibleMode:s,hasPreviewBuild:a})]})}function rp(e){let{visibleMode:t,hasPreviewBuild:s}=e,a=(0,ew.f6)(e=>e.error),n=(0,D.bk)(e=>e.isSendChatMessageMutationPending),l=(0,ew.f6)(e=>null!==e.error&&"dev_server"===e.error.type),{agentModeEnabled:r}=(0,eR.v)(),i=(0,ew.f6)(e=>e.targetMode),o=(0,D.bk)(e=>e.isBuildErrorOccurredDuringStream),c=(0,ew.f6)(e=>e.isStartingSandboxInTheBackground);return"live"!==i?null:s&&o&&n&&r?(0,p.jsx)(ru,{message:"An error occurred, trying to fix automatically",level:"error"}):"live"===t?null:l?(0,p.jsx)("div",{className:"absolute inset-0 flex w-full flex-grow items-center justify-center pb-2",children:(0,p.jsx)(rh,{message:null==a?void 0:a.message,traceId:null==a?void 0:a.traceId})}):s&&!c?(0,p.jsx)(ru,{message:"Starting live preview..."}):n?(0,p.jsx)("div",{className:"absolute inset-0 flex flex-grow items-center justify-center bg-muted",children:(0,p.jsx)(rx,{})}):null}function rh(e){let{restartLiveMode:t,revertToStaticMode:s}=(0,ew.My)();return(0,p.jsxs)("div",{className:"absolute flex min-w-[300px] flex-col items-center justify-between gap-6 rounded-lg border-border bg-background px-12 py-6 shadow-lg shadow-black/25",children:[(0,p.jsx)("p",{className:"font-medium",children:e.message}),(0,p.jsx)(G.z,{variant:"accent",onClick:()=>{t(!0)},children:"Try again"}),(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",className:"absolute right-2 top-2 z-10 hover:bg-transparent hover:opacity-75",onClick:()=>s(),children:(0,p.jsx)(eo.Z,{name:"close",size:"default"})}),e.traceId&&(0,p.jsx)("code",{className:"absolute bottom-2 right-2 break-all rounded px-[0.2rem] font-mono text-muted-foreground/70",children:e.traceId})]})}function rx(){return(0,p.jsx)("div",{className:"absolute inset-0 flex flex-grow items-center justify-center bg-muted",children:(0,p.jsx)(rd,{text:"Spinning up preview..."})})}let rf=e=>{var t;let{openGithubRequiredDialog:s}=e,{exitConsole:a}=(0,z.pE)(),n=(0,z.Sl)(e=>e.activeEditId),l=(0,A.aK)(e=>n?e.edits[n]:null),r=(0,B.iZ)(e=>e.project),{setActiveView:i}=(0,z.pE)();return(0,p.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,p.jsxs)(rn,{variant:"ghost",size:"sm",onClick:()=>{_.ZP.capture(R.SL.CONSOLE.EXITED_VIA_BUTTON),a(),i("preview")},className:"flex items-center gap-2",hotkey:"esc",showHotkey:!0,hotkeyOptions:{enableOnFormTags:!0},children:[(0,p.jsx)(eo.Z,{name:"chevron_left",size:"small"}),"Exit"]}),(null==l?void 0:l.commit_sha)&&(0,p.jsx)(rn,{variant:"ghost",size:"sm",onClick:()=>{var e,t,a;let n=(0,t0._J)((null==r?void 0:r.github_repo_name)||"",l.commit_sha||"",null==r?void 0:null===(e=r.github_owner)||void 0===e?void 0:e.name);if(_.ZP.capture(R.SL.CONSOLE.GITHUB_LINK_CLICKED,{hasCustomGithubOwner:(null==r?void 0:null===(t=r.github_owner)||void 0===t?void 0:t.name)!==t0.aR,context:"console_header"}),(null==r?void 0:null===(a=r.github_owner)||void 0===a?void 0:a.name)===t0.aR){s();return}n&&window.open(n,"_blank")},hotkey:"G",showHotkey:!0,children:"View on GitHub"}),(0,p.jsx)(lB,{diffAvailable:!!(null==l?void 0:null===(t=l.diff)||void 0===t?void 0:t.length)})]})},rg=e=>{let{projectId:t,activeView:s}=e,a=(0,eb.ty)();return(0,p.jsxs)(eF.M,{mode:"wait",children:["console"===s&&(0,p.jsx)(eU.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 bg-background",children:(0,p.jsx)(lK,{})},"console"),"dev-mode"===s&&(0,p.jsx)(eU.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 flex bg-background",children:(0,p.jsx)(tO,{projectId:t})},"code"),"seo"===s&&a&&(0,p.jsx)(eU.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 flex bg-background",children:(0,p.jsx)(re,{})},"seo")]})};function rv(e){let{projectId:t}=e,{open:s,GithubRequiredDialog:a}=s1(),n=(0,ew.f6)(e=>e.device),l=(0,z.Sl)(e=>e.activeView),r=(0,z.Sl)(e=>e.consoleContentType),i=(0,y.Z)("md");return(0,p.jsxs)("div",{className:(0,ed.cn)("flex flex-grow flex-col overflow-hidden rounded-xl border",{"rounded-none border-none":i}),children:[(0,p.jsx)(a,{}),"console"===l&&("code"===r||"error"===r)&&(0,p.jsx)("div",{className:(0,ed.cn)("hidden h-12 w-full items-center justify-between overflow-hidden border-b bg-muted px-3 md:flex"),children:(0,p.jsx)(rf,{openGithubRequiredDialog:s})}),(0,p.jsxs)("div",{className:"relative flex flex-grow flex-col items-center",children:[(0,p.jsx)(rt,{device:n,className:"justify-center",children:(0,p.jsx)(ro,{children:(0,p.jsx)(rm,{activeView:l})})}),(0,p.jsx)(rg,{projectId:t,activeView:l})]})]})}var rb=s(69522);let rj=e=>(0,p.jsx)(H.Vq,{...e,children:(0,p.jsx)(H.cZ,{className:"py-16 text-center",children:(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{className:"text-center text-2xl",children:"This project has been deprecated."}),(0,p.jsx)("p",{className:"text-center",children:"This project is no longer supported, as it's using Gitlab. Please consider migrating the code to a new GitHub project."})]})})});var ry=s(19060);let rw=e=>{let t=(0,B.iZ)(e=>e.project),{canEdit:s}=(0,S.t)(),[a,n]=g.useState(!1),l=!!(null==t?void 0:t.is_supabase_enabled)||!!(null==t?void 0:t.supabase_project_config),r=s||!l;return(0,p.jsx)(H.Vq,{...e,children:(0,p.jsxs)(H.cZ,{size:"sm",children:[(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{className:"flex items-center gap-2",children:"Remix this project"}),(0,p.jsxs)(H.Be,{children:[(0,p.jsx)("p",{children:"By remixing a project, you will create a copy that you own."}),!r&&(0,p.jsx)("p",{children:"You do not have permission to remix this project because it uses Supabase."})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,p.jsx)(ry.X,{id:"include-history",disabled:!s||e.isRemixing,checked:a,onCheckedChange:e=>n(e)}),(0,p.jsx)(nV.Label,{htmlFor:"include-history",children:"Include project history"})]}),(0,p.jsxs)(H.cN,{children:[(0,p.jsx)(H.GG,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"outline",children:"Cancel"})}),(0,p.jsxs)(G.z,{disabled:!r,onClick:()=>e.onRemix({includeHistory:a}),className:"flex items-center gap-1",loading:e.isRemixing,children:[!e.isRemixing&&(0,p.jsx)(eo.Z,{name:"shuffle",size:"small"}),e.isRemixing?"Remixing...":"Remix"]})]})]})})};var rN=s(81677),rE=s(33910);(o=(i=m||(m={})).accessibility||(i.accessibility={})).REPO_ACCESSIBLE="repo_accessible",o.REPO_NOT_ACCESSIBLE="repo_not_accessible",o.INSTALLATION_NOT_FOUND="installation_not_found",o.INSTALLATION_SUSPENDED="installation_suspended",o.REPO_NOT_FOUND="repo_not_found",o.INSUFFICIENT_PERMISSIONS="insufficient_permissions";let rk=e=>{let{project:t}=e,s=(0,j.C)(),[a,n]=(0,g.useState)(!1),l=t.github_owner,r=t.name;(0,g.useEffect)(()=>{(null==s?void 0:s.accessibility)&&(null==s?void 0:s.accessibility)!==m.accessibility.REPO_ACCESSIBLE&&n(!0)},[null==s?void 0:s.accessibility]);let{authUser:i}=(0,b.Eu)(),{installations:o}=(0,rE.D)({enabled:!!i}),c=(0,j.C)(),d=(0,g.useMemo)(()=>{if(!l||!o)return null;let e=o.find(e=>l.name===e.account.login);return e?e.html_url:null},[l,o]),[u,h]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{c&&("repo_accessible"===c.accessibility?n(!1):u||(n(!0),h(!0)))},[c,n,u,h]),(0,p.jsx)(H.Vq,{open:a,onOpenChange:n,children:(0,p.jsxs)(H.cZ,{children:[(0,p.jsx)(H.fK,{children:(0,p.jsx)(H.$N,{className:"text-2xl",children:"We can't access your repository"})}),(()=>{switch(null==c?void 0:c.accessibility){case"repo_not_accessible":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"If you want to keep using Lovable to improve your project:"}),(0,p.jsxs)("ol",{className:"mt-4 list-inside list-decimal",children:[(0,p.jsxs)("li",{children:["Go to the"," ",d?(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"}):(0,p.jsx)("strong",{children:" GitHub App settings"})]}),(0,p.jsxs)("li",{children:["Grant ",(0,p.jsx)("strong",{children:"Repository access"})," to"," ",l&&r?(0,p.jsxs)("strong",{children:[l.name,"/",r]}):(0,p.jsx)("strong",{children:"your project"}),"."]})]}),(0,p.jsx)(rC,{appSettingsUrl:d})]});case"installation_not_found":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-l",children:["We couldn't find the Lovable GitHub app installation for your"," ",(null==l?void 0:l.type)==="Organization"?"organization":"account",". To resolve this issue, please connect the GitHub app again."]}),(0,p.jsx)("div",{className:"mt-4 flex justify-center",children:(0,p.jsx)(G.z,{className:"ml-2",size:"lg",onClick:()=>{(0,rN.Mn)({githubOwner:null!=l?l:null})},children:"Install GitHub App"})})]});case"insufficient_permissions":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"We don't have the necessary permissions to access your repository. Please uninstall and reinstall the Lovable GitHub app."}),(0,p.jsx)(rC,{appSettingsUrl:d})]});case"installation_suspended":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-l",children:["The GitHub app installation for your"," ",(null==l?void 0:l.type)==="Organization"?"organization":"account"," ","has been suspended."," ",d?(0,p.jsxs)(p.Fragment,{children:["To resolve this issue, visit your"," ",(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"})," ","and unsuspend the Lovable GitHub app installation."]}):(0,p.jsx)(p.Fragment,{children:"Please navigate to your GitHub App settings and unsuspend the Lovable app installation. You can find it under your GitHub account or organization's settings."})]}),(0,p.jsx)(rC,{appSettingsUrl:d})]});case"repo_not_found":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"We couldn't find the specified repository in your GitHub account. Please reach out to our support team for further assistance:"}),d&&(0,p.jsxs)("p",{children:["If you removed our app's access to your repository, you can"," ",(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-affirmative-primary hover:underline",children:"reinstate it here."})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(G.z,{variant:"outline",asChild:!0,children:(0,p.jsx)(eT.default,{href:"/support",children:"Reach out to Support"})})})]});default:return null}})()]})})},rC=e=>{let{appSettingsUrl:t}=e;return(0,p.jsx)("div",{className:"mt-4 flex justify-center",children:t&&(0,p.jsx)(G.z,{className:"ml-2",size:"lg",onClick:()=>{window.open(t,"_blank")},children:"App settings"})})},r_=e=>{let{project:t}=e,s=(0,f.useRouter)(),a=(0,B.iZ)(e=>e.isRemixDialogOpen),{setIsRemixDialogOpen:n}=(0,B.d2)(),{canEdit:l}=(0,S.t)(),{mutate:r,isPending:i}=(0,rb.G)({onSubmit:()=>n(!0)}),o=t.id,c=(0,g.useCallback)(e=>{let{includeHistory:t}=e;r({projectId:o,includeHistory:t})},[r,o]);return(0,p.jsxs)(p.Fragment,{children:[t&&!t.git_on_s3&&!t.is_github&&(0,p.jsx)(rj,{open:!0,onOpenChange:()=>s.push("/")}),l&&t&&(0,p.jsx)(rk,{project:t}),(0,p.jsx)(rw,{onRemix:c,isRemixing:i,open:a,onOpenChange:n})]})};var rS=s(90360),rT=s(35194),rR=s(93061),rI=s(49027);let rP=(0,g.memo)(()=>{let{setSelectedImageUrl:e}=(0,A.mx)(),t=(0,A.aK)(e=>e.selectedImageUrl),s=(0,E.Eh)(e=>e.images),a=(0,g.useCallback)(()=>{e(void 0)},[e]),n=(0,g.useCallback)(e=>{e.target===e.currentTarget&&a()},[a]),l=s.find(e=>e.url===t),r=(null==l?void 0:l.name)||"",i=(0,g.useRef)(null);return(0,p.jsx)(rI.Vq,{open:void 0!==t,onOpenChange:a,children:(0,p.jsxs)(rI.PK,{children:[(0,p.jsx)(rI.t9,{className:"fixed inset-0 z-[10000] bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,p.jsxs)(rI.cZ,{className:"fixed inset-0 z-[10000] flex flex-col items-center justify-center gap-2 bg-transparent data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",onClick:n,children:[(0,p.jsx)("div",{className:"relative inline-block max-h-[85dvh] max-w-[90vw]",ref:i,children:(0,p.jsx)("img",{onLoad:e=>{let t=e.target;t&&i.current&&(i.current.style.aspectRatio="".concat(t.naturalWidth," / ").concat(t.naturalHeight))},className:"h-full w-full rounded-xl object-contain shadow-modal",src:t,alt:"Fullscreen Image"})}),r&&(0,p.jsx)("p",{className:"mt-2 min-w-0 max-w-[80vw] truncate text-center text-sm text-white",children:r}),(0,p.jsx)(H.GG,{asChild:!0,className:"absolute right-4 top-2.5 text-white",children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-sm",className:"hover:text-foreground",children:(0,p.jsx)(eo.Z,{name:"close"})})})]})]})})});rP.displayName="ImagePreviewDialogV2";var rA=s(88746),rz=s(61312);let rD=[{targetId:"onboarding-start",title:"Take a quick tour while waiting?",description:"Great job on your first prompt! Let's take a quick tour and learn about visual edits, integrations and publishing.",side:"top",showBorder:!1,showTooltip:!1,index:1,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_ONBOARDING_START},{targetId:"visual-editor-toggle",title:"Visual edits",description:"Click directly in your preview to make quick precision changes to fonts, colors or text. Visual edits are free!",side:"top",showBorder:!1,showTooltip:!0,index:2,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_VISUAL_EDITOR_TOGGLE},{targetId:"main-menu",title:"Control your project",description:"Click the project title and open the drop down to rename, duplicate, or adjust settings for your app.",side:"bottom",showBorder:!1,showTooltip:!0,index:3,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_MAIN_MENU},{targetId:"preview-url-bar",title:"Navigate pages or view on mobile",description:"If your app has multiple pages you can navigate between them here, or toggle mobile view to test your design on smaller screens.",side:"bottom",showBorder:!1,showTooltip:!0,index:4,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_PREVIEW_URL_BAR},{targetId:"supabase-dropdown",title:"Connect to database",description:"Supabase automatically stores everything your project needs â€” like user names, messages, or notes.",side:"bottom",showBorder:!1,showTooltip:!0,index:5,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_SUPABASE_DROPDOWN},{targetId:"publish-menu",title:"Publish your app",description:'Ready to share? Hit "Publish" to go live. You can also connect a custom domain.',side:"bottom",showBorder:!1,showTooltip:!0,index:6,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_SHARE_MENU}],rO=()=>{let e=!(0,y.Z)("md"),{userData:t}=(0,M.SE)(),s=(0,eb.uR)(),a=(0,ew.f6)(e=>e.targetMode),n=s&&e&&!(null==t?void 0:t.has_seen_onboarding_tour)&&"live"===a,[l,r]=(0,g.useState)(0),[i,o]=(0,g.useState)(!0),[c,d]=(0,g.useState)(null),[u,m]=(0,g.useState)(!1),h=(0,x.D)({mutationFn:async()=>{if(!t)return;let e=(0,N.SJ)();await e.put("/user/".concat(t.id),{has_seen_onboarding_tour:!0})}});(0,g.useEffect)(()=>{var e;if(!i)return;let t=document.getElementById(null===(e=rD[l])||void 0===e?void 0:e.targetId);t&&(d(t),t.scrollIntoView({behavior:"smooth",block:"center"}))},[l,i]),(0,g.useEffect)(()=>{if(0===l){let e=setTimeout(()=>{m(!0)},1e3);return()=>clearTimeout(e)}},[l]),(0,g.useEffect)(()=>{var e,t;i&&_.ZP.capture(rD[l].eventName,{step:l+1,stepTitle:null===(e=rD[l])||void 0===e?void 0:e.title,stepTargetId:null===(t=rD[l])||void 0===t?void 0:t.targetId})},[l,i]);let f=()=>{l<rD.length-1?r(l+1):(o(!1),_.ZP.capture(R.SL.ONBOARDING_TOUR.COMPLETED,{totalSteps:rD.length}),h.mutate())},v=()=>{var e,t;o(!1),_.ZP.capture(R.SL.ONBOARDING_TOUR.SKIPPED,{step:l+1,stepTitle:null===(e=rD[l])||void 0===e?void 0:e.title,stepTargetId:null===(t=rD[l])||void 0===t?void 0:t.targetId}),h.mutate()},b=(0,ew.f6)(e=>"live"===e.visibleMode);return n&&(0!==l||!b)&&i&&c?(0,p.jsxs)(ec.u,{open:!0,defaultOpen:!0,instant:!0,children:[(0,p.jsx)(ec.aJ,{asChild:!0,children:(0,p.jsx)("div",{className:"pointer-events-none fixed",style:{top:c.getBoundingClientRect().top,left:c.getBoundingClientRect().left,width:c.offsetWidth,height:c.offsetHeight,boxShadow:0===l?"none":"0 0 0 9999px rgba(0, 0, 0, 0.5)",zIndex:9998,border:!1!==rD[l].showBorder?"1px solid #3b82f6":"none",borderRadius:getComputedStyle(c).borderRadius||"4px"}})}),(0,p.jsxs)(ec._v,{side:rD[l].side,className:"z-[9999] w-[383px] rounded-lg border border-muted-border bg-background p-4 text-foreground opacity-0 shadow-lg transition-opacity duration-300 ".concat(0===l&&u?"opacity-100":l>0?"opacity-100":""),sideOffset:5,avoidCollisions:!0,sticky:"always",children:[rD[l].showTooltip&&(0,p.jsx)(rz.Eh,{className:"z-[10000] h-3 w-3 fill-background"}),(0,p.jsx)("div",{className:"flex flex-col gap-6",children:0===l?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,p.jsx)("h3",{className:"text-base font-medium text-foreground",children:rD[l].title})}),(0,p.jsx)("p",{className:"text-base text-foreground/80",children:rD[l].description}),(0,p.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,p.jsx)(G.z,{variant:"ghost",size:"sm",onClick:v,className:"text-foreground/60 hover:text-foreground",children:"No thanks"}),(0,p.jsx)(G.z,{size:"sm",onClick:f,className:"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80",children:"Let's go"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,p.jsx)("h3",{className:"text-base font-medium text-foreground",children:rD[l].title}),(0,p.jsx)(G.z,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 hover:bg-background/10",onClick:v,children:(0,p.jsx)(eo.Z,{name:"close",size:"small",className:"text-foreground"})})]}),(0,p.jsx)("p",{className:"text-base text-foreground/80",children:rD[l].description}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("p",{className:"text-base text-foreground/60",children:[l," of ",rD.length-1]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[l>1&&(0,p.jsx)(G.z,{variant:"outline",size:"sm",onClick:()=>{l>0&&r(l-1)},className:"hover:affirmative border-0 bg-background text-foreground",children:"Back"}),(0,p.jsx)(G.z,{size:"sm",onClick:f,className:"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80",children:l===rD.length-1?"Done":"Next"})]})]})]})})]})]}):null},rL=()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(rA.Y,{}),(0,p.jsx)(rR.WorkspacePaymentFailedDialog,{}),(0,p.jsx)(rT.CreateWorkspaceDialog,{}),(0,p.jsx)(rS.default,{}),(0,p.jsx)(rO,{}),(0,p.jsx)(rP,{}),(0,p.jsx)(W.RootDialog,{})]}),rM=e=>{var t;let{children:s,projectId:a}=e,[n,l]=(0,g.useState)(!0),r=(0,B.iZ)(e=>e.project),{isAuthenticated:i}=(0,b.Eu)();(0,g.useEffect)(()=>{(null==r?void 0:r.name)&&(document.title="".concat(r.name," - Lovable"))},[null==r?void 0:r.name]);let{canEdit:o,isLoading:c}=(0,S.t)(),d=(0,$.c)(e=>e.hasFetchedCollaborators),u=!c&&(!i||!!d)&&!1===o,m=(0,g.useRef)(null),h=(0,g.useCallback)(()=>{l(!1)},[]),x=(0,g.useCallback)(()=>{l(!0)},[]),f=(0,g.useCallback)(()=>{l(!n)},[n]);(0,g.useEffect)(()=>{var e,t;n?null===(e=j.current)||void 0===e||e.expand():null===(t=j.current)||void 0===t||t.collapse()},[n]),(0,g.useEffect)(()=>{u&&h()},[h,u]),(0,er.y1)("mod+b",e=>{e.preventDefault(),f()},{enableOnFormTags:!0},[f]);let j=(0,g.useRef)(null),y=(0,eW.I_)(),w=(0,eW.k6)(),N=(0,eW.SE)(e=>e.panelSizes),E=(0,eW.SE)(e=>e.updatePanelSizes),k=(0,W.z)(al),C=aa();return(0,g.useEffect)(()=>{if(C){let e=v.Am.warning("Update Project",{description:"Your project is out of date",duration:1/0,action:(0,p.jsx)(G.z,{className:"ml-auto",variant:"accent",onClick:()=>{k({childProps:{}})},children:"Update project"})});return()=>{v.Am.dismiss(e)}}},[C,k]),(0,p.jsx)(tf.T,{children:(0,p.jsxs)("div",{className:"flex h-dvh flex-col",children:[(0,p.jsx)("div",{className:"sticky top-0 z-50 w-full",children:(0,p.jsx)(ar.E,{})}),(0,p.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col bg-background",children:[r&&(0,p.jsx)(r_,{project:r}),(0,p.jsx)(rL,{}),(0,p.jsx)(ln,{}),(0,p.jsx)(as,{isSidebarOpen:n,toggleSidebar:f,openSidebar:x,hideButtons:u}),(0,p.jsx)("main",{className:"relative isolate flex min-h-0 flex-1",ref:m,children:(0,p.jsx)("div",{className:"hidden min-h-0 flex-1 md:flex",children:(0,p.jsxs)(ao,{direction:"horizontal",className:"relative flex min-h-0 flex-1 flex-row",autoSaveId:"editor-resizable-panels",onLayout:e=>{e&&(e[0]>0&&(document.cookie="react-resizable-panels:layout=".concat(JSON.stringify(e),"; path=/projects")),E(e))},children:[(0,p.jsx)(ac,{collapsible:!0,onExpand:x,onCollapse:h,defaultSize:null!==(t=N[0])&&void 0!==t?t:eB.DEFAULT_SIDEBAR_SIZE,minSize:y,maxSize:w,collapsedSize:0,className:(0,ed.cn)("relative inset-y-0 z-40 mr-0 flex h-full min-h-0 overflow-x-hidden bg-background"),ref:j,children:s}),(0,p.jsx)(ad,{className:"z-[10000] ml-2",tooltip:"Drag to resize"}),(0,p.jsx)(ac,{minSize:40,defaultSize:N[1]||100-eB.DEFAULT_SIDEBAR_SIZE,className:"relative flex flex-1 flex-col pb-2 pr-2",id:"preview-panel",children:(0,p.jsx)(rv,{projectId:a})})]})})})]})]})})};var rZ=s(46434);let rF=()=>{let{refreshPreview:e}=(0,ew.My)(),[t,s]=(0,g.useState)(!1),a=(0,g.useRef)(null),{pages:n}=e1(),l=(0,e0.u)(e=>e.setCurrentPage),r=(0,ew.My)().refreshPreview,i=(0,ew.f6)(e=>e.currentPath);(0,g.useEffect)(()=>{l(i||"/"),m(i||"/")},[i,l]),(null==n?void 0:n.find(e=>e.path===i))||null==n||n.find(e=>e5(i,e.path));let o=e4(i),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(o),h=null==n?void 0:n.filter(e=>e&&e.path.toLowerCase().includes(u.toLowerCase())),x="preview"!==(0,z.Sl)(e=>e.activeView),f=(0,lC.gu)(e=>e.view),[v,b]=(0,g.useState)(!0);(0,g.useEffect)(()=>{let e=0,t=t=>{if("SCROLL_POSITION"===t.data.type){let{scrollY:s}=t.data.payload,a=s-e;a>20?b(!1):a<-1&&b(!0),e=s}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[]);let j=(0,lC.gu)(e=>e.isPreviewDocked),{setIsPreviewDocked:y}=(0,lC.zp)(),w={visible:{opacity:f===lC.$.PREVIEW?1:0,scale:f===lC.$.PREVIEW?1:.9},hidden:{opacity:0,scale:.5}};return(0,p.jsx)("div",{className:"relative h-10 w-full",children:(0,p.jsxs)(eU.E.div,{className:(0,ed.cn)("absolute inset-x-0 bottom-0 flex w-full flex-col overflow-hidden rounded-3xl border bg-background shadow-modal",!j&&"border-transparent",j&&"shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0,scale:.9},animate:j?"visible":v?"visible":"hidden",variants:w,transition:{duration:.2,type:"spring",bounce:.15},children:[(0,p.jsxs)(eU.E.div,{className:"flex max-h-[200px] w-full flex-col gap-1 overflow-hidden overflow-y-auto px-2",initial:{height:0,paddingTop:0,paddingBottom:0},animate:{height:c?"auto":0,paddingTop:c?12:0,paddingBottom:c?12:0},transition:{duration:.3,type:"spring",bounce:.1},children:[null==h?void 0:h.slice(0,9).map((e,t)=>(0,p.jsx)(eU.E.button,{className:(0,ed.cn)("flex w-full flex-col rounded-full px-4 py-1 text-left active:bg-muted",0===t&&"bg-muted"),onClick:()=>{l(e.path),m(e.path),r(e.path),d(!1)},children:(0,p.jsx)("p",{className:"text-lg",children:rU(e.path,u)})},e.path)),(null==h?void 0:h.length)===0&&(0,p.jsxs)("p",{className:"px-4 py-1 text-lg text-muted-foreground",children:['No pages found matching "',u,'"']})]}),(0,p.jsx)("div",{id:"preview-url-bar",className:(0,ed.cn)("flex h-10 items-center bg-background pl-2",c&&"border-t"),children:(0,p.jsxs)("form",{className:"relative flex h-full min-h-10 flex-grow items-center",onSubmit:e=>{var t,s,n,i;e.preventDefault(),(null==h?void 0:h[0])&&(l((null==h?void 0:null===(t=h[0])||void 0===t?void 0:t.path)||""),r((null==h?void 0:null===(s=h[0])||void 0===s?void 0:s.path)||""),m((null==h?void 0:null===(n=h[0])||void 0===n?void 0:n.path)||""),d(!1),null===(i=a.current)||void 0===i||i.blur())},children:[n&&n.length>1?(0,p.jsx)(eJ.I,{ref:a,type:"text",value:x?"Pages unavailable":u,onChange:e=>m(e.target.value),placeholder:"Search pages",onBlur:()=>d(!1),className:"h-full border-none bg-transparent px-4 py-3 text-lg shadow-none outline-none ring-0 focus-visible:outline-none focus-visible:ring-0",disabled:x,onFocus:e=>{d(!0),setTimeout(()=>{var e;null===(e=a.current)||void 0===e||e.select()},0),/Android/i.test(navigator.userAgent)&&setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"center"})},200)}}):(0,p.jsx)("p",{className:"flex h-full items-center px-4 text-lg",children:o}),(0,p.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center gap-0.5",children:[c&&(0,p.jsx)(G.z,{variant:"ghost",className:"mr-2 h-8 w-8 p-1",type:"button",onPointerDown:e=>{m("/"),e.preventDefault()},children:(0,p.jsx)(eo.Z,{name:"close"})}),!c&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e9,{variant:"ghost",type:"button",className:"h-8 w-8 p-1"}),(0,p.jsx)(G.z,{variant:"ghost",className:"h-8 w-8 p-1",type:"button",onClick:()=>{s(!0),e(),setTimeout(()=>{s(!1)},1e3)},disabled:t,children:(0,p.jsx)(eo.Z,{name:"refresh",className:t?"animate-spin":""})}),(0,p.jsx)("button",{className:(0,ed.cn)("h-full pl-2 pr-4",j&&"bg-accent-primary text-accent-primary-foreground"),onClick:()=>{y(e=>!e),b(!0)},children:(0,p.jsx)(eo.Z,{name:j?"dock_to_bottom_fill":"dock_to_bottom"})})]})]})]})})]})})},rU=(e,t)=>{if(!t||"/"===t)return(0,p.jsx)("span",{children:e});let s=e.startsWith("/")?e.slice(1):e,a=t.startsWith("/")?t.slice(1):t,n=a.toLowerCase();if(!s.toLowerCase().includes(n))return(0,p.jsx)("span",{children:e});let l=s.toLowerCase().indexOf(n),r=s.slice(0,l),i=s.slice(l,l+a.length),o=s.slice(l+a.length);return(0,p.jsxs)("span",{children:[e.startsWith("/")&&"/",r&&(0,p.jsx)("span",{className:"text-muted-foreground",children:r}),(0,p.jsx)("span",{children:i}),o&&(0,p.jsx)("span",{className:"text-muted-foreground",children:o})]})};var rK=s(74026),rV=s(97752),rW=s(71830),rB=s(61160),rG=s(87751),rH=s(57492);let rq=()=>{let e=(0,li.hT)(e=>e.chatMode)===li.jE.CHAT_ONLY,{setChatMode:t}=(0,li.VK)(),{isAgentModeDefault:s}=(0,eR.v)();return(0,p.jsx)(eF.M,{children:e&&(0,p.jsx)(rX,{className:"bg-affirmative-primary text-affirmative-primary-foreground",icon:"emoji_objects",onClick:()=>{t(s?li.jE.AGENT:li.jE.DEFAULT)}})})},rX=e=>{let{className:t,icon:s,onClick:a}=e;return(0,p.jsxs)(eU.E.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,type:"spring",bounce:0},className:(0,ed.cn)("flex h-10 shrink-0 items-center justify-center gap-2 rounded-full px-2.5 py-1",t),type:"button",onClick:a,children:[(0,p.jsx)(eo.Z,{name:s}),(0,p.jsx)(eo.Z,{name:"close",className:"opacity-50"})]})},rY=e=>{let[t,s]=(0,g.useState)(!1),a=(0,V.v)(),{setSelectedImageUrl:n}=(0,A.mx)(),{message:l,sendChatMessage:r,isSendingDisabled:i,AuthDialogComponent:o}=(0,af.i)(),c=(0,g.useCallback)(async()=>{if((0,rH.Go)(l)){_.ZP.capture("api_key_detected",{project_id:a}),s(!0);return}await r()},[a,r,l]);return(0,p.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[(0,p.jsx)(rG.s,{isOpen:t,onDismiss:()=>s(!1),onConfirm:()=>{s(!1),r(),_.ZP.capture("api_key_warning_dismissed",{project_id:a})}}),(0,p.jsxs)(rK.x,{className:"relative w-full flex-1 border-none bg-transparent p-0 md:mr-0",onSubmit:c,AuthDialogComponent:o,children:[(0,p.jsx)(rV.T,{setSelectedImageUrl:n}),(0,p.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,p.jsx)(rW.E,{autoSize:!0,minHeight:40,forceShowPlaceholder:!1,placeholder:"Ask Lovable...",enableSlashCommands:!1,isChatModeActive:!1,className:"text-lg",shouldAutoFocus:!1}),(0,p.jsx)(rq,{})]}),(0,p.jsx)(rB.y,{})]}),(0,p.jsx)("div",{className:"mt-1"})]})},r$=e=>{let{view:t}=e;return(0,p.jsxs)("div",{className:"relative z-10",children:[t===lC.$.PREVIEW&&(0,p.jsx)(rF,{}),t===lC.$.CHAT&&(0,p.jsx)(rY,{})]})};var rJ=s(96233);let rQ=[{icon:"code",title:"Smarter Code Edits",description:"90% fewer errors and improved generations."},{icon:"devices",title:"New Capabilities",description:"Web search, image generation and more"},{icon:"trending_up",title:"Adaptive Pricing",description:"Pay based on actions, not messages."}],r0=()=>{let[e,t]=(0,g.useState)(!1);return(0,p.jsxs)(rJ.yo.Root,{license:"commercial",presented:e,onPresentedChange:t,children:[(0,p.jsx)(rJ.yo.Trigger,{asChild:!0,children:(0,p.jsx)(G.z,{variant:"ghost",size:"icon-xs",className:"h-6 w-6",children:(0,p.jsx)(eo.Z,{name:"info",className:"h-4 w-4 text-muted-foreground"})})}),(0,p.jsx)(rJ.yo.Portal,{children:(0,p.jsxs)(rJ.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rJ.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rJ.yo.Content,{className:"flex h-auto flex-col gap-4 rounded-t-2xl p-4",children:[(0,p.jsx)(rJ.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,p.jsx)("div",{className:"grid gap-1.5 text-center",children:(0,p.jsx)("h2",{className:"text-2xl font-medium",children:"Meet Agent Mode (Beta)"})}),(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg",children:(0,p.jsx)(eS.default,{src:"/img/announcements/agent-release.png",alt:"Meet Agent Mode",fill:!0,className:"object-cover"})}),(0,p.jsx)("p",{className:"text-base text-muted-foreground",children:"Here is what's new:"}),(0,p.jsx)("div",{className:"flex flex-col gap-4",children:rQ.map(e=>(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)("div",{className:"mt-0.5 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-secondary",children:(0,p.jsx)(eo.Z,{name:e.icon,size:"small",className:"text-secondary-foreground"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-sm font-medium leading-tight text-card-foreground",children:e.title}),(0,p.jsx)("p",{className:"text-sm leading-tight text-muted-foreground",children:e.description})]})]},e.title))}),(0,p.jsx)(G.z,{variant:"ghost",size:"sm",asChild:!0,className:"ml-8 w-fit",children:(0,p.jsxs)(eT.default,{href:"https://lovable.dev/blog/agent-mode-beta",target:"_blank",rel:"noopener noreferrer",children:["Read more ",(0,p.jsx)(eo.Z,{name:"arrow_outward"})]})})]})]})]})})]})},r1=e=>{let{}=e,t=(0,li.hT)(e=>e.chatMode)===li.jE.CHAT_ONLY,{setChatMode:s}=(0,li.VK)(),a=(0,eb.zq)(),{isAgentModeDefault:n,setAgentMode:l}=(0,eR.v)();return(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,p.jsx)(eo.Z,{name:"chat_bubble",className:"h-5 w-5"}),(0,p.jsx)("p",{className:"flex-1 text-lg",children:"Chat Mode"}),(0,p.jsx)(eP.r,{checked:t,onCheckedChange:()=>s(t?n?li.jE.AGENT:li.jE.DEFAULT:li.jE.CHAT_ONLY),className:"h-6 w-10",thumbClassName:"h-5 w-5"})]}),a&&(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 py-2",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(eo.Z,{name:"emoji_objects",className:"h-5 w-5"}),(0,p.jsx)("p",{className:"w-fit flex-1 text-lg",children:"Agent Mode"}),(0,p.jsx)(r0,{})]}),(0,p.jsx)(eP.r,{checked:n,onCheckedChange:l,className:"h-6 w-10",thumbClassName:"h-5 w-5"})]})]})};var r2=s(16054);let r5=e=>{let{closeSheet:t}=e,{getInputProps:s}=(0,r2.j)({portalTargetRef:null,onDropAccepted:t});return(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("label",{className:"flex cursor-pointer flex-col items-center justify-center gap-2 rounded-xl border border-input p-4 active:bg-muted",children:[(0,p.jsx)("input",{className:"hidden",...s({capture:"environment"})}),(0,p.jsx)(eo.Z,{name:"add_a_photo"}),(0,p.jsx)("p",{children:"Camera"})]}),(0,p.jsxs)("label",{className:"flex flex-col items-center justify-center gap-2 rounded-xl border border-input p-4 active:bg-muted",children:[(0,p.jsx)("input",{className:"hidden",...s()}),(0,p.jsx)(eo.Z,{name:"add_photo_alternate"}),(0,p.jsx)("p",{children:"Images"})]})]})},r4=e=>{let{children:t}=e,[s,a]=(0,g.useState)(!1);return(0,p.jsxs)(rJ.yo.Root,{license:"commercial",presented:s,onPresentedChange:a,children:[(0,p.jsx)(rJ.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(rJ.yo.Portal,{children:(0,p.jsxs)(rJ.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rJ.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rJ.yo.Content,{className:"flex h-auto flex-col gap-4 rounded-t-2xl p-4",children:[(0,p.jsx)(rJ.TX.Root,{children:(0,p.jsx)(rJ.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(rJ.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,p.jsx)(r5,{closeSheet:()=>{a(!1)}}),(0,p.jsx)(r1,{})]})]})})]})};var r3=s(66431),r6=s(86843);let r8=e=>{let{children:t}=e,s=(0,eu.z)(e=>e.showHistory),{setShowHistory:a}=(0,eu.VF)(),[n,l]=(0,g.useState)(!1);return(0,p.jsxs)(rJ.yo.Root,{license:"commercial",presented:s,onPresentedChange:a,children:[(0,p.jsx)(rJ.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(rJ.yo.Portal,{children:(0,p.jsxs)(rJ.yo.View,{className:"z-[10000] h-[max(100dvh,100%)]",swipeOvershoot:!1,onTravelRangeChange:e=>{2===e.start&&l(!0)},onTravelStatusChange:e=>{"idleOutside"===e&&l(!1)},detents:n?void 0:"50vh",children:[(0,p.jsx)(rJ.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rJ.yo.Content,{className:"flex h-[calc(max(100dvh,100%)-20px)] flex-col rounded-t-2xl p-4 pb-0",children:[(0,p.jsx)(rJ.TX.Root,{children:(0,p.jsx)(rJ.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(rJ.yo.Title,{children:"History"}),(0,p.jsx)(rJ.yo.Description,{className:"text-muted-foreground",children:"View and restore past edits"}),(0,p.jsx)(rJ.Xs.Root,{asChild:!0,className:"w-full",children:(0,p.jsx)(rJ.Xs.View,{className:"mt-4 flex min-h-0 w-full flex-1 [&>div]:w-full",scrollGestureTrap:{yEnd:!0},scrollGesture:!!n&&"auto",children:(0,p.jsx)(rJ.Xs.Content,{asChild:!0,className:"w-full",children:(0,p.jsx)("div",{className:"flex min-h-0 w-full flex-1 flex-col @container/chat",children:(0,p.jsx)(r6.p,{})})})})}),(0,p.jsx)(r3.A,{}),(0,p.jsx)(rJ.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]})},r9=eU.E.create(G.z),r7=()=>{let e=(0,eu.z)(e=>e.showHistory),t=(0,lC.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(r8,{children:(0,p.jsx)(r9,{variant:t?"outline":"secondary",size:"mobile-round",className:(0,ed.cn)("bg-secondary !shadow-modal hover:bg-secondary md:hover:bg-accent-primary/75 md:hover:text-accent-primary-foreground",e&&"bg-accent-primary text-accent-primary-foreground hover:bg-accent-primary md:hover:bg-accent-primary/75",!t&&"!shadow-modal",t&&"!shadow-transparent"),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},style:{transition:"box-shadow 0.2s ease-out"},children:(0,p.jsx)(eo.Z,{name:"history"})})})};var ie=s(96279);let it=e=>{let{children:t}=e,s=(0,V.v)(),{message:a,sendChatMessage:n,isSendingDisabled:l}=(0,af.i)(),{showStopAction:r,mutation:i}=(0,ie.q)({projectId:null!=s?s:void 0}),o=(0,g.useCallback)(async()=>{await i.mutateAsync()},[i]);return s&&(r||i.isPending)?(0,p.jsx)(eU.E.button,{type:"button",className:(0,ed.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-primary transition-opacity duration-150 disabled:cursor-not-allowed disabled:opacity-50"),disabled:i.isPending,onClick:o,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"stop_fill",size:"large",className:"text-background"})},"stop-button"):a.length>0?(0,p.jsx)(eU.E.button,{id:"chatinput-send-message-button",type:"submit",className:(0,ed.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-foreground text-background transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50"),disabled:l,onClick:n,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"arrow_upward_alt_600",size:"large"})},"send-button"):t};var is=s(37053);let ia=(0,g.forwardRef)((e,t)=>{let{children:s,className:a,asChild:n=!1,...l}=e,r=n?is.g7:"div";return(0,p.jsx)(r,{ref:t,className:(0,ed.cn)("flex items-center gap-2 py-2 transition-colors duration-150 ease-in-out active:text-muted-foreground",a),...l,children:s})});ia.displayName="MobileMenuOption";let il=e=>{let{project:t}=e,{openSettings:s}=(0,eD.r)(),{customDomains:a}=sK({projectId:null==t?void 0:t.id,enabled:!0});return(0,p.jsxs)("div",{className:"my-4 flex flex-col gap-2",children:[(null==t?void 0:t.url)?(0,p.jsx)(ia,{asChild:!0,children:(0,p.jsxs)("a",{href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(eo.Z,{name:"language"}),(0,sF.P)(t.url),(0,p.jsx)(eo.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground"})]})}):(0,p.jsxs)(ia,{children:[(0,p.jsx)(eo.Z,{name:"language"}),(0,p.jsxs)("p",{className:"font-medium",children:[null==t?void 0:t.name,".lovable.app"]})]}),null==a?void 0:a.map((e,t)=>(0,p.jsx)("div",{className:"flex items-center px-4 py-0.5",children:(0,p.jsx)(sZ.Z,{domain:e,showRemove:!1,showIcon:!0},t)},t)),(0,p.jsxs)(ia,{onClick:()=>s("domains"),children:[(0,p.jsx)(eo.Z,{name:"add"}),"Custom domains"]})]})},ir=e=>{var t,s;let{children:a}=e,[n,l]=(0,g.useState)(!1),{setView:r}=(0,lC.zp)(),i=()=>{l(!1)},[o,c]=(0,g.useState)(!1),d=(0,B.iZ)(e=>e.project),u=(0,B.iZ)(e=>e.projectId),m=!!(null==d?void 0:null===(t=d.supabase_project_config)||void 0===t?void 0:t.supabase_project_id),{securityWarnings:h,isLoadingWarnings:x,hasSecurityIssues:f,handleReviewIssuesInDialog:v,handleSecurityReview:b,isSendingSecurityReview:j}=sq({projectId:u,supabaseProjectId:null==d?void 0:null===(s=d.supabase_project_config)||void 0===s?void 0:s.supabase_project_id,setIsOpen:l,setShowPublishConfirmDialog:c,shouldFetchSecurityWarnings:n}),{errorMessage:y,isBuildError:w,failedDialogOpen:N,setFailedDialogOpen:E,handlePublish:k,handlePublishAnyway:C,publishMutation:_}=sB({projectId:u,securityWarnings:h,setShowPublishConfirmDialog:c}),S=(0,eb.wf)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(rJ.yo.Root,{license:"commercial",presented:n,onPresentedChange:l,children:[(0,p.jsx)(rJ.yo.Trigger,{asChild:!0,children:a}),(0,p.jsx)(rJ.yo.Portal,{children:(0,p.jsxs)(rJ.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rJ.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rJ.yo.Content,{className:"h-auto rounded-t-2xl p-4",children:[(0,p.jsx)(rJ.TX.Root,{children:(0,p.jsx)(rJ.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(rJ.yo.Title,{children:(null==d?void 0:d.url)?"Update":"Publish"}),(0,p.jsx)(rJ.yo.Description,{className:"text-muted-foreground",children:(null==d?void 0:d.url)?"Update your project to make your changes live.":"Publish your project to make it visible for others on the internet."}),(0,p.jsx)(il,{project:d}),m&&(0,p.jsx)(sY,{isLoadingSecurityWarnings:x,securityWarnings:h,project:d}),S&&(0,p.jsx)(sM,{project:d}),(0,p.jsxs)("div",{className:"mt-8 flex items-center gap-2",children:[(0,p.jsx)(G.z,{variant:"secondary",onClick:()=>{r(lC.$.CHAT),b(),i()},disabled:j,loading:j,className:"relative h-10 flex-1 gap-1.5 text-base",children:"Review Security"}),(0,p.jsx)(G.z,{variant:f?"secondary":"affirmative",onClick:k,disabled:x,loading:_.isPending,className:"h-10 flex-1 text-base",children:(null==d?void 0:d.url)?"Update":"Publish"})]}),(0,p.jsx)(rJ.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]}),(0,p.jsx)(sR,{open:N,onOpenChange:E,errorMessage:y,isBuildError:w}),(0,p.jsx)(sD,{open:o,onOpenChange:c,onPublishAnyway:C,onReviewIssues:v})]})},ii=eU.E.create(G.z),io=()=>{let{activeView:e,consoleContentType:t}=(0,z.Sl)(e=>({activeView:e.activeView,consoleContentType:e.consoleContentType})),s=(0,A.aK)(e=>e.edits),a=(0,z.Sl)(e=>e.activeEditId),n=a?s[a]:null,{openSettings:l}=(0,eD.r)();return"preview"===e?(0,p.jsx)(id,{}):"console"===e&&"snapshot-preview"===t?(0,p.jsx)(ic,{activeEdit:n}):(0,p.jsx)(ii,{variant:"outline",size:"mobile-round",onClick:()=>l(),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"settings"})},"settings-button")},ic=e=>{let{activeEdit:t}=e,{setView:s}=(0,lC.zp)(),{exitConsole:a}=(0,z.pE)(),n=(0,s3.C)(),l=(0,D.bk)(e=>e.isSomeRevertMutationPending),{mutate:r,isPending:i}=(0,s6.I)({onSuccess:a}),o=(0,lC.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(ii,{variant:o?"outline":"secondary",size:"mobile-round",className:(0,ed.cn)("animate-text-shimmer px-0 text-lg text-affirmative-primary hover:bg-secondary focus-visible:bg-secondary active:bg-secondary",!o&&"!shadow-modal",o&&"!shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},disabled:!t||n||l||i,onClick:()=>{r({edit:t}),s(lC.$.CHAT)},initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"restart_alt",className:i?"animate-spin-reverse":""})},"restore-button")},id=()=>{let e=(0,lC.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(ir,{children:(0,p.jsx)(ii,{variant:e?"outline":"secondary",size:"mobile-round",className:(0,ed.cn)("px-0 text-lg text-affirmative-primary hover:bg-secondary focus-visible:bg-secondary active:bg-secondary",!e&&"!shadow-modal",e&&"!shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"language"})},"publish-button")})},iu=()=>{let{view:e}=(0,lC.gu)(e=>e),{setView:t}=(0,lC.zp)(),s=(0,g.useRef)(null),a=(0,lC.gu)(e=>e.isPreviewDocked);return(0,p.jsxs)(eU.E.div,{ref:s,className:(0,ed.cn)("relative grid h-10 flex-1 grid-cols-2 rounded-full bg-muted text-lg",e===lC.$.PREVIEW&&!a&&"shadow-modal",a&&"shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,type:"spring",bounce:0},children:[(0,p.jsx)("div",{onClick:()=>t(lC.$.CHAT),className:(0,ed.cn)("relative flex h-full cursor-pointer items-center justify-center rounded-full px-4"),"data-testid":"mobile-view-chat-button",children:(0,p.jsx)("span",{className:"pointer-events-none relative z-10 select-none",children:"Chat"})}),(0,p.jsx)("div",{onClick:()=>t(lC.$.PREVIEW),className:(0,ed.cn)("relative flex h-full cursor-pointer items-center justify-center rounded-full px-4"),"data-testid":"mobile-view-preview-button",children:(0,p.jsx)("span",{className:"pointer-events-none relative z-10 select-none",children:"Preview"})}),(0,p.jsx)(eU.E.div,{className:"absolute inset-y-[2px] w-1/2 rounded-full bg-background shadow-md","data-testid":"mobile-view-pill","data-view":e,initial:{left:e===lC.$.CHAT?"2px":"calc(50% - 2px)"},animate:{left:e===lC.$.CHAT?"2px":"calc(50% - 2px)"},transition:{type:"spring",duration:.4,bounce:0},layoutId:"mobile-view-switcher-pill",drag:"x",dragConstraints:s,dragElastic:0,dragMomentum:!0,dragTransition:{bounceStiffness:80,bounceDamping:10},dragSnapToOrigin:!0,onDragEnd:(e,a)=>{if(!s.current)return;let n=a.offset.x;Math.abs(n)>40&&(n>0?t(lC.$.PREVIEW):t(lC.$.CHAT))}},"pill-".concat(e))]},"mobile-view-switcher")},im=()=>(0,p.jsxs)("div",{className:"absolute inset-0 translate-y-[30%] [&>div]:absolute [&>div]:inset-0",style:{bottom:"calc(-1 * env(safe-area-inset-bottom))"},children:[(0,p.jsx)("div",{style:{zIndex:2,WebkitBackdropFilter:"blur(1px)",backdropFilter:"blur(1px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 12.5%, rgb(255, 255, 255) 37.5%, rgba(255, 255, 255, 0) 50%)"}}),(0,p.jsx)("div",{style:{zIndex:3,WebkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 12.5%, rgb(255, 255, 255) 37.5%, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 62.5%)"}}),(0,p.jsx)("div",{style:{WebkitBackdropFilter:"blur(4px)",backdropFilter:"blur(4px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 37.5%, rgb(255, 255, 255) 50%, rgb(255, 255, 255) 62.5%, rgba(255, 255, 255, 0) 75%)"}}),(0,p.jsx)("div",{style:{zIndex:5,WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 50%, rgb(255, 255, 255) 62.5%, rgb(255, 255, 255) 75%, rgba(255, 255, 255, 0) 87.5%)",WebkitBackdropFilter:"blur(8px)",backdropFilter:"blur(8px)"}})]}),ip=eU.E.create(G.z),ih=()=>{let{view:e}=(0,lC.gu)(e=>e),{setView:t}=(0,lC.zp)(),{setShowConsole:s,exitConsole:a}=(0,z.pE)(),{openSettings:n}=(0,eD.r)(),l=(0,lC.gu)(e=>e.isPreviewDocked),r=(0,z.Sl)(e=>e.consoleContentType);return"preview"===(0,z.Sl)(e=>e.activeView)||"snapshot-preview"===r||e===lC.$.CHAT||null===r?(0,p.jsxs)("div",{className:(0,ed.cn)("relative z-10 -mx-px flex w-[calc(100%+2px)] flex-col gap-2 rounded-t-2xl border-l border-r border-t bg-background p-4",e===lC.$.PREVIEW&&"gap-2 rounded-none bg-transparent transition-colors duration-150 ease-in-out",!l&&e===lC.$.PREVIEW&&"border-none"),children:[!l&&(0,p.jsx)(im,{}),(0,p.jsx)(r$,{view:e}),(0,p.jsxs)("div",{className:"z-20 flex w-full items-center justify-between gap-2",children:[(0,p.jsx)("div",{className:"flex justify-start gap-2",children:(0,p.jsxs)(eF.M,{children:[e===lC.$.CHAT&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(r4,{children:(0,p.jsx)(ip,{variant:"outline",size:"mobile-round",initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"add"})})})}),e===lC.$.PREVIEW&&(0,p.jsx)(r7,{})]})}),(0,p.jsx)(iu,{}),(0,p.jsx)("div",{className:"flex justify-end gap-2",children:(0,p.jsxs)(eF.M,{children:[e===lC.$.CHAT&&(0,p.jsx)(it,{children:(0,p.jsx)(ip,{variant:"outline",size:"mobile-round",onClick:()=>n(),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(eo.Z,{name:"settings"})},"settings-button")}),e===lC.$.PREVIEW&&(0,p.jsx)(io,{})]})})]})]}):(0,p.jsx)(ix,{consoleContentType:r,setView:t,exitConsole:a})},ix=e=>{let{consoleContentType:t,setView:s,exitConsole:a}=e;return(0,p.jsxs)("div",{className:"relative -mx-px flex w-[calc(100%+2px)] items-center justify-between overflow-hidden rounded-t-2xl border-x border-t bg-background px-4 py-4",children:[(0,p.jsx)(G.z,{variant:"outline",onClick:()=>{s(lC.$.CHAT),a()},size:"mobile-round",children:(0,p.jsx)(eo.Z,{name:"chevron_left"})}),(0,p.jsxs)("p",{className:"absolute left-1/2 -translate-x-1/2 whitespace-nowrap text-center font-medium",children:["Viewing ",z.vD[t]]})]})},ig=e=>{let{onSelect:t}=e;return(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)(iv,{value:"system",label:"System",icon:"contrast",onSelect:t}),(0,p.jsx)(iv,{value:"light",label:"Light",icon:"light_mode",onSelect:t}),(0,p.jsx)(iv,{value:"dark",label:"Dark",icon:"dark_mode",onSelect:t})]})},iv=e=>{let{value:t,label:s,icon:a,onSelect:n}=e,{theme:l,setTheme:r}=(0,to.F)(),i=e=>{("light"===e||"dark"===e||"system"===e)&&(r(e),null==n||n())};return(0,p.jsxs)("div",{className:(0,ed.cn)("flex cursor-pointer flex-col items-center justify-center gap-2 rounded-xl border border-input bg-background p-4 active:bg-muted-active",l===t&&"border-primary"),onClick:()=>i(t),children:[(0,p.jsx)(eo.Z,{name:a}),(0,p.jsx)("p",{children:s})]})},ib=e=>{let{children:t}=e,{authUser:s}=(0,b.Eu)(),{theme:a}=(0,to.F)(),[n,l]=(0,g.useState)(!1),r=(0,eZ.hO)(e=>e.projectWorkspace),i=!!(s&&r&&(null==s?void 0:s.uid)===(null==r?void 0:r.owner_id)),o=(0,B.iZ)(e=>e.project),{canEdit:c}=(0,S.t)(),[d,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)("initial"),{openSettings:x}=(0,eD.r)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(rJ.yo.Root,{license:"commercial",presented:n,onPresentedChange:e=>{l(e),h("initial")},className:"flex min-w-0",children:[(0,p.jsx)(rJ.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(rJ.yo.Portal,{children:(0,p.jsxs)(rJ.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rJ.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rJ.yo.Content,{className:"relative flex h-auto min-h-[20vh] flex-col overflow-hidden rounded-t-2xl",children:[(0,p.jsx)(rJ.TX.Root,{children:(0,p.jsx)(rJ.yo.Handle,{children:"Close menu"})}),(0,p.jsxs)("div",{className:"relative flex-1 overflow-hidden rounded-t-2xl",children:[(0,p.jsxs)(eU.E.div,{className:"rounded-t-2xl bg-background p-4",initial:{x:"0%"},animate:{x:"initial"===m?"0%":"-20%"},transition:{duration:.4,type:"spring",bounce:.1},children:[c&&r&&(0,p.jsx)(eE.H,{workspace:r,isOwnerOfWorkspace:i}),(0,p.jsxs)("div",{className:"flex flex-col gap-1 py-4",children:[c&&(0,p.jsxs)(ia,{onClick:()=>{l(!1),x("project")},children:[(0,p.jsx)(eo.Z,{name:"settings"}),(0,p.jsx)("p",{children:"Project settings"})]}),c&&o&&(0,p.jsxs)(ia,{onClick:()=>{l(!1),u(!0)},children:[(0,p.jsx)(eo.Z,{name:"edit"}),(0,p.jsx)("span",{children:"Rename project"})]}),(0,p.jsxs)(ia,{onClick:()=>h("appearance"),children:[(0,p.jsx)(eo.Z,{name:"contrast"}),(0,p.jsx)("span",{children:"Appearance"}),(0,p.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-muted-foreground",children:[(0,p.jsx)("span",{className:"capitalize",children:a}),(0,p.jsx)(eo.Z,{name:"chevron_right"})]})]})]})]}),(0,p.jsxs)(eU.E.div,{className:"absolute inset-0 flex flex-col gap-4 rounded-t-2xl bg-muted p-4",initial:{x:"100%"},animate:{x:"appearance"===m?"0%":"100%"},transition:{duration:.4,type:"spring",bounce:.1},children:[(0,p.jsxs)("div",{className:"relative flex w-full justify-center",children:[(0,p.jsxs)("button",{className:"absolute left-0 top-0 flex items-center gap-1 duration-150 ease-in-out active:text-muted-foreground",onClick:()=>h("initial"),children:[(0,p.jsx)(eo.Z,{name:"chevron_left"}),(0,p.jsx)("span",{children:"Back"})]}),(0,p.jsx)("p",{className:"text-center font-medium",children:"Appearance"})]}),(0,p.jsx)(ig,{onSelect:()=>h("initial")})]})]}),(0,p.jsx)(rJ.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]}),o&&(0,p.jsx)(e_.i,{project:o,isOpen:d,onClose:()=>u(!1)})]})},ij=e=>{let{canEdit:t=!0,isLoadingPermissions:s=!1}=e,a=(0,B.iZ)(e=>e.project),n=!!(null==a?void 0:a.is_supabase_enabled)||!!(null==a?void 0:a.supabase_project_config);return(0,p.jsxs)("div",{className:"relative z-10 flex h-12 w-full shrink-0 items-center justify-between gap-4 bg-background pr-4",children:[(0,p.jsx)(G.z,{variant:"ghost",asChild:!0,className:"h-full hover:bg-transparent focus-visible:bg-transparent active:bg-transparent",children:(0,p.jsx)(eT.default,{href:"/",children:(0,p.jsx)(eo.Z,{name:"chevron_left"})})}),(0,p.jsx)(ib,{children:(0,p.jsxs)("h1",{className:"absolute left-1/2 top-1/2 flex min-w-0 max-w-[50vw] -translate-x-1/2 -translate-y-1/2 items-center gap-1 truncate text-lg font-medium",children:[(null==a?void 0:a.name)?(0,p.jsx)("span",{className:"truncate",children:a.name}):(0,p.jsx)(eL.O,{className:"h-4 w-36"}),(0,p.jsx)(eo.Z,{name:"chevron_right",className:"rotate-90"})]})}),(0,p.jsx)(iy,{canEdit:t,isLoadingPermissions:s,isSupabaseEnabled:n})]})},iy=e=>{let{canEdit:t,isLoadingPermissions:s,isSupabaseEnabled:a}=e,{setIsRemixDialogOpen:n}=(0,B.d2)(),{isAuthenticated:l}=(0,b.Eu)(),r=(0,f.useRouter)(),i=(0,g.useCallback)(()=>{if(!l){r.push("/login?redirect=".concat(window.location.pathname));return}n(!0)},[l,r,n]);return s?(0,p.jsx)("div",{className:"h-4 w-10"}):t?(0,p.jsx)(sk,{hasUnsavedChanges:!1}):(0,p.jsx)(G.z,{className:"flex items-center gap-1",onClick:i,disabled:!(t||!a),size:"sm",children:"Remix"})},iw=e=>{let{children:t,projectId:s}=e,{view:a}=(0,lC.gu)(e=>e),n=(0,B.iZ)(e=>e.project),l=(0,lC.gu)(e=>e.isPreviewDocked),{setIsPreviewDocked:r}=(0,lC.zp)();(0,g.useEffect)(()=>{window.addEventListener("message",e=>{"SCROLLABLE"===e.data.type&&r(!1)})},[r]);let[i,o]=(0,g.useState)(!1),{canEdit:c,isLoading:d}=(0,S.t)();return((0,g.useEffect)(()=>{a===lC.$.PREVIEW&&o(!0)},[a]),c)?(0,p.jsxs)("div",{className:"flex h-dvh min-h-0 max-w-[100vw] flex-1 flex-col overflow-hidden md:hidden",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[(0,p.jsxs)("div",{className:(0,ed.cn)("relative min-h-0 flex-1"),children:[(0,p.jsxs)(eU.E.div,{animate:{x:a===lC.$.CHAT?0:"-100vw"},transition:{duration:.5,type:"spring",bounce:.15},className:(0,ed.cn)("absolute inset-0 flex min-h-0 max-w-[100vw] flex-1 flex-col will-change-transform",a!==lC.$.CHAT&&"pointer-events-none"),"aria-hidden":a!==lC.$.CHAT,tabIndex:a!==lC.$.CHAT?-1:0,inert:a!==lC.$.CHAT,children:[(0,p.jsx)(ij,{}),t]},lC.$.CHAT),(i||a===lC.$.PREVIEW)&&(0,p.jsx)(eU.E.div,{initial:{x:"100vw"},animate:{x:a===lC.$.PREVIEW?0:"100vw"},transition:{duration:.5,type:"spring",bounce:.15},className:(0,ed.cn)("absolute inset-0 flex max-w-[100vw] flex-1 flex-col overflow-y-auto overflow-x-hidden will-change-transform",a!==lC.$.PREVIEW&&"pointer-events-none",l?"h-auto":"h-dvh"),"aria-hidden":a!==lC.$.PREVIEW,tabIndex:a!==lC.$.PREVIEW?-1:0,inert:a!==lC.$.PREVIEW,children:(0,p.jsx)(rv,{projectId:s})},lC.$.PREVIEW)]}),(0,p.jsx)(rZ.t,{children:(0,p.jsx)(ih,{})}),n&&(0,p.jsx)(r_,{project:n}),(0,p.jsx)(rL,{})]}):(0,p.jsx)(iN,{projectId:s,isLoadingPermissions:d})},iN=e=>{let{projectId:t,isLoadingPermissions:s}=e,a=(0,B.iZ)(e=>e.project);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"relative flex h-dvh min-h-0 max-w-[100vw] flex-1 flex-col overflow-hidden md:hidden",children:[(0,p.jsx)(ij,{canEdit:!1,isLoadingPermissions:s}),(0,p.jsx)("div",{className:(0,ed.cn)("absolute inset-0 flex h-dvh flex-1 flex-col"),children:(0,p.jsx)(rv,{projectId:t})})]}),a&&(0,p.jsx)(r_,{project:a}),(0,p.jsx)(rL,{})]})};var iE=s(52089);function ik(){let e=(0,V.D)(),{refreshPreview:t}=(0,ew.My)(),{errors:s}=(0,iE.hT)({projectId:e}),a=(0,D.bk)(e=>e.isSendChatMessageMutationPending),n=(0,g.useRef)(!1);(0,g.useEffect)(()=>{a?s&&s.length>0&&(n.current=!0):(n.current&&t(),n.current=!1)},[s,t,a])}var iC=s(84350),i_=s(78844),iS=s(38706);function iT(e){let{open:t,onOpenChange:s}=e,a=(0,iS.T_)("SupabaseReauthDialog"),n=(0,V.v)(),{handleConnect:l}=(0,i_.hb)(n||"");return(0,p.jsx)(H.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(H.cZ,{size:"md",children:[(0,p.jsxs)(H.fK,{children:[(0,p.jsx)(H.$N,{children:a("title")}),(0,p.jsx)(H.Be,{children:a("description")})]}),(0,p.jsx)("div",{className:"mt-4 flex flex-col gap-4",children:(0,p.jsx)(G.z,{onClick:()=>{s(!1),l()},className:"w-full",children:a("button.reauthenticate")})})]})})}var iR=s(72253),iI=s(79804);let iP=e=>{var t;let{children:s}=e,a=(0,B.iZ)(e=>e.projectId);ik();let n=(0,h.NL)(),l=(0,s3.C)(),{canEdit:r,isProjectAdmin:i}=(0,S.t)(),o=(0,sH.mo)({projectId:a,onRepoInaccessible:()=>{n.setQueryData(iI.V.repoAccessibility({projectId:a,userProjectPermissions:{admin:i,edit:r}}).queryKey,()=>({accessibility:m.accessibility.REPO_NOT_ACCESSIBLE}))}}),{userData:c}=(0,M.SE)(),[d,u]=(0,g.useState)(!1),x=(0,B.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.supabase_project_config}),f=(0,B.iZ)(e=>e.project),v=(0,iR.S)({workspaceId:null!==(t=null==f?void 0:f.workspace_id)&&void 0!==t?t:""}),b=(0,g.useCallback)(async e=>{var t,s,n,l;let{body:r,options:i}=e;null==i||null===(t=i.clear)||void 0===t||t.call(i),_.LJ.capture(R.SL.CHAT.MESSAGE_SENT,{project_id:a,selected_element:(null===(s=r.selected_elements)||void 0===s?void 0:s.length)||null});let d=null==x?void 0:x.supabase_organization_id,m=(null==f?void 0:f.workspace_id)?null==v?void 0:null===(n=v.supabaseOrganizations)||void 0===n?void 0:n.find(e=>e.id===(null==f?void 0:f.workspace_id)):null==c?void 0:null===(l=c.supabase)||void 0===l?void 0:l.find(e=>e.supabase_org_id===d);if(x&&m&&!m.has_analytics_scope){u(!0);return}await o.mutateAsync({body:r,restore:null==i?void 0:i.restore,clear:null==i?void 0:i.clear})},[null==f?void 0:f.workspace_id,a,o,x,null==v?void 0:v.supabaseOrganizations,null==c?void 0:c.supabase]);return(0,p.jsxs)(iC.x,{onSendChatMessage:b,hasActiveLock:l,children:[(0,p.jsx)(iT,{open:d,onOpenChange:u}),s]})},iA="joinedViaInviteLink";function iz(e){var t;let{children:s}=e,{project_id:a}=(0,f.useParams)(),n=(0,f.useSearchParams)(),l=null!==(t=null==n?void 0:n.get("messageId"))&&void 0!==t?t:void 0;return(0,p.jsx)(E.qG,{localStorageKey:a,children:(0,p.jsx)(B.jI,{projectId:a,children:(0,p.jsx)(k.m,{children:(0,p.jsx)(eZ.c8,{children:(0,p.jsx)($.h,{projectId:a,children:(0,p.jsx)(eu.f6,{children:(0,p.jsx)(lC.eP,{children:(0,p.jsx)(li.cb,{children:(0,p.jsx)(tF.NE,{children:(0,p.jsx)(tc.TO,{projectId:a,children:(0,p.jsx)(D.vw,{children:(0,p.jsx)(z.BV,{children:(0,p.jsx)(A.aM,{projectId:a,messageId:l,children:(0,p.jsx)(ew.wF,{children:(0,p.jsx)(iD,{children:s})})})})})})})})})})})})})})})}function iD(e){let{children:t}=e,s=(0,B.iZ)(e=>e.projectId),a=(0,f.useSearchParams)(),n=(0,f.useRouter)(),l=(0,f.usePathname)(),r=(0,B.iZ)(e=>e.project),{startLiveModeInBackground:i}=(0,ew.My)(),o=(0,g.useRef)(new Set),c=(0,h.NL)(),{authUser:d}=(0,b.Eu)(),u=()=>{let e=new URLSearchParams(a.toString());e.delete(iA);let t=e.toString(),s=t?"".concat(l,"?").concat(t):l;n.replace(s)},{mutate:m}=(0,x.D)({mutationFn:async e=>(0,N.SJ)().put("/projects/".concat(e,"/collaborators/accept-invite")),onSuccess:()=>{o.current.has(s)||v.Am.success("You've been added to \"".concat(null==r?void 0:r.name,'"'),{description:"You now have access to this project"}),o.current.add(s),u()},onError:e=>{(0,w.Eo)(e)},onSettled:()=>{c.invalidateQueries({queryKey:C.iZ.collaborators(s)})}});return(0,g.useEffect)(()=>{i()},[i]),(0,g.useEffect)(()=>{let e=a.get(iA);if(!d&&e){n.replace("/login");return}e&&r&&!o.current.has(s)&&m(s)},[a,s,l,n,r,m,d]),!function(e){let{projectId:t}=e,{canEdit:s}=(0,S.t)(),{setIsSendChatMessageMutationPending:a}=(0,D.Xr)(),{setShouldShowTipsAndTricksOnDevServerStart:n}=(0,z.pE)(),{updateConsoleStateOnStreaming:l}=(0,P.k)({autoSwitchToCode:!1}),{createChatRequestPerformanceMeasurer:r}=(0,U.t)(),{updateMessage:i,setLatestStreamedMessage:o,snapshot:{getUserMessageCount:c,getLastUserMessage:d}}=(0,A.mx)(),{playAudioOnGenerationComplete:u}=F(),{handleChatStreamingError:m}=(0,L.Z)(),p=(0,g.useRef)(null),h=(0,g.useRef)(!1),x=(0,g.useRef)(""),f=(0,g.useRef)(!1),v=(0,g.useCallback)(e=>{if("message"!==e.type){T.logging.error("received_unknown_chat_sse",{event_type:e.type,event_data:e.data});return}let s=e.data;p.current!=s.message_id&&(x.current="",h.current=!1),p.current=s.message_id;let m=!h.current&&!s.is_final,g=h.current&&s.is_final;if(h.current=!s.is_final,m&&(a(!0),x.current="",f.current=!1),g){var v,b;a(!1),o(void 0),n(!1),x.current="";let{measureTimeToLastToken:e}=r({projectId:t});e();let s=1>=c(),l=null!==(b=null===(v=d())||void 0===v?void 0:v.chatOnly)&&void 0!==b&&b;s&&_.ZP.capture(R.SL.CREATION.DONE_AND_RETAINED_VIEW,{project_id:t}),f.current||u({isCreation:s,isChatOnly:l});return}x.current+=s.content;let j={id:s.message_id,content:x.current,created_at:s.created_at,role:I.r.role.AI,tag:I.r.tag.INSTANT_MODE_MESSAGE,status:"running",stopped:!1,thinking_time_ms:s.thinking_time_ms,time_to_first_token_ms:s.time_to_first_token_ms,graph_id:s.graph_id,exclude_from_history:!1},y={...j,stopped:!!j.stopped,status:"running"};o(y);let w=(0,O.AR)(y);w&&("aiMessage"===w.type||"userMessage"===w.type)&&i(j.id,w,!0),l(j)},[o,l,a,n,r,t,c,d,u,i]);(0,g.useEffect)(()=>{let e=new AbortController,a=async()=>{let s=(0,N.SJ)();try{await s.getWithStreaming({url:"/projects/".concat(t,"/latest-message"),onMessage:v,signal:e.signal,reconnectOptions:{onReconnect:()=>{h.current=!1}}})}catch(e){var a,n;e instanceof Error&&"AbortError"===e.name&&(f.current=!0),m(e,{lastUserMessageId:null!==(n=null===(a=d())||void 0===a?void 0:a.id)&&void 0!==n?n:""})}};return s&&a(),()=>{f.current=!0,e.abort()}},[s,t])}({projectId:s}),el(),(0,p.jsx)(j.$,{projectId:s,children:(0,p.jsx)(se,{projectId:s,children:(0,p.jsx)(iO,{children:t})})})}let iO=e=>{let{children:t}=e,s=(0,B.iZ)(e=>e.projectId);ik();let a=(0,y.Z)("md");return(0,p.jsx)(iP,{children:(0,p.jsx)(tm.P,{children:a?(0,p.jsx)(iw,{projectId:s,children:t}):(0,p.jsx)(rM,{projectId:s,children:t})})})}},56613:function(e,t,s){"use strict";s.d(t,{I_:function(){return u},PanelStoreProvider:function(){return c},SE:function(){return d},k6:function(){return m}});var a=s(57437),n=s(2265),l=s(59625),r=s(33699),i=s(37545);let o=(0,n.createContext)(null);function c(e){let{initialPanelSizes:t,children:s}=e,l=(0,n.useRef)();return l.current||(l.current=(0,r.b)(t)),(0,a.jsx)(o.Provider,{value:l.current,children:s})}function d(e){let t=(0,n.useContext)(o);if(!t)throw Error("usePanelStore must be used within a PanelStoreProvider");return(0,l.oR)(t,e)}let u=()=>{let{width:e}=(0,i.Z)();return e?325/e*100:20},m=()=>{let{width:e}=(0,i.Z)();return e?600/e*100:60}},33699:function(e,t,s){"use strict";s.d(t,{DEFAULT_SIDEBAR_SIZE:function(){return l},b:function(){return n}});var a=s(59625);let n=e=>(0,a.Ue)(t=>({panelSizes:e||[l,100-l],updatePanelSizes:e=>t({panelSizes:e})})),l=30},95670:function(e,t,s){"use strict";var a=s(57437),n=s(33145),l=s(27648),r=s(55721),i=s(57346),o=s(94508);t.Z=e=>{let{title:t,iconName:s,imageSrc:c,onClick:d,internalHref:u,externalHref:m,className:p,iconClassName:h}=e,x=(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(i.Z,{name:s,className:"shrink-0 text-foreground ".concat(h)}),c&&(0,a.jsx)(n.default,{alt:"icon",src:c,width:"14",height:"14"}),(0,a.jsx)("span",{className:"truncate text-primary",children:t})]});return(0,a.jsx)(r.Xi,{className:(0,o.cn)("",p),asChild:!0,children:u?(0,a.jsx)(l.default,{href:u,children:x}):m?(0,a.jsxs)("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[x,(0,a.jsx)(i.Z,{name:"arrow_outward",className:"ml-auto h-4 w-4 text-foreground"})]}):(0,a.jsx)("div",{onClick:()=>{d&&d()},children:x})})}},93061:function(e,t,s){"use strict";s.d(t,{WorkspacePaymentFailedDialog:function(){return m}});var a=s(57437),n=s(99376),l=s(2265),r=(s(14438),s(61922)),i=s(108),o=s(7309),c=s(62869),d=s(65269);let u=[...o.qI.planOptions],m=()=>{let[e,t]=(0,l.useState)(!1),[s,i]=(0,l.useState)(),[o,c]=(0,l.useState)(),u=(0,n.useSearchParams)(),m=(0,n.useRouter)(),h=(0,n.usePathname)(),x=(0,l.useCallback)(()=>{let e=new URLSearchParams(u.toString());e.delete("payment_status"),e.delete("plan_id");let t=h+"?"+e.toString();m.replace(t,{scroll:!1})},[m,u,h]),f=(0,r.aS)(e=>e.currentWorkspace);return(0,l.useEffect)(()=>{i(u.get("plan_id")),c(u.get("change_type")),"failed"===u.get("payment_status")&&t(!0)},[u]),(0,a.jsx)(d.v,{title:"Payment Failed",description:"Payment couldnâ€™t complete or has lapsed on this workspace.",open:e,onOpenChange:e=>{t(e),!e&&(u.has("payment_status")||u.has("plan_id"))&&x()},children:(0,a.jsx)(p,{closeDialog:()=>{t(!1),x()},currentWorkspace:f,planId:s,changeType:o})})},p=e=>{let{closeDialog:t,currentWorkspace:s,planId:n,changeType:l}=e,{createPortalSession:r,isCreatePortalSessionLoading:o,checkoutLoading:d,toCheckout:m}=(0,i.m)(),p=u.find(e=>e.id===n),h=async()=>{s&&p&&await m({plan:p,workspaceId:s.id,changeType:l})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"mt-2 flex w-full gap-6",children:[(0,a.jsx)(c.z,{className:"flex-1",variant:"secondary",onClick:t,children:"Go Back"}),(0,a.jsx)(c.z,{onClick:h,className:"flex-1",disabled:!p||!!d||o,loading:d===n,children:"Retry payment"})]})})}},9259:function(e,t,s){"use strict";s.d(t,{R:function(){return i}});var a=s(57437),n=s(2265),l=s(95186),r=s(94508);let i=n.forwardRef((e,t)=>{let{value:s,onChange:i,min:o=0,max:c=100,step:d=1,className:u,inputClassName:m,leftIconClassName:p,scrubSensitivity:h=.5,direction:x="horizontal",icon:f,leftIcon:g,disabled:v=!1,...b}=e,[j,y]=n.useState(s.toString()),[w,N]=n.useState(!1),E=n.useRef(!1),k=n.useRef(0),C=n.useRef(0),_=n.useRef(parseFloat(j)||o),S=n.useMemo(()=>{if(!Number.isFinite(d))return 0;let e=d.toString().split(".")[1];return e?e.length:0},[d]);function T(e){v||0!==e.button||(N(!0),E.current=!0,k.current=e.clientX,C.current=e.clientY,_.current=parseFloat(j)||o,document.addEventListener("pointermove",R),document.addEventListener("pointerup",I))}function R(e){if(!E.current)return;let t=e.clientX-k.current,s=-e.clientY+C.current,a=_.current+("horizontal"===x?t:s)*d*h;y((a=parseFloat(Math.max(o,Math.min(Math.round(a/d)*d,c)).toFixed(S))).toString()),i(a)}function I(){N(!1),E.current=!1,document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",I)}let P=()=>{y(o.toString()),i(o)},A=e=>{let t=parseFloat(e);return isNaN(t)?null:t};return n.useEffect(()=>{y(s.toString())},[s]),(0,a.jsxs)("div",{className:(0,r.cn)("relative w-fit",u,{"opacity-50":v}),children:[g&&(0,a.jsx)("div",{className:(0,r.cn)("absolute inset-y-0 left-0 flex select-none items-center px-2 text-muted-foreground",p,"horizontal"===x?"cursor-ew-resize":"cursor-ns-resize"),onPointerDown:T,children:g}),(0,a.jsx)(l.I,{ref:t,type:"text",className:(0,r.cn)("pr-0 [appearance:textfield] active:cursor-none disabled:opacity-100 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none","horizontal"===x?"hover:cursor-ew-resize":"hover:cursor-ns-resize",g?"pl-8":"",m),disabled:v,step:d,value:j,onChange:function(e){let t=e.target.value;if(""===t){y("");return}if(isNaN(Number(t)))return;y(t);let s=A(t);null!==s&&i(s)},onBlur:function(){(null===A(j)||""===j)&&P()},onPointerDown:T,...b}),!!w&&(0,a.jsx)("div",{className:(0,r.cn)("fixed inset-0","horizontal"===x?"cursor-ew-resize":"cursor-ns-resize")})]})});i.displayName="NumericScrubber"},15345:function(e){e.exports={editor:"CodeEditor_editor__SnrZP"}}},function(e){e.O(0,[4363,4358,7481,1413,5878,8310,6401,5002,7150,8698,6693,2972,4240,6348,4438,6732,1115,9291,441,2078,3347,6008,8350,1770,7648,6242,3464,2536,8519,9202,6873,7891,4827,9427,5598,236,1965,7902,5354,5788,2287,2660,3852,1922,3210,7355,9260,1028,6257,1996,991,2971,4649,1744],function(){return e(e.s=49383)}),_N_E=e.O()}]);